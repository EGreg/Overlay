!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory();else if(typeof define==='function'&&define.amd)
define([],factory);else if(typeof exports==='object')
exports.Handlebars=factory();else root.Handlebars=factory()})(this,function(){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])
return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=!0;return module.exports}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)})([function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _handlebarsRuntime=__webpack_require__(2);var _handlebarsRuntime2=_interopRequireDefault(_handlebarsRuntime);var _handlebarsCompilerAst=__webpack_require__(21);var _handlebarsCompilerAst2=_interopRequireDefault(_handlebarsCompilerAst);var _handlebarsCompilerBase=__webpack_require__(22);var _handlebarsCompilerCompiler=__webpack_require__(27);var _handlebarsCompilerJavascriptCompiler=__webpack_require__(28);var _handlebarsCompilerJavascriptCompiler2=_interopRequireDefault(_handlebarsCompilerJavascriptCompiler);var _handlebarsCompilerVisitor=__webpack_require__(25);var _handlebarsCompilerVisitor2=_interopRequireDefault(_handlebarsCompilerVisitor);var _handlebarsNoConflict=__webpack_require__(20);var _handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict);var _create=_handlebarsRuntime2['default'].create;function create(){var hb=_create();hb.compile=function(input,options){return _handlebarsCompilerCompiler.compile(input,options,hb)};hb.precompile=function(input,options){return _handlebarsCompilerCompiler.precompile(input,options,hb)};hb.AST=_handlebarsCompilerAst2['default'];hb.Compiler=_handlebarsCompilerCompiler.Compiler;hb.JavaScriptCompiler=_handlebarsCompilerJavascriptCompiler2['default'];hb.Parser=_handlebarsCompilerBase.parser;hb.parse=_handlebarsCompilerBase.parse;return hb}
var inst=create();inst.create=create;_handlebarsNoConflict2['default'](inst);inst.Visitor=_handlebarsCompilerVisitor2['default'];inst['default']=inst;exports['default']=inst;module.exports=exports['default']},function(module,exports){"use strict";exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}};exports.__esModule=!0},function(module,exports,__webpack_require__){'use strict';var _interopRequireWildcard=__webpack_require__(3)['default'];var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _handlebarsBase=__webpack_require__(4);var base=_interopRequireWildcard(_handlebarsBase);var _handlebarsSafeString=__webpack_require__(18);var _handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString);var _handlebarsException=__webpack_require__(6);var _handlebarsException2=_interopRequireDefault(_handlebarsException);var _handlebarsUtils=__webpack_require__(5);var Utils=_interopRequireWildcard(_handlebarsUtils);var _handlebarsRuntime=__webpack_require__(19);var runtime=_interopRequireWildcard(_handlebarsRuntime);var _handlebarsNoConflict=__webpack_require__(20);var _handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict);function create(){var hb=new base.HandlebarsEnvironment();Utils.extend(hb,base);hb.SafeString=_handlebarsSafeString2['default'];hb.Exception=_handlebarsException2['default'];hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb}
var inst=create();inst.create=create;_handlebarsNoConflict2['default'](inst);inst['default']=inst;exports['default']=inst;module.exports=exports['default']},function(module,exports){"use strict";exports["default"]=function(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}
newObj["default"]=obj;return newObj}};exports.__esModule=!0},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=__webpack_require__(5);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _helpers=__webpack_require__(7);var _decorators=__webpack_require__(15);var _logger=__webpack_require__(17);var _logger2=_interopRequireDefault(_logger);var VERSION='4.0.5';exports.VERSION=VERSION;var COMPILER_REVISION=7;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:'<= 1.0.rc.2',2:'== 1.0.0-rc.3',3:'== 1.0.0-rc.4',4:'== 1.x.x',5:'== 2.0.0-alpha.x',6:'>= 2.0.0-beta.1',7:'>= 4.0.0'};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType='[object Object]';function HandlebarsEnvironment(helpers,partials,decorators){this.helpers=helpers||{};this.partials=partials||{};this.decorators=decorators||{};_helpers.registerDefaultHelpers(this);_decorators.registerDefaultDecorators(this)}
HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2['default'],log:_logger2['default'].log,registerHelper:function registerHelper(name,fn){if(_utils.toString.call(name)===objectType){if(fn){throw new _exception2['default']('Arg not supported with multiple helpers')}
_utils.extend(this.helpers,name)}else{this.helpers[name]=fn}},unregisterHelper:function unregisterHelper(name){delete this.helpers[name]},registerPartial:function registerPartial(name,partial){if(_utils.toString.call(name)===objectType){_utils.extend(this.partials,name)}else{if(typeof partial==='undefined'){throw new _exception2['default']('Attempting to register a partial called "'+name+'" as undefined')}
this.partials[name]=partial}},unregisterPartial:function unregisterPartial(name){delete this.partials[name]},registerDecorator:function registerDecorator(name,fn){if(_utils.toString.call(name)===objectType){if(fn){throw new _exception2['default']('Arg not supported with multiple decorators')}
_utils.extend(this.decorators,name)}else{this.decorators[name]=fn}},unregisterDecorator:function unregisterDecorator(name){delete this.decorators[name]}};var log=_logger2['default'].log;exports.log=log;exports.createFrame=_utils.createFrame;exports.logger=_logger2['default']},function(module,exports){'use strict';exports.__esModule=!0;exports.extend=extend;exports.indexOf=indexOf;exports.escapeExpression=escapeExpression;exports.isEmpty=isEmpty;exports.createFrame=createFrame;exports.blockParams=blockParams;exports.appendContextPath=appendContextPath;var escape={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;','=':'&#x3D;'};var badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/;function escapeChar(chr){return escape[chr]}
function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key]}}}
return obj}
var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function isFunction(value){return typeof value==='function'};if(isFunction(/x/)){exports.isFunction=isFunction=function(value){return typeof value==='function'&&toString.call(value)==='[object Function]'}}
exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==='object'?toString.call(value)==='[object Array]':!1};exports.isArray=isArray;function indexOf(array,value){for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}
return-1}
function escapeExpression(string){if(typeof string!=='string'){if(string&&string.toHTML){return string.toHTML()}else if(string==null){return ''}else if(!string){return string+''}
string=''+string}
if(!possible.test(string)){return string}
return string.replace(badChars,escapeChar)}
function isEmpty(value){if(!value&&value!==0){return!0}else if(isArray(value)&&value.length===0){return!0}else{return!1}}
function createFrame(object){var frame=extend({},object);frame._parent=object;return frame}
function blockParams(params,ids){params.path=ids;return params}
function appendContextPath(contextPath,id){return(contextPath?contextPath+'.':'')+id}},function(module,exports){'use strict';exports.__esModule=!0;var errorProps=['description','fileName','lineNumber','message','name','number','stack'];function Exception(message,node){var loc=node&&node.loc,line=undefined,column=undefined;if(loc){line=loc.start.line;column=loc.start.column;message+=' - '+line+':'+column}
var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}
if(Error.captureStackTrace){Error.captureStackTrace(this,Exception)}
if(loc){this.lineNumber=line;this.column=column}}
Exception.prototype=new Error();exports['default']=Exception;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing=__webpack_require__(8);var _helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing);var _helpersEach=__webpack_require__(9);var _helpersEach2=_interopRequireDefault(_helpersEach);var _helpersHelperMissing=__webpack_require__(10);var _helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing);var _helpersIf=__webpack_require__(11);var _helpersIf2=_interopRequireDefault(_helpersIf);var _helpersLog=__webpack_require__(12);var _helpersLog2=_interopRequireDefault(_helpersLog);var _helpersLookup=__webpack_require__(13);var _helpersLookup2=_interopRequireDefault(_helpersLookup);var _helpersWith=__webpack_require__(14);var _helpersWith2=_interopRequireDefault(_helpersWith);function registerDefaultHelpers(instance){_helpersBlockHelperMissing2['default'](instance);_helpersEach2['default'](instance);_helpersHelperMissing2['default'](instance);_helpersIf2['default'](instance);_helpersLog2['default'](instance);_helpersLookup2['default'](instance);_helpersWith2['default'](instance)}},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);exports['default']=function(instance){instance.registerHelper('blockHelperMissing',function(context,options){var inverse=options.inverse,fn=options.fn;if(context===!0){return fn(this)}else if(context===!1||context==null){return inverse(this)}else if(_utils.isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name]}
return instance.helpers.each(context,options)}else{return inverse(this)}}else{if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}
return fn(context,options)}})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _utils=__webpack_require__(5);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);exports['default']=function(instance){instance.registerHelper('each',function(context,options){if(!options){throw new _exception2['default']('Must pass iterator to #each')}
var fn=options.fn,inverse=options.inverse,i=0,ret='',data=undefined,contextPath=undefined;if(options.data&&options.ids){contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+'.'}
if(_utils.isFunction(context)){context=context.call(this)}
if(options.data){data=_utils.createFrame(options.data)}
function execIteration(field,index,last){if(data){data.key=field;data.index=index;data.first=index===0;data.last=!!last;if(contextPath){data.contextPath=contextPath+field}}
ret=ret+fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}
if(context&&typeof context==='object'){if(_utils.isArray(context)){for(var j=context.length;i<j;i++){if(i in context){execIteration(i,i,i===context.length-1)}}}else{var priorKey=undefined;for(var key in context){if(context.hasOwnProperty(key)){if(priorKey!==undefined){execIteration(priorKey,i-1)}
priorKey=key;i++}}
if(priorKey!==undefined){execIteration(priorKey,i-1,!0)}}}
if(i===0){ret=inverse(this)}
return ret})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);exports['default']=function(instance){instance.registerHelper('helperMissing',function(){if(arguments.length===1){return undefined}else{throw new _exception2['default']('Missing helper: "'+arguments[arguments.length-1].name+'"')}})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);exports['default']=function(instance){instance.registerHelper('if',function(conditional,options){if(_utils.isFunction(conditional)){conditional=conditional.call(this)}
if(!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper('unless',function(conditional,options){return instance.helpers['if'].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})};module.exports=exports['default']},function(module,exports){'use strict';exports.__esModule=!0;exports['default']=function(instance){instance.registerHelper('log',function(){var args=[undefined],options=arguments[arguments.length-1];for(var i=0;i<arguments.length-1;i++){args.push(arguments[i])}
var level=1;if(options.hash.level!=null){level=options.hash.level}else if(options.data&&options.data.level!=null){level=options.data.level}
args[0]=level;instance.log.apply(instance,args)})};module.exports=exports['default']},function(module,exports){'use strict';exports.__esModule=!0;exports['default']=function(instance){instance.registerHelper('lookup',function(obj,field){return obj&&obj[field]})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);exports['default']=function(instance){instance.registerHelper('with',function(context,options){if(_utils.isFunction(context)){context=context.call(this)}
var fn=options.fn;if(!_utils.isEmpty(context)){var data=options.data;if(options.data&&options.ids){data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])}
return fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})}else{return options.inverse(this)}})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=__webpack_require__(16);var _decoratorsInline2=_interopRequireDefault(_decoratorsInline);function registerDefaultDecorators(instance){_decoratorsInline2['default'](instance)}},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);exports['default']=function(instance){instance.registerDecorator('inline',function(fn,props,container,options){var ret=fn;if(!props.partials){props.partials={};ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);var ret=fn(context,options);container.partials=original;return ret}}
props.partials[options.args[0]]=options.fn;return ret})};module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);var logger={methodMap:['debug','info','warn','error'],level:'info',lookupLevel:function lookupLevel(level){if(typeof level==='string'){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());if(levelMap>=0){level=levelMap}else{level=parseInt(level,10)}}
return level},log:function log(level){level=logger.lookupLevel(level);if(typeof console!=='undefined'&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];if(!console[method]){method='log'}
for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){message[_key-1]=arguments[_key]}
console[method].apply(console,message)}}};exports['default']=logger;module.exports=exports['default']},function(module,exports){'use strict';exports.__esModule=!0;function SafeString(string){this.string=string}
SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return ''+this.string};exports['default']=SafeString;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireWildcard=__webpack_require__(3)['default'];var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.checkRevision=checkRevision;exports.template=template;exports.wrapProgram=wrapProgram;exports.resolvePartial=resolvePartial;exports.invokePartial=invokePartial;exports.noop=noop;var _utils=__webpack_require__(5);var Utils=_interopRequireWildcard(_utils);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _base=__webpack_require__(4);function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. '+'Please update your precompiler to a newer version ('+runtimeVersions+') or downgrade your runtime to an older version ('+compilerVersions+').')}else{throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. '+'Please update your runtime to a newer version ('+compilerInfo[1]+').')}}}
function template(templateSpec,env){if(!env){throw new _exception2['default']('No environment passed to template')}
if(!templateSpec||!templateSpec.main){throw new _exception2['default']('Unknown template object: '+typeof templateSpec)}
templateSpec.main.decorator=templateSpec.main_d;env.VM.checkRevision(templateSpec.compiler);function invokePartialWrapper(partial,context,options){if(options.hash){context=Utils.extend({},context,options.hash);if(options.ids){options.ids[0]=!0}}
partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(result==null&&env.compile){options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env);result=options.partials[options.name](context,options)}
if(result!=null){if(options.indent){var lines=result.split('\n');for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break}
lines[i]=options.indent+lines[i]}
result=lines.join('\n')}
return result}else{throw new _exception2['default']('The partial '+options.name+' could not be compiled when running in runtime-only mode')}}
var container={strict:function strict(obj,name){if(!(name in obj)){throw new _exception2['default']('"'+name+'" not defined in '+obj)}
return obj[name]},lookup:function lookup(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name]}}},lambda:function lambda(current,context){return typeof current==='function'?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function fn(i){var ret=templateSpec[i];ret.decorator=templateSpec[i+'_d'];return ret},programs:[],program:function program(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths||blockParams||declaredBlockParams){programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths)}else if(!programWrapper){programWrapper=this.programs[i]=wrapProgram(this,i,fn)}
return programWrapper},data:function data(value,depth){while(value&&depth--){value=value._parent}
return value},merge:function merge(param,common){var obj=param||common;if(param&&common&&param!==common){obj=Utils.extend({},common,param)}
return obj},noop:env.VM.noop,compilerInfo:templateSpec.compiler};function ret(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data)}
var depths=undefined,blockParams=templateSpec.useBlockParams?[]:undefined;if(templateSpec.useDepths){if(options.depths){depths=context!==options.depths[0]?[context].concat(options.depths):options.depths}else{depths=[context]}}
function main(context){return ''+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}
main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams);return main(context,options)}
ret.isTop=!0;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials)}
if(templateSpec.usePartial||templateSpec.useDecorators){container.decorators=container.merge(options.decorators,env.decorators)}}else{container.helpers=options.helpers;container.partials=options.partials;container.decorators=options.decorators}};ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams){throw new _exception2['default']('must pass block params')}
if(templateSpec.useDepths&&!depths){throw new _exception2['default']('must pass parent depths')}
return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)};return ret}
function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var currentDepths=depths;if(depths&&context!==depths[0]){currentDepths=[context].concat(depths)}
return fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}
prog=executeDecorators(fn,prog,container,depths,data,blockParams);prog.program=i;prog.depth=depths?depths.length:0;prog.blockParams=declaredBlockParams||0;return prog}
function resolvePartial(partial,context,options){if(!partial){if(options.name==='@partial-block'){partial=options.data['partial-block']}else{partial=options.partials[options.name]}}else if(!partial.call&&!options.name){options.name=partial;partial=options.partials[partial]}
return partial}
function invokePartial(partial,context,options){options.partial=!0;if(options.ids){options.data.contextPath=options.ids[0]||options.data.contextPath}
var partialBlock=undefined;if(options.fn&&options.fn!==noop){options.data=_base.createFrame(options.data);partialBlock=options.data['partial-block']=options.fn;if(partialBlock.partials){options.partials=Utils.extend({},options.partials,partialBlock.partials)}}
if(partial===undefined&&partialBlock){partial=partialBlock}
if(partial===undefined){throw new _exception2['default']('The partial '+options.name+' could not be found')}else if(partial instanceof Function){return partial(context,options)}}
function noop(){return ''}
function initData(context,data){if(!data||!('root' in data)){data=data?_base.createFrame(data):{};data.root=context}
return data}
function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths);Utils.extend(prog,props)}
return prog}},function(module,exports){(function(global){'use strict';exports.__esModule=!0;exports['default']=function(Handlebars){var root=typeof global!=='undefined'?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){if(root.Handlebars===Handlebars){root.Handlebars=$Handlebars}
return Handlebars}};module.exports=exports['default']}.call(exports,(function(){return this}())))},function(module,exports){'use strict';exports.__esModule=!0;var AST={helpers:{helperExpression:function helperExpression(node){return node.type==='SubExpression'||(node.type==='MustacheStatement'||node.type==='BlockStatement')&&!!(node.params&&node.params.length||node.hash)},scopedId:function scopedId(path){return(/^\.|this\b/.test(path.original))},simpleId:function simpleId(path){return path.parts.length===1&&!AST.helpers.scopedId(path)&&!path.depth}}};exports['default']=AST;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];var _interopRequireWildcard=__webpack_require__(3)['default'];exports.__esModule=!0;exports.parse=parse;var _parser=__webpack_require__(23);var _parser2=_interopRequireDefault(_parser);var _whitespaceControl=__webpack_require__(24);var _whitespaceControl2=_interopRequireDefault(_whitespaceControl);var _helpers=__webpack_require__(26);var Helpers=_interopRequireWildcard(_helpers);var _utils=__webpack_require__(5);exports.parser=_parser2['default'];var yy={};_utils.extend(yy,Helpers);function parse(input,options){if(input.type==='Program'){return input}
_parser2['default'].yy=yy;yy.locInfo=function(locInfo){return new yy.SourceLocation(options&&options.srcName,locInfo)};var strip=new _whitespaceControl2['default'](options);return strip.accept(_parser2['default'].parse(input))}},function(module,exports){"use strict";var handlebars=(function(){var parser={trace:function trace(){},yy:{},symbols_:{"error":2,"root":3,"program":4,"EOF":5,"program_repetition0":6,"statement":7,"mustache":8,"block":9,"rawBlock":10,"partial":11,"partialBlock":12,"content":13,"COMMENT":14,"CONTENT":15,"openRawBlock":16,"rawBlock_repetition_plus0":17,"END_RAW_BLOCK":18,"OPEN_RAW_BLOCK":19,"helperName":20,"openRawBlock_repetition0":21,"openRawBlock_option0":22,"CLOSE_RAW_BLOCK":23,"openBlock":24,"block_option0":25,"closeBlock":26,"openInverse":27,"block_option1":28,"OPEN_BLOCK":29,"openBlock_repetition0":30,"openBlock_option0":31,"openBlock_option1":32,"CLOSE":33,"OPEN_INVERSE":34,"openInverse_repetition0":35,"openInverse_option0":36,"openInverse_option1":37,"openInverseChain":38,"OPEN_INVERSE_CHAIN":39,"openInverseChain_repetition0":40,"openInverseChain_option0":41,"openInverseChain_option1":42,"inverseAndProgram":43,"INVERSE":44,"inverseChain":45,"inverseChain_option0":46,"OPEN_ENDBLOCK":47,"OPEN":48,"mustache_repetition0":49,"mustache_option0":50,"OPEN_UNESCAPED":51,"mustache_repetition1":52,"mustache_option1":53,"CLOSE_UNESCAPED":54,"OPEN_PARTIAL":55,"partialName":56,"partial_repetition0":57,"partial_option0":58,"openPartialBlock":59,"OPEN_PARTIAL_BLOCK":60,"openPartialBlock_repetition0":61,"openPartialBlock_option0":62,"param":63,"sexpr":64,"OPEN_SEXPR":65,"sexpr_repetition0":66,"sexpr_option0":67,"CLOSE_SEXPR":68,"hash":69,"hash_repetition_plus0":70,"hashSegment":71,"ID":72,"EQUALS":73,"blockParams":74,"OPEN_BLOCK_PARAMS":75,"blockParams_repetition_plus0":76,"CLOSE_BLOCK_PARAMS":77,"path":78,"dataName":79,"STRING":80,"NUMBER":81,"BOOLEAN":82,"UNDEFINED":83,"NULL":84,"DATA":85,"pathSegments":86,"SEP":87,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];break;case 2:this.$=yy.prepareProgram($$[$0]);break;case 3:this.$=$$[$0];break;case 4:this.$=$$[$0];break;case 5:this.$=$$[$0];break;case 6:this.$=$$[$0];break;case 7:this.$=$$[$0];break;case 8:this.$=$$[$0];break;case 9:this.$={type:'CommentStatement',value:yy.stripComment($$[$0]),strip:yy.stripFlags($$[$0],$$[$0]),loc:yy.locInfo(this._$)};break;case 10:this.$={type:'ContentStatement',original:$$[$0],value:$$[$0],loc:yy.locInfo(this._$)};break;case 11:this.$=yy.prepareRawBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 12:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1]};break;case 13:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!1,this._$);break;case 14:this.$=yy.prepareBlock($$[$0-3],$$[$0-2],$$[$0-1],$$[$0],!0,this._$);break;case 15:this.$={open:$$[$0-5],path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 16:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 17:this.$={path:$$[$0-4],params:$$[$0-3],hash:$$[$0-2],blockParams:$$[$0-1],strip:yy.stripFlags($$[$0-5],$$[$0])};break;case 18:this.$={strip:yy.stripFlags($$[$0-1],$$[$0-1]),program:$$[$0]};break;case 19:var inverse=yy.prepareBlock($$[$0-2],$$[$0-1],$$[$0],$$[$0],!1,this._$),program=yy.prepareProgram([inverse],$$[$0-1].loc);program.chained=!0;this.$={strip:$$[$0-2].strip,program:program,chain:!0};break;case 20:this.$=$$[$0];break;case 21:this.$={path:$$[$0-1],strip:yy.stripFlags($$[$0-2],$$[$0])};break;case 22:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 23:this.$=yy.prepareMustache($$[$0-3],$$[$0-2],$$[$0-1],$$[$0-4],yy.stripFlags($$[$0-4],$$[$0]),this._$);break;case 24:this.$={type:'PartialStatement',name:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],indent:'',strip:yy.stripFlags($$[$0-4],$$[$0]),loc:yy.locInfo(this._$)};break;case 25:this.$=yy.preparePartialBlock($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 26:this.$={path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],strip:yy.stripFlags($$[$0-4],$$[$0])};break;case 27:this.$=$$[$0];break;case 28:this.$=$$[$0];break;case 29:this.$={type:'SubExpression',path:$$[$0-3],params:$$[$0-2],hash:$$[$0-1],loc:yy.locInfo(this._$)};break;case 30:this.$={type:'Hash',pairs:$$[$0],loc:yy.locInfo(this._$)};break;case 31:this.$={type:'HashPair',key:yy.id($$[$0-2]),value:$$[$0],loc:yy.locInfo(this._$)};break;case 32:this.$=yy.id($$[$0-1]);break;case 33:this.$=$$[$0];break;case 34:this.$=$$[$0];break;case 35:this.$={type:'StringLiteral',value:$$[$0],original:$$[$0],loc:yy.locInfo(this._$)};break;case 36:this.$={type:'NumberLiteral',value:Number($$[$0]),original:Number($$[$0]),loc:yy.locInfo(this._$)};break;case 37:this.$={type:'BooleanLiteral',value:$$[$0]==='true',original:$$[$0]==='true',loc:yy.locInfo(this._$)};break;case 38:this.$={type:'UndefinedLiteral',original:undefined,value:undefined,loc:yy.locInfo(this._$)};break;case 39:this.$={type:'NullLiteral',original:null,value:null,loc:yy.locInfo(this._$)};break;case 40:this.$=$$[$0];break;case 41:this.$=$$[$0];break;case 42:this.$=yy.preparePath(!0,$$[$0],this._$);break;case 43:this.$=yy.preparePath(!1,$$[$0],this._$);break;case 44:$$[$0-2].push({part:yy.id($$[$0]),original:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 45:this.$=[{part:yy.id($$[$0]),original:$$[$0]}];break;case 46:this.$=[];break;case 47:$$[$0-1].push($$[$0]);break;case 48:this.$=[$$[$0]];break;case 49:$$[$0-1].push($$[$0]);break;case 50:this.$=[];break;case 51:$$[$0-1].push($$[$0]);break;case 58:this.$=[];break;case 59:$$[$0-1].push($$[$0]);break;case 64:this.$=[];break;case 65:$$[$0-1].push($$[$0]);break;case 70:this.$=[];break;case 71:$$[$0-1].push($$[$0]);break;case 78:this.$=[];break;case 79:$$[$0-1].push($$[$0]);break;case 82:this.$=[];break;case 83:$$[$0-1].push($$[$0]);break;case 86:this.$=[];break;case 87:$$[$0-1].push($$[$0]);break;case 90:this.$=[];break;case 91:$$[$0-1].push($$[$0]);break;case 94:this.$=[];break;case 95:$$[$0-1].push($$[$0]);break;case 98:this.$=[$$[$0]];break;case 99:$$[$0-1].push($$[$0]);break;case 100:this.$=[$$[$0]];break;case 101:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}
function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}
return token}
var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(!0){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}
action=table[state]&&table[state][symbol]}
if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}
if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}
this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}
if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}
switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}
break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}
r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}
if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}
stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return!0}}
return!0}};var lexer=(function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function setInput(input){this._input=input;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match='';this.conditionStack=['INITIAL'];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function input(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}
if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function unput(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}
return this},more:function more(){this._more=!0;return this},less:function less(n){this.unput(this.match.slice(n))},pastInput:function pastInput(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?'...':'')+past.substr(-20).replace(/\n/g,"")},upcomingInput:function upcomingInput(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}
return(next.substr(0,20)+(next.length>20?'...':'')).replace(/\n/g,"")},showPosition:function showPosition(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function next(){if(this.done){return this.EOF}
if(!this._input)this.done=!0;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext='';this.match=''}
var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}
if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}
this._more=!1;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=!1;if(token)return token;else return}
if(this._input===""){return this.EOF}else{return this.parseError('Lexical error on line '+(this.yylineno+1)+'. Unrecognized text.\n'+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=='undefined'){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function topState(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}
var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else{this.begin("mu")}
if(yy_.yytext)return 15;break;case 1:return 15;break;case 2:this.popState();return 15;break;case 3:this.begin('raw');return 15;break;case 4:this.popState();if(this.conditionStack[this.conditionStack.length-1]==='raw'){return 15}else{yy_.yytext=yy_.yytext.substr(5,yy_.yyleng-9);return 'END_RAW_BLOCK'}
break;case 5:return 15;break;case 6:this.popState();return 14;break;case 7:return 65;break;case 8:return 68;break;case 9:return 19;break;case 10:this.popState();this.begin('raw');return 23;break;case 11:return 55;break;case 12:return 60;break;case 13:return 29;break;case 14:return 47;break;case 15:this.popState();return 44;break;case 16:this.popState();return 44;break;case 17:return 34;break;case 18:return 39;break;case 19:return 51;break;case 20:return 48;break;case 21:this.unput(yy_.yytext);this.popState();this.begin('com');break;case 22:this.popState();return 14;break;case 23:return 48;break;case 24:return 73;break;case 25:return 72;break;case 26:return 72;break;case 27:return 87;break;case 28:break;case 29:this.popState();return 54;break;case 30:this.popState();return 33;break;case 31:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 80;break;case 32:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 80;break;case 33:return 85;break;case 34:return 82;break;case 35:return 82;break;case 36:return 83;break;case 37:return 84;break;case 38:return 81;break;case 39:return 75;break;case 40:return 77;break;case 41:return 72;break;case 42:yy_.yytext=yy_.yytext.replace(/\\([\\\]])/g,'$1');return 72;break;case 43:return 'INVALID';break;case 44:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={"mu":{"rules":[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],"inclusive":!1},"emu":{"rules":[2],"inclusive":!1},"com":{"rules":[6],"inclusive":!1},"raw":{"rules":[3,4,5],"inclusive":!1},"INITIAL":{"rules":[0,1,44],"inclusive":!0}};return lexer})();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser()})();exports.__esModule=!0;exports['default']=handlebars},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _visitor=__webpack_require__(25);var _visitor2=_interopRequireDefault(_visitor);function WhitespaceControl(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];this.options=options}
WhitespaceControl.prototype=new _visitor2['default']();WhitespaceControl.prototype.Program=function(program){var doStandalone=!this.options.ignoreStandalone;var isRoot=!this.isRootSeen;this.isRootSeen=!0;var body=program.body;for(var i=0,l=body.length;i<l;i++){var current=body[i],strip=this.accept(current);if(!strip){continue}
var _isPrevWhitespace=isPrevWhitespace(body,i,isRoot),_isNextWhitespace=isNextWhitespace(body,i,isRoot),openStandalone=strip.openStandalone&&_isPrevWhitespace,closeStandalone=strip.closeStandalone&&_isNextWhitespace,inlineStandalone=strip.inlineStandalone&&_isPrevWhitespace&&_isNextWhitespace;if(strip.close){omitRight(body,i,!0)}
if(strip.open){omitLeft(body,i,!0)}
if(doStandalone&&inlineStandalone){omitRight(body,i);if(omitLeft(body,i)){if(current.type==='PartialStatement'){current.indent=/([ \t]+$)/.exec(body[i-1].original)[1]}}}
if(doStandalone&&openStandalone){omitRight((current.program||current.inverse).body);omitLeft(body,i)}
if(doStandalone&&closeStandalone){omitRight(body,i);omitLeft((current.inverse||current.program).body)}}
return program};WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(block){this.accept(block.program);this.accept(block.inverse);var program=block.program||block.inverse,inverse=block.program&&block.inverse,firstInverse=inverse,lastInverse=inverse;if(inverse&&inverse.chained){firstInverse=inverse.body[0].program;while(lastInverse.chained){lastInverse=lastInverse.body[lastInverse.body.length-1].program}}
var strip={open:block.openStrip.open,close:block.closeStrip.close,openStandalone:isNextWhitespace(program.body),closeStandalone:isPrevWhitespace((firstInverse||program).body)};if(block.openStrip.close){omitRight(program.body,null,!0)}
if(inverse){var inverseStrip=block.inverseStrip;if(inverseStrip.open){omitLeft(program.body,null,!0)}
if(inverseStrip.close){omitRight(firstInverse.body,null,!0)}
if(block.closeStrip.open){omitLeft(lastInverse.body,null,!0)}
if(!this.options.ignoreStandalone&&isPrevWhitespace(program.body)&&isNextWhitespace(firstInverse.body)){omitLeft(program.body);omitRight(firstInverse.body)}}else if(block.closeStrip.open){omitLeft(program.body,null,!0)}
return strip};WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(mustache){return mustache.strip};WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(node){var strip=node.strip||{};return{inlineStandalone:!0,open:strip.open,close:strip.close}};function isPrevWhitespace(body,i,isRoot){if(i===undefined){i=body.length}
var prev=body[i-1],sibling=body[i-2];if(!prev){return isRoot}
if(prev.type==='ContentStatement'){return(sibling||!isRoot?/\r?\n\s*?$/ : /(^|\r?\n)\s*?$/).test(prev.original)}}
function isNextWhitespace(body,i,isRoot){if(i===undefined){i=-1}
var next=body[i+1],sibling=body[i+2];if(!next){return isRoot}
if(next.type==='ContentStatement'){return(sibling||!isRoot?/^\s*?\r?\n/ : /^\s*?(\r?\n|$)/).test(next.original)}}
function omitRight(body,i,multiple){var current=body[i==null?0:i+1];if(!current||current.type!=='ContentStatement'||!multiple&&current.rightStripped){return}
var original=current.value;current.value=current.value.replace(multiple?/^\s+/ : /^[ \t]*\r?\n?/,'');current.rightStripped=current.value!==original}
function omitLeft(body,i,multiple){var current=body[i==null?body.length-1:i-1];if(!current||current.type!=='ContentStatement'||!multiple&&current.leftStripped){return}
var original=current.value;current.value=current.value.replace(multiple?/\s+$/ : /[ \t]+$/,'');current.leftStripped=current.value!==original;return current.leftStripped}
exports['default']=WhitespaceControl;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);function Visitor(){this.parents=[]}
Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function acceptKey(node,name){var value=this.accept(node[name]);if(this.mutating){if(value&&!Visitor.prototype[value.type]){throw new _exception2['default']('Unexpected node type "'+value.type+'" found when accepting '+name+' on '+node.type)}
node[name]=value}},acceptRequired:function acceptRequired(node,name){this.acceptKey(node,name);if(!node[name]){throw new _exception2['default'](node.type+' requires '+name)}},acceptArray:function acceptArray(array){for(var i=0,l=array.length;i<l;i++){this.acceptKey(array,i);if(!array[i]){array.splice(i,1);i--;l--}}},accept:function accept(object){if(!object){return}
if(!this[object.type]){throw new _exception2['default']('Unknown type: '+object.type,object)}
if(this.current){this.parents.unshift(this.current)}
this.current=object;var ret=this[object.type](object);this.current=this.parents.shift();if(!this.mutating||ret){return ret}else if(ret!==!1){return object}},Program:function Program(program){this.acceptArray(program.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function PartialBlockStatement(partial){visitPartial.call(this,partial);this.acceptKey(partial,'program')},ContentStatement:function ContentStatement(){},CommentStatement:function CommentStatement(){},SubExpression:visitSubExpression,PathExpression:function PathExpression(){},StringLiteral:function StringLiteral(){},NumberLiteral:function NumberLiteral(){},BooleanLiteral:function BooleanLiteral(){},UndefinedLiteral:function UndefinedLiteral(){},NullLiteral:function NullLiteral(){},Hash:function Hash(hash){this.acceptArray(hash.pairs)},HashPair:function HashPair(pair){this.acceptRequired(pair,'value')}};function visitSubExpression(mustache){this.acceptRequired(mustache,'path');this.acceptArray(mustache.params);this.acceptKey(mustache,'hash')}
function visitBlock(block){visitSubExpression.call(this,block);this.acceptKey(block,'program');this.acceptKey(block,'inverse')}
function visitPartial(partial){this.acceptRequired(partial,'name');this.acceptArray(partial.params);this.acceptKey(partial,'hash')}
exports['default']=Visitor;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.SourceLocation=SourceLocation;exports.id=id;exports.stripFlags=stripFlags;exports.stripComment=stripComment;exports.preparePath=preparePath;exports.prepareMustache=prepareMustache;exports.prepareRawBlock=prepareRawBlock;exports.prepareBlock=prepareBlock;exports.prepareProgram=prepareProgram;exports.preparePartialBlock=preparePartialBlock;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);function validateClose(open,close){close=close.path?close.path.original:close;if(open.path.original!==close){var errorNode={loc:open.path.loc};throw new _exception2['default'](open.path.original+" doesn't match "+close,errorNode)}}
function SourceLocation(source,locInfo){this.source=source;this.start={line:locInfo.first_line,column:locInfo.first_column};this.end={line:locInfo.last_line,column:locInfo.last_column}}
function id(token){if(/^\[.*\]$/.test(token)){return token.substr(1,token.length-2)}else{return token}}
function stripFlags(open,close){return{open:open.charAt(2)==='~',close:close.charAt(close.length-3)==='~'}}
function stripComment(comment){return comment.replace(/^\{\{~?\!-?-?/,'').replace(/-?-?~?\}\}$/,'')}
function preparePath(data,parts,loc){loc=this.locInfo(loc);var original=data?'@':'',dig=[],depth=0,depthString='';for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part,isLiteral=parts[i].original!==part;original+=(parts[i].separator||'')+part;if(!isLiteral&&(part==='..'||part==='.'||part==='this')){if(dig.length>0){throw new _exception2['default']('Invalid path: '+original,{loc:loc})}else if(part==='..'){depth++;depthString+='../'}}else{dig.push(part)}}
return{type:'PathExpression',data:data,depth:depth,parts:dig,original:original,loc:loc}}
function prepareMustache(path,params,hash,open,strip,locInfo){var escapeFlag=open.charAt(3)||open.charAt(2),escaped=escapeFlag!=='{'&&escapeFlag!=='&';var decorator=/\*/.test(open);return{type:decorator?'Decorator':'MustacheStatement',path:path,params:params,hash:hash,escaped:escaped,strip:strip,loc:this.locInfo(locInfo)}}
function prepareRawBlock(openRawBlock,contents,close,locInfo){validateClose(openRawBlock,close);locInfo=this.locInfo(locInfo);var program={type:'Program',body:contents,strip:{},loc:locInfo};return{type:'BlockStatement',path:openRawBlock.path,params:openRawBlock.params,hash:openRawBlock.hash,program:program,openStrip:{},inverseStrip:{},closeStrip:{},loc:locInfo}}
function prepareBlock(openBlock,program,inverseAndProgram,close,inverted,locInfo){if(close&&close.path){validateClose(openBlock,close)}
var decorator=/\*/.test(openBlock.open);program.blockParams=openBlock.blockParams;var inverse=undefined,inverseStrip=undefined;if(inverseAndProgram){if(decorator){throw new _exception2['default']('Unexpected inverse block on decorator',inverseAndProgram)}
if(inverseAndProgram.chain){inverseAndProgram.program.body[0].closeStrip=close.strip}
inverseStrip=inverseAndProgram.strip;inverse=inverseAndProgram.program}
if(inverted){inverted=inverse;inverse=program;program=inverted}
return{type:decorator?'DecoratorBlock':'BlockStatement',path:openBlock.path,params:openBlock.params,hash:openBlock.hash,program:program,inverse:inverse,openStrip:openBlock.strip,inverseStrip:inverseStrip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}
function prepareProgram(statements,loc){if(!loc&&statements.length){var firstLoc=statements[0].loc,lastLoc=statements[statements.length-1].loc;if(firstLoc&&lastLoc){loc={source:firstLoc.source,start:{line:firstLoc.start.line,column:firstLoc.start.column},end:{line:lastLoc.end.line,column:lastLoc.end.column}}}}
return{type:'Program',body:statements,strip:{},loc:loc}}
function preparePartialBlock(open,program,close,locInfo){validateClose(open,close);return{type:'PartialBlockStatement',name:open.path,params:open.params,hash:open.hash,program:program,openStrip:open.strip,closeStrip:close&&close.strip,loc:this.locInfo(locInfo)}}},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;exports.Compiler=Compiler;exports.precompile=precompile;exports.compile=compile;var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _utils=__webpack_require__(5);var _ast=__webpack_require__(21);var _ast2=_interopRequireDefault(_ast);var slice=[].slice;function Compiler(){}
Compiler.prototype={compiler:Compiler,equals:function equals(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return!1}
for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||!argEquals(opcode.args,otherOpcode.args)){return!1}}
len=this.children.length;for(var i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return!1}}
return!0},guid:0,compile:function compile(program,options){this.sourceNode=[];this.opcodes=[];this.children=[];this.options=options;this.stringParams=options.stringParams;this.trackIds=options.trackIds;options.blockParams=options.blockParams||[];var knownHelpers=options.knownHelpers;options.knownHelpers={'helperMissing':!0,'blockHelperMissing':!0,'each':!0,'if':!0,'unless':!0,'with':!0,'log':!0,'lookup':!0};if(knownHelpers){for(var _name in knownHelpers){if(_name in knownHelpers){options.knownHelpers[_name]=knownHelpers[_name]}}}
return this.accept(program)},compileProgram:function compileProgram(program){var childCompiler=new this.compiler(),result=childCompiler.compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;this.useDepths=this.useDepths||result.useDepths;return guid},accept:function accept(node){if(!this[node.type]){throw new _exception2['default']('Unknown type: '+node.type,node)}
this.sourceNode.unshift(node);var ret=this[node.type](node);this.sourceNode.shift();return ret},Program:function Program(program){this.options.blockParams.unshift(program.blockParams);var body=program.body,bodyLength=body.length;for(var i=0;i<bodyLength;i++){this.accept(body[i])}
this.options.blockParams.shift();this.isSimple=bodyLength===1;this.blockParams=program.blockParams?program.blockParams.length:0;return this},BlockStatement:function BlockStatement(block){transformLiteralToPath(block);var program=block.program,inverse=block.inverse;program=program&&this.compileProgram(program);inverse=inverse&&this.compileProgram(inverse);var type=this.classifySexpr(block);if(type==='helper'){this.helperSexpr(block,program,inverse)}else if(type==='simple'){this.simpleSexpr(block);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);this.opcode('emptyHash');this.opcode('blockValue',block.path.original)}else{this.ambiguousSexpr(block,program,inverse);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);this.opcode('emptyHash');this.opcode('ambiguousBlockValue')}
this.opcode('append')},DecoratorBlock:function DecoratorBlock(decorator){var program=decorator.program&&this.compileProgram(decorator.program);var params=this.setupFullMustacheParams(decorator,program,undefined),path=decorator.path;this.useDecorators=!0;this.opcode('registerDecorator',params.length,path.original)},PartialStatement:function PartialStatement(partial){this.usePartial=!0;var program=partial.program;if(program){program=this.compileProgram(partial.program)}
var params=partial.params;if(params.length>1){throw new _exception2['default']('Unsupported number of partial arguments: '+params.length,partial)}else if(!params.length){if(this.options.explicitPartialContext){this.opcode('pushLiteral','undefined')}else{params.push({type:'PathExpression',parts:[],depth:0})}}
var partialName=partial.name.original,isDynamic=partial.name.type==='SubExpression';if(isDynamic){this.accept(partial.name)}
this.setupFullMustacheParams(partial,program,undefined,!0);var indent=partial.indent||'';if(this.options.preventIndent&&indent){this.opcode('appendContent',indent);indent=''}
this.opcode('invokePartial',isDynamic,partialName,indent);this.opcode('append')},PartialBlockStatement:function PartialBlockStatement(partialBlock){this.PartialStatement(partialBlock)},MustacheStatement:function MustacheStatement(mustache){this.SubExpression(mustache);if(mustache.escaped&&!this.options.noEscape){this.opcode('appendEscaped')}else{this.opcode('append')}},Decorator:function Decorator(decorator){this.DecoratorBlock(decorator)},ContentStatement:function ContentStatement(content){if(content.value){this.opcode('appendContent',content.value)}},CommentStatement:function CommentStatement(){},SubExpression:function SubExpression(sexpr){transformLiteralToPath(sexpr);var type=this.classifySexpr(sexpr);if(type==='simple'){this.simpleSexpr(sexpr)}else if(type==='helper'){this.helperSexpr(sexpr)}else{this.ambiguousSexpr(sexpr)}},ambiguousSexpr:function ambiguousSexpr(sexpr,program,inverse){var path=sexpr.path,name=path.parts[0],isBlock=program!=null||inverse!=null;this.opcode('getContext',path.depth);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);path.strict=!0;this.accept(path);this.opcode('invokeAmbiguous',name,isBlock)},simpleSexpr:function simpleSexpr(sexpr){var path=sexpr.path;path.strict=!0;this.accept(path);this.opcode('resolvePossibleLambda')},helperSexpr:function helperSexpr(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),path=sexpr.path,name=path.parts[0];if(this.options.knownHelpers[name]){this.opcode('invokeKnownHelper',params.length,name)}else if(this.options.knownHelpersOnly){throw new _exception2['default']('You specified knownHelpersOnly, but used the unknown helper '+name,sexpr)}else{path.strict=!0;path.falsy=!0;this.accept(path);this.opcode('invokeHelper',params.length,path.original,_ast2['default'].helpers.simpleId(path))}},PathExpression:function PathExpression(path){this.addDepth(path.depth);this.opcode('getContext',path.depth);var name=path.parts[0],scoped=_ast2['default'].helpers.scopedId(path),blockParamId=!path.depth&&!scoped&&this.blockParamIndex(name);if(blockParamId){this.opcode('lookupBlockParam',blockParamId,path.parts)}else if(!name){this.opcode('pushContext')}else if(path.data){this.options.data=!0;this.opcode('lookupData',path.depth,path.parts,path.strict)}else{this.opcode('lookupOnContext',path.parts,path.falsy,path.strict,scoped)}},StringLiteral:function StringLiteral(string){this.opcode('pushString',string.value)},NumberLiteral:function NumberLiteral(number){this.opcode('pushLiteral',number.value)},BooleanLiteral:function BooleanLiteral(bool){this.opcode('pushLiteral',bool.value)},UndefinedLiteral:function UndefinedLiteral(){this.opcode('pushLiteral','undefined')},NullLiteral:function NullLiteral(){this.opcode('pushLiteral','null')},Hash:function Hash(hash){var pairs=hash.pairs,i=0,l=pairs.length;this.opcode('pushHash');for(;i<l;i++){this.pushParam(pairs[i].value)}
while(i--){this.opcode('assignToHash',pairs[i].key)}
this.opcode('popHash')},opcode:function opcode(name){this.opcodes.push({opcode:name,args:slice.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function addDepth(depth){if(!depth){return}
this.useDepths=!0},classifySexpr:function classifySexpr(sexpr){var isSimple=_ast2['default'].helpers.simpleId(sexpr.path);var isBlockParam=isSimple&&!!this.blockParamIndex(sexpr.path.parts[0]);var isHelper=!isBlockParam&&_ast2['default'].helpers.helperExpression(sexpr);var isEligible=!isBlockParam&&(isHelper||isSimple);if(isEligible&&!isHelper){var _name2=sexpr.path.parts[0],options=this.options;if(options.knownHelpers[_name2]){isHelper=!0}else if(options.knownHelpersOnly){isEligible=!1}}
if(isHelper){return 'helper'}else if(isEligible){return 'ambiguous'}else{return 'simple'}},pushParams:function pushParams(params){for(var i=0,l=params.length;i<l;i++){this.pushParam(params[i])}},pushParam:function pushParam(val){var value=val.value!=null?val.value:val.original||'';if(this.stringParams){if(value.replace){value=value.replace(/^(\.?\.\/)*/g,'').replace(/\//g,'.')}
if(val.depth){this.addDepth(val.depth)}
this.opcode('getContext',val.depth||0);this.opcode('pushStringParam',value,val.type);if(val.type==='SubExpression'){this.accept(val)}}else{if(this.trackIds){var blockParamIndex=undefined;if(val.parts&&!_ast2['default'].helpers.scopedId(val)&&!val.depth){blockParamIndex=this.blockParamIndex(val.parts[0])}
if(blockParamIndex){var blockParamChild=val.parts.slice(1).join('.');this.opcode('pushId','BlockParam',blockParamIndex,blockParamChild)}else{value=val.original||value;if(value.replace){value=value.replace(/^this(?:\.|$)/,'').replace(/^\.\//,'').replace(/^\.$/,'')}
this.opcode('pushId',val.type,value)}}
this.accept(val)}},setupFullMustacheParams:function setupFullMustacheParams(sexpr,program,inverse,omitEmpty){var params=sexpr.params;this.pushParams(params);this.opcode('pushProgram',program);this.opcode('pushProgram',inverse);if(sexpr.hash){this.accept(sexpr.hash)}else{this.opcode('emptyHash',omitEmpty)}
return params},blockParamIndex:function blockParamIndex(name){for(var depth=0,len=this.options.blockParams.length;depth<len;depth++){var blockParams=this.options.blockParams[depth],param=blockParams&&_utils.indexOf(blockParams,name);if(blockParams&&param>=0){return[depth,param]}}}};function precompile(input,options,env){if(input==null||typeof input!=='string'&&input.type!=='Program'){throw new _exception2['default']('You must pass a string or Handlebars AST to Handlebars.precompile. You passed '+input)}
options=options||{};if(!('data' in options)){options.data=!0}
if(options.compat){options.useDepths=!0}
var ast=env.parse(input,options),environment=new env.Compiler().compile(ast,options);return new env.JavaScriptCompiler().compile(environment,options)}
function compile(input,options,env){if(options===undefined)options={};if(input==null||typeof input!=='string'&&input.type!=='Program'){throw new _exception2['default']('You must pass a string or Handlebars AST to Handlebars.compile. You passed '+input)}
if(!('data' in options)){options.data=!0}
if(options.compat){options.useDepths=!0}
var compiled=undefined;function compileInput(){var ast=env.parse(input,options),environment=new env.Compiler().compile(ast,options),templateSpec=new env.JavaScriptCompiler().compile(environment,options,undefined,!0);return env.template(templateSpec)}
function ret(context,execOptions){if(!compiled){compiled=compileInput()}
return compiled.call(this,context,execOptions)}
ret._setup=function(setupOptions){if(!compiled){compiled=compileInput()}
return compiled._setup(setupOptions)};ret._child=function(i,data,blockParams,depths){if(!compiled){compiled=compileInput()}
return compiled._child(i,data,blockParams,depths)};return ret}
function argEquals(a,b){if(a===b){return!0}
if(_utils.isArray(a)&&_utils.isArray(b)&&a.length===b.length){for(var i=0;i<a.length;i++){if(!argEquals(a[i],b[i])){return!1}}
return!0}}
function transformLiteralToPath(sexpr){if(!sexpr.path.parts){var literal=sexpr.path;sexpr.path={type:'PathExpression',data:!1,depth:0,parts:[literal.original+''],original:literal.original+'',loc:literal.loc}}}},function(module,exports,__webpack_require__){'use strict';var _interopRequireDefault=__webpack_require__(1)['default'];exports.__esModule=!0;var _base=__webpack_require__(4);var _exception=__webpack_require__(6);var _exception2=_interopRequireDefault(_exception);var _utils=__webpack_require__(5);var _codeGen=__webpack_require__(29);var _codeGen2=_interopRequireDefault(_codeGen);function Literal(value){this.value=value}
function JavaScriptCompiler(){}
JavaScriptCompiler.prototype={nameLookup:function nameLookup(parent,name){if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){return[parent,'.',name]}else{return[parent,'[',JSON.stringify(name),']']}},depthedLookup:function depthedLookup(name){return[this.aliasable('container.lookup'),'(depths, "',name,'")']},compilerInfo:function compilerInfo(){var revision=_base.COMPILER_REVISION,versions=_base.REVISION_CHANGES[revision];return[revision,versions]},appendToBuffer:function appendToBuffer(source,location,explicit){if(!_utils.isArray(source)){source=[source]}
source=this.source.wrap(source,location);if(this.environment.isSimple){return['return ',source,';']}else if(explicit){return['buffer += ',source,';']}else{source.appendToBuffer=!0;return source}},initializeBuffer:function initializeBuffer(){return this.quotedString('')},compile:function compile(environment,options,context,asObject){this.environment=environment;this.options=options;this.stringParams=this.options.stringParams;this.trackIds=this.options.trackIds;this.precompile=!asObject;this.name=this.environment.name;this.isChild=!!context;this.context=context||{decorators:[],programs:[],environments:[]};this.preamble();this.stackSlot=0;this.stackVars=[];this.aliases={};this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.blockParams=[];this.compileChildren(environment,options);this.useDepths=this.useDepths||environment.useDepths||environment.useDecorators||this.options.compat;this.useBlockParams=this.useBlockParams||environment.useBlockParams;var opcodes=environment.opcodes,opcode=undefined,firstLoc=undefined,i=undefined,l=undefined;for(i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];this.source.currentLocation=opcode.loc;firstLoc=firstLoc||opcode.loc;this[opcode.opcode].apply(this,opcode.args)}
this.source.currentLocation=firstLoc;this.pushSource('');if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new _exception2['default']('Compile completed with content left on stack')}
if(!this.decorators.isEmpty()){this.useDecorators=!0;this.decorators.prepend('var decorators = container.decorators;\n');this.decorators.push('return fn;');if(asObject){this.decorators=Function.apply(this,['fn','props','container','depth0','data','blockParams','depths',this.decorators.merge()])}else{this.decorators.prepend('function(fn, props, container, depth0, data, blockParams, depths) {\n');this.decorators.push('}\n');this.decorators=this.decorators.merge()}}else{this.decorators=undefined}
var fn=this.createFunctionContext(asObject);if(!this.isChild){var ret={compiler:this.compilerInfo(),main:fn};if(this.decorators){ret.main_d=this.decorators;ret.useDecorators=!0}
var _context=this.context;var programs=_context.programs;var decorators=_context.decorators;for(i=0,l=programs.length;i<l;i++){if(programs[i]){ret[i]=programs[i];if(decorators[i]){ret[i+'_d']=decorators[i];ret.useDecorators=!0}}}
if(this.environment.usePartial){ret.usePartial=!0}
if(this.options.data){ret.useData=!0}
if(this.useDepths){ret.useDepths=!0}
if(this.useBlockParams){ret.useBlockParams=!0}
if(this.options.compat){ret.compat=!0}
if(!asObject){ret.compiler=JSON.stringify(ret.compiler);this.source.currentLocation={start:{line:1,column:0}};ret=this.objectLiteral(ret);if(options.srcName){ret=ret.toStringWithSourceMap({file:options.destName});ret.map=ret.map&&ret.map.toString()}else{ret=ret.toString()}}else{ret.compilerOptions=this.options}
return ret}else{return fn}},preamble:function preamble(){this.lastContext=0;this.source=new _codeGen2['default'](this.options.srcName);this.decorators=new _codeGen2['default'](this.options.srcName)},createFunctionContext:function createFunctionContext(asObject){var varDeclarations='';var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){varDeclarations+=', '+locals.join(', ')}
var aliasCount=0;for(var alias in this.aliases){var node=this.aliases[alias];if(this.aliases.hasOwnProperty(alias)&&node.children&&node.referenceCount>1){varDeclarations+=', alias'+ ++aliasCount+'='+alias;node.children[0]='alias'+aliasCount}}
var params=['container','depth0','helpers','partials','data'];if(this.useBlockParams||this.useDepths){params.push('blockParams')}
if(this.useDepths){params.push('depths')}
var source=this.mergeSource(varDeclarations);if(asObject){params.push(source);return Function.apply(this,params)}else{return this.source.wrap(['function(',params.join(','),') {\n  ',source,'}'])}},mergeSource:function mergeSource(varDeclarations){var isSimple=this.environment.isSimple,appendOnly=!this.forceBuffer,appendFirst=undefined,sourceSeen=undefined,bufferStart=undefined,bufferEnd=undefined;this.source.each(function(line){if(line.appendToBuffer){if(bufferStart){line.prepend('  + ')}else{bufferStart=line}
bufferEnd=line}else{if(bufferStart){if(!sourceSeen){appendFirst=!0}else{bufferStart.prepend('buffer += ')}
bufferEnd.add(';');bufferStart=bufferEnd=undefined}
sourceSeen=!0;if(!isSimple){appendOnly=!1}}});if(appendOnly){if(bufferStart){bufferStart.prepend('return ');bufferEnd.add(';')}else if(!sourceSeen){this.source.push('return "";')}}else{varDeclarations+=', buffer = '+(appendFirst?'':this.initializeBuffer());if(bufferStart){bufferStart.prepend('return buffer + ');bufferEnd.add(';')}else{this.source.push('return buffer;')}}
if(varDeclarations){this.source.prepend('var '+varDeclarations.substring(2)+(appendFirst?'':';\n'))}
return this.source.merge()},blockValue:function blockValue(name){var blockHelperMissing=this.aliasable('helpers.blockHelperMissing'),params=[this.contextName(0)];this.setupHelperArgs(name,0,params);var blockName=this.popStack();params.splice(1,0,blockName);this.push(this.source.functionCall(blockHelperMissing,'call',params))},ambiguousBlockValue:function ambiguousBlockValue(){var blockHelperMissing=this.aliasable('helpers.blockHelperMissing'),params=[this.contextName(0)];this.setupHelperArgs('',0,params,!0);this.flushInline();var current=this.topStack();params.splice(1,0,current);this.pushSource(['if (!',this.lastHelper,') { ',current,' = ',this.source.functionCall(blockHelperMissing,'call',params),'}'])},appendContent:function appendContent(content){if(this.pendingContent){content=this.pendingContent+content}else{this.pendingLocation=this.source.currentLocation}
this.pendingContent=content},append:function append(){if(this.isInline()){this.replaceStack(function(current){return[' != null ? ',current,' : ""']});this.pushSource(this.appendToBuffer(this.popStack()))}else{var local=this.popStack();this.pushSource(['if (',local,' != null) { ',this.appendToBuffer(local,undefined,!0),' }']);if(this.environment.isSimple){this.pushSource(['else { ',this.appendToBuffer("''",undefined,!0),' }'])}}},appendEscaped:function appendEscaped(){this.pushSource(this.appendToBuffer([this.aliasable('container.escapeExpression'),'(',this.popStack(),')']))},getContext:function getContext(depth){this.lastContext=depth},pushContext:function pushContext(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function lookupOnContext(parts,falsy,strict,scoped){var i=0;if(!scoped&&this.options.compat&&!this.lastContext){this.push(this.depthedLookup(parts[i++]))}else{this.pushContext()}
this.resolvePath('context',parts,i,falsy,strict)},lookupBlockParam:function lookupBlockParam(blockParamId,parts){this.useBlockParams=!0;this.push(['blockParams[',blockParamId[0],'][',blockParamId[1],']']);this.resolvePath('context',parts,1)},lookupData:function lookupData(depth,parts,strict){if(!depth){this.pushStackLiteral('data')}else{this.pushStackLiteral('container.data(data, '+depth+')')}
this.resolvePath('data',parts,0,!0,strict)},resolvePath:function resolvePath(type,parts,i,falsy,strict){var _this=this;if(this.options.strict||this.options.assumeObjects){this.push(strictLookup(this.options.strict&&strict,this,parts,type));return}
var len=parts.length;for(;i<len;i++){this.replaceStack(function(current){var lookup=_this.nameLookup(current,parts[i],type);if(!falsy){return[' != null ? ',lookup,' : ',current]}else{return[' && ',lookup]}})}},resolvePossibleLambda:function resolvePossibleLambda(){this.push([this.aliasable('container.lambda'),'(',this.popStack(),', ',this.contextName(0),')'])},pushStringParam:function pushStringParam(string,type){this.pushContext();this.pushString(type);if(type!=='SubExpression'){if(typeof string==='string'){this.pushString(string)}else{this.pushStackLiteral(string)}}},emptyHash:function emptyHash(omitEmpty){if(this.trackIds){this.push('{}')}
if(this.stringParams){this.push('{}');this.push('{}')}
this.pushStackLiteral(omitEmpty?'undefined':'{}')},pushHash:function pushHash(){if(this.hash){this.hashes.push(this.hash)}
this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function popHash(){var hash=this.hash;this.hash=this.hashes.pop();if(this.trackIds){this.push(this.objectLiteral(hash.ids))}
if(this.stringParams){this.push(this.objectLiteral(hash.contexts));this.push(this.objectLiteral(hash.types))}
this.push(this.objectLiteral(hash.values))},pushString:function pushString(string){this.pushStackLiteral(this.quotedString(string))},pushLiteral:function pushLiteral(value){this.pushStackLiteral(value)},pushProgram:function pushProgram(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},registerDecorator:function registerDecorator(paramSize,name){var foundDecorator=this.nameLookup('decorators',name,'decorator'),options=this.setupHelperArgs(name,paramSize);this.decorators.push(['fn = ',this.decorators.functionCall(foundDecorator,'',['fn','props','container',options]),' || fn;'])},invokeHelper:function invokeHelper(paramSize,name,isSimple){var nonHelper=this.popStack(),helper=this.setupHelper(paramSize,name),simple=isSimple?[helper.name,' || ']:'';var lookup=['('].concat(simple,nonHelper);if(!this.options.strict){lookup.push(' || ',this.aliasable('helpers.helperMissing'))}
lookup.push(')');this.push(this.source.functionCall(lookup,'call',helper.callParams))},invokeKnownHelper:function invokeKnownHelper(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(this.source.functionCall(helper.name,'call',helper.callParams))},invokeAmbiguous:function invokeAmbiguous(name,helperCall){this.useRegister('helper');var nonHelper=this.popStack();this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup('helpers',name,'helper');var lookup=['(','(helper = ',helperName,' || ',nonHelper,')'];if(!this.options.strict){lookup[0]='(helper = ';lookup.push(' != null ? helper : ',this.aliasable('helpers.helperMissing'))}
this.push(['(',lookup,helper.paramsInit?['),(',helper.paramsInit]:[],'),','(typeof helper === ',this.aliasable('"function"'),' ? ',this.source.functionCall('helper','call',helper.callParams),' : helper))'])},invokePartial:function invokePartial(isDynamic,name,indent){var params=[],options=this.setupParams(name,1,params);if(isDynamic){name=this.popStack();delete options.name}
if(indent){options.indent=JSON.stringify(indent)}
options.helpers='helpers';options.partials='partials';options.decorators='container.decorators';if(!isDynamic){params.unshift(this.nameLookup('partials',name,'partial'))}else{params.unshift(name)}
if(this.options.compat){options.depths='depths'}
options=this.objectLiteral(options);params.push(options);this.push(this.source.functionCall('container.invokePartial','',params))},assignToHash:function assignToHash(key){var value=this.popStack(),context=undefined,type=undefined,id=undefined;if(this.trackIds){id=this.popStack()}
if(this.stringParams){type=this.popStack();context=this.popStack()}
var hash=this.hash;if(context){hash.contexts[key]=context}
if(type){hash.types[key]=type}
if(id){hash.ids[key]=id}
hash.values[key]=value},pushId:function pushId(type,name,child){if(type==='BlockParam'){this.pushStackLiteral('blockParams['+name[0]+'].path['+name[1]+']'+(child?' + '+JSON.stringify('.'+child):''))}else if(type==='PathExpression'){this.pushString(name)}else if(type==='SubExpression'){this.pushStackLiteral('true')}else{this.pushStackLiteral('null')}},compiler:JavaScriptCompiler,compileChildren:function compileChildren(environment,options){var children=environment.children,child=undefined,compiler=undefined;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler();var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push('');index=this.context.programs.length;child.index=index;child.name='program'+index;this.context.programs[index]=compiler.compile(child,options,this.context,!this.precompile);this.context.decorators[index]=compiler.decorators;this.context.environments[index]=child;this.useDepths=this.useDepths||compiler.useDepths;this.useBlockParams=this.useBlockParams||compiler.useBlockParams}else{child.index=index;child.name='program'+index;this.useDepths=this.useDepths||child.useDepths;this.useBlockParams=this.useBlockParams||child.useBlockParams}}},matchExistingProgram:function matchExistingProgram(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function programExpression(guid){var child=this.environment.children[guid],programParams=[child.index,'data',child.blockParams];if(this.useBlockParams||this.useDepths){programParams.push('blockParams')}
if(this.useDepths){programParams.push('depths')}
return 'container.program('+programParams.join(', ')+')'},useRegister:function useRegister(name){if(!this.registers[name]){this.registers[name]=!0;this.registers.list.push(name)}},push:function push(expr){if(!(expr instanceof Literal)){expr=this.source.wrap(expr)}
this.inlineStack.push(expr);return expr},pushStackLiteral:function pushStackLiteral(item){this.push(new Literal(item))},pushSource:function pushSource(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation));this.pendingContent=undefined}
if(source){this.source.push(source)}},replaceStack:function replaceStack(callback){var prefix=['('],stack=undefined,createdStack=undefined,usedLiteral=undefined;if(!this.isInline()){throw new _exception2['default']('replaceStack on non-inline')}
var top=this.popStack(!0);if(top instanceof Literal){stack=[top.value];prefix=['(',stack];usedLiteral=!0}else{createdStack=!0;var _name=this.incrStack();prefix=['((',this.push(_name),' = ',top,')'];stack=this.topStack()}
var item=callback.call(this,stack);if(!usedLiteral){this.popStack()}
if(createdStack){this.stackSlot--}
this.push(prefix.concat(item,')'))},incrStack:function incrStack(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push('stack'+this.stackSlot)}
return this.topStackName()},topStackName:function topStackName(){return 'stack'+this.stackSlot},flushInline:function flushInline(){var inlineStack=this.inlineStack;this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{var stack=this.incrStack();this.pushSource([stack,' = ',entry,';']);this.compileStack.push(stack)}}},isInline:function isInline(){return this.inlineStack.length},popStack:function popStack(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal){return item.value}else{if(!inline){if(!this.stackSlot){throw new _exception2['default']('Invalid stack pop')}
this.stackSlot--}
return item}},topStack:function topStack(){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(item instanceof Literal){return item.value}else{return item}},contextName:function contextName(context){if(this.useDepths&&context){return 'depths['+context+']'}else{return 'depth'+context}},quotedString:function quotedString(str){return this.source.quotedString(str)},objectLiteral:function objectLiteral(obj){return this.source.objectLiteral(obj)},aliasable:function aliasable(name){var ret=this.aliases[name];if(ret){ret.referenceCount++;return ret}
ret=this.aliases[name]=this.source.wrap(name);ret.aliasable=!0;ret.referenceCount=1;return ret},setupHelper:function setupHelper(paramSize,name,blockHelper){var params=[],paramsInit=this.setupHelperArgs(name,paramSize,params,blockHelper);var foundHelper=this.nameLookup('helpers',name,'helper'),callContext=this.aliasable(this.contextName(0)+' != null ? '+this.contextName(0)+' : {}');return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:[callContext].concat(params)}},setupParams:function setupParams(helper,paramSize,params){var options={},contexts=[],types=[],ids=[],objectArgs=!params,param=undefined;if(objectArgs){params=[]}
options.name=this.quotedString(helper);options.hash=this.popStack();if(this.trackIds){options.hashIds=this.popStack()}
if(this.stringParams){options.hashTypes=this.popStack();options.hashContexts=this.popStack()}
var inverse=this.popStack(),program=this.popStack();if(program||inverse){options.fn=program||'container.noop';options.inverse=inverse||'container.noop'}
var i=paramSize;while(i--){param=this.popStack();params[i]=param;if(this.trackIds){ids[i]=this.popStack()}
if(this.stringParams){types[i]=this.popStack();contexts[i]=this.popStack()}}
if(objectArgs){options.args=this.source.generateArray(params)}
if(this.trackIds){options.ids=this.source.generateArray(ids)}
if(this.stringParams){options.types=this.source.generateArray(types);options.contexts=this.source.generateArray(contexts)}
if(this.options.data){options.data='data'}
if(this.useBlockParams){options.blockParams='blockParams'}
return options},setupHelperArgs:function setupHelperArgs(helper,paramSize,params,useRegister){var options=this.setupParams(helper,paramSize,params);options=this.objectLiteral(options);if(useRegister){this.useRegister('options');params.push('options');return['options=',options]}else if(params){params.push(options);return ''}else{return options}}};(function(){var reservedWords=('break else new var'+' case finally return void'+' catch for switch while'+' continue function this with'+' default if throw'+' delete in try'+' do instanceof typeof'+' abstract enum int short'+' boolean export interface static'+' byte extends long super'+' char final native synchronized'+' class float package throws'+' const goto private transient'+' debugger implements protected volatile'+' double import public let yield await'+' null true false').split(' ');var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=!0}})();JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)};function strictLookup(requireTerminal,compiler,parts,type){var stack=compiler.popStack(),i=0,len=parts.length;if(requireTerminal){len--}
for(;i<len;i++){stack=compiler.nameLookup(stack,parts[i],type)}
if(requireTerminal){return[compiler.aliasable('container.strict'),'(',stack,', ',compiler.quotedString(parts[i]),')']}else{return stack}}
exports['default']=JavaScriptCompiler;module.exports=exports['default']},function(module,exports,__webpack_require__){'use strict';exports.__esModule=!0;var _utils=__webpack_require__(5);var SourceNode=undefined;try{if(!1){var SourceMap=require('source-map');SourceNode=SourceMap.SourceNode}}catch(err){}
if(!SourceNode){SourceNode=function(line,column,srcFile,chunks){this.src='';if(chunks){this.add(chunks)}};SourceNode.prototype={add:function add(chunks){if(_utils.isArray(chunks)){chunks=chunks.join('')}
this.src+=chunks},prepend:function prepend(chunks){if(_utils.isArray(chunks)){chunks=chunks.join('')}
this.src=chunks+this.src},toStringWithSourceMap:function toStringWithSourceMap(){return{code:this.toString()}},toString:function toString(){return this.src}}}
function castChunk(chunk,codeGen,loc){if(_utils.isArray(chunk)){var ret=[];for(var i=0,len=chunk.length;i<len;i++){ret.push(codeGen.wrap(chunk[i],loc))}
return ret}else if(typeof chunk==='boolean'||typeof chunk==='number'){return chunk+''}
return chunk}
function CodeGen(srcFile){this.srcFile=srcFile;this.source=[]}
CodeGen.prototype={isEmpty:function isEmpty(){return!this.source.length},prepend:function prepend(source,loc){this.source.unshift(this.wrap(source,loc))},push:function push(source,loc){this.source.push(this.wrap(source,loc))},merge:function merge(){var source=this.empty();this.each(function(line){source.add(['  ',line,'\n'])});return source},each:function each(iter){for(var i=0,len=this.source.length;i<len;i++){iter(this.source[i])}},empty:function empty(){var loc=this.currentLocation||{start:{}};return new SourceNode(loc.start.line,loc.start.column,this.srcFile)},wrap:function wrap(chunk){var loc=arguments.length<=1||arguments[1]===undefined?this.currentLocation||{start:{}}:arguments[1];if(chunk instanceof SourceNode){return chunk}
chunk=castChunk(chunk,this,loc);return new SourceNode(loc.start.line,loc.start.column,this.srcFile,chunk)},functionCall:function functionCall(fn,type,params){params=this.generateList(params);return this.wrap([fn,type?'.'+type+'(':'(',params,')'])},quotedString:function quotedString(str){return '"'+(str+'').replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/\u2028/g,'\\u2028').replace(/\u2029/g,'\\u2029')+'"'},objectLiteral:function objectLiteral(obj){var pairs=[];for(var key in obj){if(obj.hasOwnProperty(key)){var value=castChunk(obj[key],this);if(value!=='undefined'){pairs.push([this.quotedString(key),':',value])}}}
var ret=this.generateList(pairs);ret.prepend('{');ret.add('}');return ret},generateList:function generateList(entries){var ret=this.empty();for(var i=0,len=entries.length;i<len;i++){if(i){ret.add(',')}
ret.add(castChunk(entries[i],this))}
return ret},generateArray:function generateArray(entries){var ret=this.generateList(entries);ret.prepend('[');ret.add(']');return ret}};exports['default']=CodeGen;module.exports=exports['default']}])});"use strict";(function _Q_setup(undefined,dontSetGlobals){var root=this;var $=root.jQuery;var _isReady=!1;var _isOnline=null;var _isCordova=null;function Q(){}
Q.libraries={json:"http://cdnjs.cloudflare.com/ajax/libs/json3/3.2.4/json3.min.js",handlebars:'plugins/Q/js/handlebars-v4.0.5.js',jQuery:'https://code.jquery.com/jquery-1.11.3.min.js'};Q.plugins={};Q.text={Q:{"request":{"error":"Error {{status}} during request","canceled":'Request canceled',"500":"Internal server error","404":"Not found: {{url}}","0":"Request interrupted"},"months":['January','February','March','April','May','June','July','August','September','October','November','December']}};Q.assert=function(condition,complaint){if(!condition){throw new Q.Error(complaint)}};Q.Promise=root.Promise;Q.Error=Error;if(!Object.getPrototypeOf)
Object.getPrototypeOf=function(obj){if(obj.__proto__)return obj.__proto__;if(obj.constructor&&obj.constructor.prototype){return obj.constructor.prototype}
return null};if(!Object.keys)
Object.keys=(function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),DontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],DontEnumsLength=DontEnums.length;return function(o){if(typeof o!="object"&&typeof o!="function"||o===null)
throw new TypeError("Object.keys called on a non-object");var result=[];for(var name in o){if(hasOwnProperty.call(o,name)){result.push(name)}}
if(hasDontEnumBug){for(var i=0;i<DontEnumsLength;i++){if(hasOwnProperty.call(o,DontEnums[i]))
result.push(DontEnums[i])}}
return result}})();var Sp=String.prototype;Sp.toCapitalized=function _String_prototype_toCapitalized(){return this.replace(/^([a-z])|\s+([a-z])/g,function(found){return found.toUpperCase()})};Sp.isUrl=function _String_prototype_isUrl(){return!!this.match(/^([A-Za-z]*:|)\/\//)};Sp.isIPAddress=function _String_prototype_isIPAddress(){return!!this.match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)};Sp.encodeHTML=function _String_prototype_encodeHTML(){return this.replaceAll({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&apos;',"\n":'<br>'})};Sp.decodeHTML=function _String_prototype_decodeHTML(){return this.replaceAll({'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"','&apos;':"'","<br>":"\n","<br />":"\n"})};Sp.interpolate=function _String_prototype_interpolate(fields){return this.replace(/\{\{([^{}]*)\}\}/g,function(a,b){var r=fields[b];return(typeof r==='string'||typeof r==='number')?r:a})};Sp.replaceAll=function _String_prototype_replaceAll(pairs){var result=this;for(var k in pairs){result=result.replace(new RegExp(k,'g'),pairs[k])}
return result};Sp.queryField=function Q_queryField(name,value){var what=this;var prefixes=['#!','#','?','!'];var count=prefixes.length;var prefix='';var i,k,l,p,keys,parsed,ret,result;for(i=0;i<count;++i){l=prefixes[i].length;p=this.substring(0,l);if(p==prefixes[i]){prefix=p;what=this.substring(l);break}}
if(!name){ret=[];parsed=Q.parseQueryString(what,keys);for(k in parsed){if(parsed[k]==null||parsed[k]===''){ret.push(k)}}
return ret}if(Q.isArrayLike(name)){ret={},keys=[];parsed=Q.parseQueryString(what,keys);for(i=0,l=name.length;i<l;++i){if(name[i]in parsed){ret[name[i]]=parsed[name[i]]}}
return ret}else if(Q.isPlainObject(name)){result=what;Q.each(name,function(key,value){result=result.queryField(key,value)})}else if(value===undefined){return Q.parseQueryString(what)[name]}else if(value===null){keys=[];parsed=Q.parseQueryString(what,keys);var reg=new RegExp(name);for(k in parsed){if(reg.test(k)){delete parsed[k]}}
return prefix+Q.queryString(parsed,keys)}else{keys=[];parsed=Q.parseQueryString(what,keys);if(!(name in parsed)){keys.push(name)}
parsed[name]=value;return prefix+Q.queryString(parsed,keys)}};Sp.hashCode=function(){var hash=0;if(!this.length)return hash;for(var i=0;i<this.length;i++){var c=this.charCodeAt(i);hash=hash%16777216;hash=((hash<<5)-hash)+c;hash=hash&0xffffffff}
return hash};Sp.trim=String.prototype.trim||function _String_prototype_trim(){return this.replace(/^\s+|\s+$/g,"")};Sp.parseUrl=function _String_prototype_parseUrl(component){var key=['source','scheme','authority','userInfo','user','pass','host','port','relative','path','directory','file','query','fragment'],parser=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/;var m=parser.exec(this),uri={},i=14;while(i--){if(m[i])uri[key[i]]=m[i]}
if(component){return uri[component.replace('PHP_URL_','').toLowerCase()]}
delete uri.source;return uri};Sp.sameDomain=function _String_prototype_sameDomain(url2,options){var parsed1=this.parseUrl(),parsed2=url2.parseUrl();var same=(parsed1.host===parsed2.host)&&(parsed1.user===parsed2.user)&&(parsed1.pass===parsed2.pass)&&(parsed1.port===parsed2.port);return options&&options.compareScheme?same&&(parsed1.scheme===parsed2.scheme):same};Sp.startsWith=function _String_prototype_startsWith(prefix){if(this.length<prefix.length){return!1}
return this.substr(0,prefix.length)===prefix};Sp.splitId=function(lengths,delimiter){lengths=lengths||3;delimiter=delimiter||'/';var segments=[],pos=0,len=this.length;while(pos<len){segments.push(this.slice(pos,pos+=lengths))}
return segments.join(delimiter)};var Fp=Function.prototype;if(!Fp.bind)
Fp.bind=function _Function_prototype_bind(obj){var method=this;obj=obj||root;if(!obj)obj=root;if(arguments.length<=1){return function _Q_bind_result(){return method.apply(obj,arguments)}}
var args=Array.prototype.slice.call(arguments,1);return function _Q_bind_result_withOptions(){return method.apply(obj,args.concat(Array.prototype.slice.call(arguments)))}};var Ap=Array.prototype;if(!Ap.indexOf)
Ap.indexOf=function _Array_prototype_indexOf(searchElement){if(this===0||this===null){throw new TypeError()}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1}
var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!==n){n=0}else if(n!==0&&n!==Infinity&&n!==-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n))}}
if(n>=len){return-1}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}
return-1};if(!Ap.forEach)
Ap.forEach=function(callback){for(var i=0;i<this.length;i++){callback.apply(this,[this[i],i,this])}};if(!Date.now)
Date.now=function _Date_now(){return new Date().getTime()};Date.fromDateTime=function _Date_fromDateTime(dateTimeString){return new Date(dateTimeString.replace(/-/g,"/"))};Date.prototype.toDateTime=function _Date_toDateTime(dateOnly){return this.getFullYear()+"-"+('0'+(this.getMonth()+1)).slice(-2)+"-"+('0'+this.getDate()).slice(-2)+(dateOnly?'':' '+('0'+this.getHours()).slice(-2)+":"+('0'+this.getMinutes()).slice(-2)+":"+('0'+this.getSeconds()).slice(-2))};function _returnFalse(){return!1}
if(root.Element){if(!document.getElementsByClassName){document.getElementsByClassName=function(className){return Array.prototype.slice.call(this.querySelectorAll("."+className))}}
var Elp=Element.prototype;if(!Elp.Q)
Elp.Q=function(toolName){return null};if(!Elp.contains)
Elp.contains=function(child){if(!child)return!1;var node=child;while(node){if(node==this){return!0}
node=node.parentNode}
return!1};Elp.computedStyle=function(name){var computedStyle=root.getComputedStyle?getComputedStyle(this,null):this.currentStyle;var result={};for(var k in computedStyle){var k2=root.getComputedStyle?k:k.replace(/-(\w)/gi,function(word,letter){return letter.toUpperCase()});result[k2]=computedStyle[k]}
return name?result[name.replace(/-(\w)/gi,function(word,letter){return letter.toUpperCase()})]:result};Elp.copyComputedStyle=function(src){var s=src.computedStyle();for(var i in s){if(typeof i=="string"&&i!="cssText"&&!(/\d/).test(i)){try{this.style[i]=s[i];if(i=="font"){this.style.fontSize=s.fontSize}
if(i=="backgroundRepeatX"||i=="backgroundRepeatY"){this.style.backgroundRepeat=s.backgroundRepeat}}catch(e){}}}
return this};Elp.cssDimensions=function(){var cn=this.cloneNode();cn.style.display='none';this.parentNode.appendChild(cn);var cs=Q.copy(cn.computedStyle());this.parentNode.removeChild(cn);return{width:cs.width,height:cs.height}};Elp.scrollingParent=function(skipIfNotOverflowed){var p=this;while(p=p.parentNode){if(typeof p.computedStyle!=='function'){continue}
var pcs=p.computedStyle();var overflow=pcs.overflow||p.style.overflow||pcs.overflowY||p.style.overflowY||pcs.overflowX||p.style.overflowX;if(overflow&&['hidden','visible'].indexOf(overflow)<0){if(!skipIfNotOverflowed||p.clientHeight<p.scrollHeight){return p}}}
return document.documentElement};Elp.adjustScrolling=function(){var scrolling=this.style['-webkit-overflow-scrolling'];var element=this;element.style['-webkit-overflow-scrolling']=(scrolling==='auto'?'touch':'auto');setTimeout(function(){element.style['-webkit-overflow-scrolling']=scrolling},0);return this};Elp.swap=function(element){var parent1,next1,parent2,next2;parent1=this.parentNode;next1=this.nextSibling;parent2=element.parentNode;next2=element.nextSibling;parent1.insertBefore(element,next1);parent2.insertBefore(this,next2)};Elp.preventSelections=function(deep,callouts){Q.addEventListener(this,'selectstart',_returnFalse);this.preventSelectionsInfo=this.preventSelectionsInfo||{style:this.style['-moz-user-select']||this.style['-webkit-user-select']||this.style['-ms-user-select']||this.style['user-select'],callout:this.style['-webkit-user-callout'],unselectable:this.unselectable};this.unselectable='on';this.style[Q.info.browser.prefix+'user-select']=this.style['user-select']='none';if(callouts){this.style[Q.info.browser.prefix+'user-callout']=this.style['user-select']='none'}
if(!deep)return;Q.each(this.children||this.childNodes,function(){if(this.preventSelections&&['INPUT','TEXTAREA'].indexOf(this.tagName.toUpperCase())<0&&this.hasClass&&!this.hasClass('Q_selectable')){this.preventSelections(deep)}})};Elp.restoreSelections=function(deep){var p=this.preventSelectionsInfo;if(p){this.style['-moz-user-select']=this.style['-webkit-user-select']=this.style['-ms-user-select']=this.style['user-select']=p.style||'text';this.style['-webkit-user-callout']=p.callout;this.unselectable=p.unselectable;delete this.preventSelectionsInfo}
Q.removeEventListener(this,'selectstart',_returnFalse);if(!deep)return;Q.each(this.children||this.childNodes,function(){if(this.restoreSelections&&['INPUT','TEXTAREA'].indexOf(this.tagName.toUpperCase())>=0){this.restoreSelections(deep)}})};Elp.isBefore=function(element,context){var before=!0,that=this;context=context||document.documentElement;Q.find(context,null,function(elem){if(elem===element){before=!1;return!1}
if(elem===that){return!1}});return before};Elp.hasClass=function(className){if(this.classList){return this.classList.contains(className)}else{return new RegExp('(^| )'+className+'( |$)','gi').test(this.className)}};Elp.removeClass=function(className){if(this.classList){this.classList.remove(className)}else{this.className=this.className.replace(new RegExp('(^| )'+className.split(' ').join('|')+'( |$)','gi'),' ')}
return this};Elp.addClass=function(className){var classNames=className.split(' ');var l=classNames.length;for(var i=0;i<l;++i){var c=classNames[i];if(!c)continue;if(this.classList){this.classList.add(c)}else{this.removeClass(c);this.className+=' '+c}}
return this};Elp.setClass=function(className,condition){if(condition){this.addClass(className)}else{this.removeClass(className)}
return this};Elp.innerText=function(){return this.textContent||this.innerText};Elp.isOverflowed=function(){return(this.offsetWidth<this.scrollWidth)||(this.offsetHeight<this.scrollHeight)};Elp.isVisible=function(){return this.offsetWidth>0||this.offsetHeight>0};Elp.remainingWidth=function(subpixelAccuracy){var element=this;var pn=this.parentNode;if(!pn){return null}
var rect1=this.getBoundingClientRect();var rect2=pn.getBoundingClientRect();var w=(rect2.right-rect2.left);var cs=pn.computedStyle();w-=_parseFloat(cs.paddingLeft)+_parseFloat(cs.paddingRight)+_parseFloat(cs.borderLeftWidth)+_parseFloat(cs.borderRightWidth);Q.each(pn.children,function(){if(this===element||!this.isVisible())return;var style=this.computedStyle();var rect3=this.getBoundingClientRect();if(rect1.top>rect3.bottom||rect1.bottom<rect3.top){return}
w-=(rect3.right-rect3.left+_parseFloat(style.marginLeft)+_parseFloat(style.marginRight))});return subpixelAccuracy?w:Math.floor(w-0.01)};if(!Elp.getElementsByClassName){Elp.getElementsByClassName=document.getElementsByClassName}}
function _parseFloat(value){return value.substr(value.length-2)=='px'?parseFloat(value):0}(function(){if(navigator.appVersion.indexOf('MSIE 8')>0){var _slice=Array.prototype.slice;Array.prototype.slice=function(){if(this instanceof Array){return _slice.apply(this,arguments)}else{var result=[];var start=(arguments.length>=1)?arguments[0]:0;var end=(arguments.length>=2)?arguments[1]:this.length;for(var i=start;i<end;i++){result.push(this[i])}
return result}}}})();if(!root.requestAnimationFrame){root.requestAnimationFrame=root.webkitRequestAnimationFrame||root.mozRequestAnimationFrame||root.oRequestAnimationFrame||root.msRequestAnimationFrame||function(callback){return setTimeout(function _shim_requestAnimationFrame(){callback(Q.milliseconds())},1000/Q.Animation.fps)};root.cancelAnimationFrame=root.webkitCancelAnimationFrame||root.mozCancelAnimationFrame||root.oCancelAnimationFrame||root.msCancelAnimationFrame||function(id){clearTimeout(id)}}
Q.milliseconds=function _Q_microtime(sinceEpoch){var now=Date.now();if(sinceEpoch){return now}
Q.milliseconds.started=Q.milliseconds.started||now;return now-Q.milliseconds.started};Q.milliseconds();Q.milliseconds=function(sinceEpoch){var result=Date.now();if(sinceEpoch)return result;return result-Q.milliseconds.start};Q.milliseconds.start=Date.now();Q.objectWithPrototype=function _Q_objectWithPrototype(original){if(!original){return{}}
function Copied(){}
Copied.prototype=original;return new Copied()};Q.typeOf=function _Q_typeOf(value){var s=typeof value,x,l;if(s==='function'&&!(value instanceof Function)){s='object'}
if(s==='object'){if(value===null){return 'null'}
if(value instanceof root.Element){return 'Element'}else if(value instanceof Array||(value.constructor&&value.constructor.name==='Array')||Object.prototype.toString.apply(value)==='[object Array]'){s='array'}else if(typeof value.typename!='undefined'){return value.typename}else if(typeof(l=value.length)=='number'&&(l%1==0)&&(!l||((l-1)in value))){return 'array'}else if(typeof value.constructor!='undefined'&&typeof value.constructor.name!='undefined'){if(value.constructor.name=='Object'){return 'object'}
return value.constructor.name}else if((x=Object.prototype.toString.apply(value)).substr(0,8)==="[object "){return x.substring(8,x.length-1).toLowerCase()}else{return 'object'}}
return s};Q.each=function _Q_each(container,callback,options){function _byKeys(a,b){return a>b?1:(a<b?-1:0)}
function _byFields(a,b){return container[a][s]>container[b][s]?1:(container[a][s]<container[b][s]?-1:0)}
function _byKeysNumeric(a,b){return Number(a)-Number(b)}
function _byFieldsNumeric(a,b){return Number(container[a][s])-Number(container[b][s])}
var i,k,c,length,r,t,args;if(typeof callback==='string'&&Q.isArrayLike(arguments[2])){args=arguments[2];options=arguments[3]}
switch(t=Q.typeOf(container)){case 'array':default:c=Array.prototype.slice.call(container,0);if(('0' in container)&&!('0' in c)){c=[];for(i=0;r=container[i];++i){c.push(r)}}
length=c.length;if(!c||!length||!callback)return;if(options&&options.ascending===!1){for(i=length-1;i>=0;--i){r=Q.handle(callback,c[i],args||[i,c[i],c]);if(r===!1)return!1}}else{for(i=0;i<length;++i){r=Q.handle(callback,c[i],args||[i,c[i]],c);if(r===!1)return!1}}
break;case 'object':if(!container||!callback)return;if(options&&('ascending' in options||'sort' in options)){var keys=[],key;for(k in container){if(options.hasOwnProperty&&!Q.has(container,k)){continue}
if(container.hasOwnProperty&&container.hasOwnProperty(k)){keys.push(options.numeric?Number(k):k)}}
var s=options.sort;var t=typeof(s);var compare=(t==='function')?s:(t==='string'?(options.numeric?_byFieldsNumeric:_byFields):(options.numeric?_byKeysNumeric:_byKeys));keys.sort(compare);if(options.ascending===!1){for(i=keys.length-1;i>=0;--i){key=keys[i];r=Q.handle(callback,container[key],args||[key,container[key],container]);if(r===!1)return!1}}else{for(i=0;i<keys.length;++i){key=keys[i];r=Q.handle(callback,container[key],args||[key,container[key],container]);if(r===!1)return!1}}}else{for(k in container){if(container.hasOwnProperty&&container.hasOwnProperty(k)){r=Q.handle(callback,container[k],args||[k,container[k],container]);if(r===!1)return!1}}}
break;case 'string':var c;if(!container||!callback)return;if(options&&options.ascending===!1){for(i=0;i<container.length;++i){c=container.charAt(i);r=Q.handle(callback,c,args||[i,c,container]);if(r===!1)return!1}}else{for(i=container.length-1;i>=0;--i){c=container.charAt(i);r=Q.handle(callback,c,args||[i,c,container]);if(r===!1)return!1}}
break;case 'number':var from=0,to=container,step;if(typeof arguments[1]==='number'){from=arguments[0];to=arguments[1];if(typeof arguments[2]==='number'){step=arguments[2];callback=arguments[3];options=arguments[4]}else{callback=arguments[2];options=arguments[3]}}
if(!callback)return;if(step===undefined){step=(from<=to?1:-1)}
if(!step||(to-from)*step<0){return 0}
if(from<=to){for(i=from;i<=to;i+=step){r=Q.handle(callback,this,args||[i],container);if(r===!1)return!1;if(step<0)return 0}}else{for(i=from;i>=to;i+=step){r=Q.handle(callback,this,args||[i],container);if(r===!1)return!1;if(step>0)return 0}}
break;case 'function':case 'boolean':if(container===!1)break;throw new Q.Error("Q.each: does not support iterating a "+t);case 'null':case 'undefined':break}};Q.first=function _Q_first(container,options){var fk=Q.firstKey(container,options);return fk!=null?container[fk]:undefined};Q.firstKey=function _Q_firstKey(container,options){if(!container){return null}
switch(typeof container){case 'array':for(var i=0;i<container.length;++i){if(container[i]!==undefined){return i}}
break;case 'object':for(var k in container){if(container.hasOwnProperty(k)&&container[k]!==undefined){if(k||!options||!options.nonEmptyKey){return k}}}
break;case 'string':return 0;default:throw new Q.Error("Q.first: container has to be an array, object or string")}
return null};Q.diff=function _Q_diff(container1,container2){if(!container1||!container2){return container1}
var args=arguments;var len=arguments.length;var comparator=arguments[len-1];if(typeof comparator!=='function'){comparator=function _Q_diff_default_comparator(v1,v2){return v1===v2}
++len}
var isArr=Q.isArrayLike(container1);var result=isArr?[]:{};Q.each(container1,function(k,v1){var found=!1;for(var i=1;i<len-1;++i){Q.each(args[i],function(j,v2){if(comparator(v1,v2,i,j)){found=!0;return!1}});if(found){break}}
if(!found){if(isArr){result.push(v1)}else{result[k]=v1}}});return result};Q.isEmpty=function _Q_isEmpty(o){if(!o){return!0}
var i,v,t;t=Q.typeOf(o);if(t==='array'){return(o.length===0)}
if(t==='object'){for(i in o){v=o[i];if(v!==undefined){return!1}}
return!0}
return!1};Q.isInteger=function _Q_isInteger(value,strictComparison){if(strictComparison){return value>0?Math.floor(value)===value:Math.ceil(value)===value}
return value>0?Math.floor(value)==value:Math.ceil(value)==value};Q.isArrayLike=function _Q_isArrayLike(value){return(Q.typeOf(value)==='array')};Q.isPlainObject=function(x){if(x===null||typeof x!=='object'){return!1}
if(Object.prototype.toString.apply(x)!=="[object Object]"){return!1}
if(root.attachEvent&&!root.addEventListener){if(x&&x.constructor!==Object){return!1}}
return!0};Q.instanceOf=function(testing,Constructor){if(!testing||typeof testing!=='object'){return!1}
if(testing instanceof Constructor){return!0}
if(Constructor.__mixins){for(var mixin in Constructor.__mixins){if(testing instanceof mixin){return!0}}}
return!1};Q.copy=function _Q_copy(x,fields,levels){if(root.ArrayBuffer&&(x instanceof ArrayBuffer)){var result=ArrayBuffer.prototype.slice.call(x,0)}
if(Q.isArrayLike(x)){var result=Array.prototype.slice.call(x,0);var keys=Object.keys(x);for(var i=0,l=keys.length;i<l;++i){result[keys[i]]=x[keys[i]]}
return result}
if(x&&typeof x.copy==='function'){return x.copy()}
if(x===null||!Q.isPlainObject(x)){return x}
var result=Q.objectWithPrototype(Object.getPrototypeOf(x)),i,k,l;if(fields){for(i=0,l=fields.length;i<l;++i){k=fields[i];if(!(k in x)){continue}
result[k]=levels?Q.copy(x[k],null,levels-1):x[k]}}else{for(k in x){if(!Q.has(x,k)){continue}
result[k]=levels?Q.copy(x[k],null,levels-1):x[k]}}
return result};Q.extend=function _Q_extend(target){var length=arguments.length;var namespace=undefined;if(typeof arguments[length-1]==='string'){namespace=arguments[length-1];--length}
if(length===0){return{}}
var deep=!1,levels=0;var type=Q.typeOf(target);var targetIsEvent=(type==='Q.Event');var i,arg,k,argk,m,ttk,tak;for(i=1;i<length;++i){arg=arguments[i];if(!arg){continue}
if(arg===!0){deep=!0;continue}
if(typeof arg==='number'&&arg){levels=arg;continue}
if(target===undefined){if(Q.isArrayLike(arg)){target=[];type='array'}else{target={};type='object'}}
if(targetIsEvent){if(arg&&arg.constructor===Object){for(m in arg){target.set(arg[m],m)}}else{target.set(arg,namespace)}
continue}
if(type==='array'&&Q.isArrayLike(arg)){target=Array.prototype.concat.call(target,arg)}else{for(k in arg){if(deep!==!0&&(!arg.hasOwnProperty||!arg.hasOwnProperty(k))&&(arg.hasOwnProperty&&(k in arg))){continue}
argk=arg[k];ttk=(k in target)&&Q.typeOf(target[k]);tak=Q.typeOf(argk);if(ttk==='Q.Event'){if(argk&&argk.constructor===Object){for(m in argk){target[k].set(argk[m],m)}}else if(tak==='Q.Event'){for(m in argk.handlers){target[k].set(argk.handlers[m],m)}}else{target[k].set(argk,namespace)}}else if(levels&&target[k]&&(typeof target[k]==='object'||typeof target[k]==='function')&&tak!=='Q.Event'&&(Q.isPlainObject(argk)||(ttk==='array'&&tak==='array'))){target[k]=(ttk==='array'&&('replace' in argk))?Q.copy(argk.replace):Q.extend(target[k],deep,levels-1,argk)}else{target[k]=Q.extend.dontCopy[Q.typeOf(argk)]?argk:Q.copy(argk,null,levels)}
if(target[k]===undefined){delete target[k]}}}
deep=!1;levels=0}
return target};Q.extend.dontCopy={"Q.Tool":!0,"Q.Cache":!0};Q.has=function _Q_has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};Q.take=function _Q_take(source,fields){var result={};if(!source)return result;if(Q.isArrayLike(fields)){for(var i=0;i<fields.length;++i){if(fields[i]in source){result[fields[i]]=source[fields[i]]}}}else{for(var k in fields){result[k]=(k in source)?source[k]:fields[k]}}
return result};Q.shuffle=function _Q_shuffle(arr){var i=arr.length;if(!i)return!1;while(--i){var j=Math.floor(Math.random()*(i+1));var tempi=arr[i];var tempj=arr[j];arr[i]=tempj;arr[j]=tempi}};Q.mixin=function _Q_mixin(A){var __mixins=(A.__mixins||(A.__mixins=[]));var mixin,i,k,l;for(i=1,l=arguments.length;i<l;++i){mixin=arguments[i];if(typeof mixin!=='function'){throw new Q.Error("Q.mixin: argument "+i+" is not a function")}
var p=mixin.prototype,Ap=A.prototype;for(k in p){if(!(k in Ap)){Ap[k]=p[k]}}
for(k in mixin){if(!(k in A)){A[k]=mixin[k]}}
__mixins.push(arguments[i])}
A.staticProperty=function _staticProperty(propName){for(var i=0;i<A.__mixins.length;++i){if(propName in A.__mixins[i]){return A.__mixins[i].propName}}
return undefined};A.constructors=function _constructors(){var mixins=A.__mixins;var i;for(i=mixins.length-1;i>=0;--i){mixins[i].apply(this,arguments)}};A.prototype.constructors=function _prototype_constructors(){A.constructors.apply(this,arguments)}};Q.normalize=function _Q_normalize(text,replacement,characters,numChars){if(!numChars)numChars=200;if(replacement===undefined)replacement='_';characters=characters||/[^A-Za-z0-9]+/g;if(text===undefined){debugger}
var result=text.toLowerCase().replace(characters,replacement);if(text.length>numChars){result=text.substr(0,numChars-11)+'_'+Math.abs(text.substr(numChars-11).hashCode())}
return result};function _getProp(parts,create,context){var p,i=0;if(context===null)return undefined;context=context||root;if(!parts.length)return context;while(context&&(p=parts[i++])!==undefined){try{if(p==='*'){p=Q.firstKey(context)}
context=(p in context)?context[p]:(create?context[p]={}:undefined)}catch(e){if(create){throw new Q.Error("Q.setObject cannot set property of "+typeof(context)+" "+JSON.stringify(context))}}}
return context}
Q.setObject=function _Q_setObject(name,value,context,delimiter){if(Q.isPlainObject(name)){context=value;var result={};for(var k in name){result[k]=Q.setObject(k,name[k],context)}
return result}
if(typeof name==='string'){name=name.split(delimiter||'.')}
var p=name.pop();var obj=_getProp(name,!0,context);return obj&&(p!==undefined)?(obj[p]=value):undefined};Q.getObject=function _Q_getObject(name,context,delimiter,create){delimiter=delimiter||'.';if(typeof name==='string'){name=name.split(delimiter)}else if(!(name instanceof Array)){return name}
var result=_getProp(name,!1,context);if(create!==undefined){result=Q.setObject(name,create,context,delimiter)}
return result};Q.ensure=function _Q_ensure(property,loader,callback){if(property!==undefined){Q.handle(callback);return}
if(typeof loader==='string'){Q.addScript(loader,callback);return}else if(typeof loader==='function'){loader(callback)}else if(loader instanceof Q.Event){loader.add(callback)}};Q.latest=function(key,ordinal){key=Q.calculateKey(key);if(ordinal===undefined){return Q.latest.issued[key]=((Q.latest.issued[key]||0)%Q.latest.max)+1}
var seen=Q.latest.seen[key]||0;if(ordinal===!0){return seen}
if(ordinal>seen||ordinal<seen-Q.latest.max*9/10){Q.latest.seen[key]=ordinal;return!0}
return!1};Q.latest.issued={};Q.latest.seen={};Q.latest.max=10000;Q.calculateKey=function _Q_Event_calculateKey(key,container,start){if(key===!0){return "PAGE: CURRENT"}
if(key===undefined){key=Q.Tool.beingActivated}
if(Q.typeOf(key)==='Q.Tool'){key="TOOL: "+key.id+" ("+key.name+")"}else if(container&&key==undefined){var i=(start===undefined)?1:start;key='AUTOKEY_'+i;while(container[key]){key='AUTOKEY_'+(++i)}}else if(key!==undefined&&typeof key!=='string'){throw new Q.Error("Q.calculateKey: key must be a String, Q.Tool, true, or undefined")}
return key};Q.calculateKey.keys=[];Q.Event=function _Q_Event(callable,key,prepend){if(this===Q){throw new Q.Error("Q.Event: Missing new keyword")}
var event=this;this.handlers={};this.keys=[];this.typename="Q.Event";if(callable){this.set(callable,key,prepend)}
this.handle=function _Q_Event_instance_handle(){var i,count=0,oldOccurring=event.occurring,result;if(event.stopped)return 0;event.occurring=!0;event.lastContext=this;event.lastArgs=arguments;var keys=Q.copy(event.keys);for(i=0;i<keys.length;++i){result=Q.handle(event.handlers[keys[i]],this,arguments);if(result===!1)return!1;count+=result}
event.occurring=oldOccurring;event.occurred=!0;return count}};Q.Event.forTool={};Q.Event.forPage=[];Q.Event.jQueryForTool={};Q.Event.jQueryForPage=[];Q.Event.from=function _Q_Event_from(source,eventName){var event=new Q.Event();Q.addEventListener(source,eventName,event.handle);return event};var Evp=Q.Event.prototype;Evp.occurred=!1;Evp.occurring=!1;Evp.set=function _Q_Event_prototype_set(handler,key,prepend){if(!handler)return null;var isTool=(Q.typeOf(key)==='Q.Tool');if(key===!0||(key===undefined&&Q.Page.beingActivated)){Q.Event.forPage.push(this)}
key=Q.calculateKey(key,this.handlers,this.keys.length);this.handlers[key]=handler;if(this.keys.indexOf(key)<0){if(prepend){this.keys.unshift(key)}else{this.keys.push(key)}
if(isTool){Q.Event.forTool[key]=Q.Event.forTool[key]||[];Q.Event.forTool[key].push(this)}}
if(this.keys.length===1&&this._onFirst){this._onFirst.handle.call(this,handler,key,prepend)}
if(this._onSet){this._onSet.handle.call(this,handler,key,prepend)}
return key};Evp.add=function _Q_Event_prototype_add(handler,key,prepend){if(!handler)return null;var event=this;var ret=this.set(handler,key,prepend);if(this.occurred||this.occurring){Q.handle(handler,this.lastContext,this.lastArgs)}
return ret};Evp.addOnce=function _Q_Event_prototype_addOnce(handler,key,prepend){if(!handler)return null;var event=this;return key=event.add(function _addOnce(){handler.apply(this,arguments);setTimeout(function(){event.remove(key)},0)},key,prepend)};Evp.remove=function _Q_Event_prototype_remove(key){var key2=Q.calculateKey(key);if(key===!0){l=Q.Event.forPage.length;for(i=0;i<l;++i){if(Q.Event.forPage[i]===this){Q.Event.forPage.splice(i,1);break}}}else if(Q.Event.forTool[key2]){l=Q.Event.forTool[key2].length;for(i=0;i<l;++i){if(Q.Event.forTool[key2][i]===this){Q.Event.forTool[key2].splice(i,1);break}}}
var l,i=this.keys.indexOf(key2);if(i<0){return 0}
this.keys.splice(i,1);if(this._onRemove){this._onRemove.handle.call(this,key2)}
if(!this.keys.length&&this._onEmpty){this._onEmpty.handle.call(this,key2)}
delete this.handlers[key2];return 1};Evp.removeAllHandlers=function _Q_Event_prototype_removeAllHandlers(){this.handlers={};this.keys=[];if(this._onEmpty){this._onEmpty.handle.call(this)}};Evp.stop=function _Q_Event_prototype_stop(removeAllHandlers){this.stopped=!0;if(this._onStop){this._onStop.handle.call(this)}
if(removeAllHandlers){this.removeAllHandlers.call(this)}};Evp.copy=function _Q_Event_prototype_copy(){var result=new Q.Event();for(var i=0;i<this.keys.length;++i){result.handlers[this.keys[i]]=this.handlers[this.keys[i]];result.keys.push(this.keys[i])}
return result};Evp.or=function _Q_Event_prototype_or(anotherEvent,key,anotherKey){var newEvent=new Q.Event();this.add(newEvent.handle,key);if(anotherEvent){anotherEvent.add(newEvent.handle,anotherKey)}
return newEvent};Evp.and=function _Q_Event_prototype_and(anotherEvent,key,anotherKey){var newEvent=new Q.Event();if(!anotherEvent){return Q.copy(this)}
var event=this;newEvent.occurred=event.occurred&&anotherEvent.occurred;newEvent.occurring=event.occurring||anotherEvent.occurring;function _Q_Event_and_wrapper(){if((event.occurred||event.occurring)&&(anotherEvent.occurred||anotherEvent.occurring)){return newEvent.handle.apply(this,arguments)}}
event.add(_Q_Event_and_wrapper,key);anotherKey=anotherEvent.add(_Q_Event_and_wrapper,anotherKey);return newEvent};Evp.until=function _Q_Event_prototype_until(anotherEvent,key,anotherKey){var newEvent=new Q.Event();var event=this;key=event.add(newEvent.handle,key);anotherKey=anotherEvent.add(function _Q_Event_until_wrapper(){event.remove(key);anotherEvent.remove(anotherKey);event.stop()},anotherKey);return newEvent};Evp.then=function _Q_Event_prototype_then(key){var newEvent=new Q.Event();var handle=newEvent.handle;var _waiting=!0;var _pending=[];newEvent.handle=function _Q_Event_then_wrapper(){if(_waiting){_pending.push([this,arguments]);return 0}
return handle.apply(this,arguments)};var key2=this.onStop().add(function(){for(var i=0;i<_pending.length;++i){handle.apply(_pending[i][0],_pending[i][1])}
_waiting=!1;this.onStop().remove(key2)},key);return newEvent};Evp.debounce=function _Q_Event_prototype_debounce(milliseconds,immediate,key){var newEvent=new Q.Event();this.add(Q.debounce(newEvent.handle,milliseconds,immediate,0),key);return newEvent};Evp.throttle=function _Q_Event_prototype_throttle(milliseconds,delayedFinal,key){var newEvent=new Q.Event();this.add(Q.throttle(newEvent.handle,milliseconds,delayedFinal,0),key);return newEvent};Evp.queue=function _Q_Event_prototype_queue(milliseconds,key){var newEvent=new Q.Event();this.add(Q.queue(newEvent.handle,milliseconds),key);return newEvent};Evp.filter=function _Q_Event_prototype_filter(test,key){var newEvent=new Q.Event();this.add(function(){if(!test.apply(this,arguments))return 0;return newEvent.handle.apply(this,arguments)},key);return newEvent};Evp.map=function _Q_Event_prototype_map(transform,key){var newEvent=new Q.Event();this.add(function(){var parts=transform.apply(this,arguments);return newEvent.handle.apply(parts[0],parts[1])},key);return newEvent};Evp.onFirst=function(){return this._onFirst||(this._onFirst=new Q.Event())};Evp.onSet=function(){return this._onSet||(this._onSet=new Q.Event())};Evp.onRemove=function(){return this._onRemove||(this._onRemove=new Q.Event())};Evp.onEmpty=function(){return this._onEmpty||(this._onEmpty=new Q.Event())};Evp.onStop=function(){return this._onStop||(this._onStop=new Q.Event())};Q.Event.factory=function(collection,defaults,callback,removeOnEmpty){if(!collection){collection={}}
defaults=defaults||[];function _remove(){var delimiter="\t";var args=this.indexes.split(delimiter);var l=args.length,i,objs=[collection];for(i=0;i<l;++i){objs.push(objs[i][args[i]])}
for(i=l-1;i>=0;--i){var arg=args[i];delete objs[i][arg];if(!Q.isEmpty(objs[i])){break}}}
var _Q_Event_factory=function _Q_Event_factory_function(){var args=Array.prototype.slice.call(arguments,0);var len=defaults.length;var f=(typeof(defaults[len-1])==='function')?defaults[defaults.length-1]:null;if(f)--len;for(var i=args.length;i<len;++i){args[i]=defaults[i]}
args=(f&&f.apply(this,args))||args;var delimiter="\t";var name=args.join(delimiter);var e=Q.getObject(name,collection,delimiter);if(e){return e}
var e=new Q.Event();e.factory=_Q_Event_factory;e.name=name;if(callback){callback.apply(e,args)}
_Q_Event_factory.onNewEvent.handle.apply(e,args);Q.setObject(name,e,collection,delimiter);if(removeOnEmpty){e.onEmpty().set(_remove)}
e.indexes=name;return e}
_Q_Event_factory.collection=collection;_Q_Event_factory.onNewEvent=new Q.Event();return _Q_Event_factory};Q.beforeInit=new Q.Event();Q.onInit=new Q.Event();Q.onLoad=new Q.Event();Q.onUnload=new Q.Event();Q.onHashChange=new Q.Event();Q.onPopState=new Q.Event();Q.onOnline=new Q.Event(function(){_isOnline=!0},'Q');Q.onOffline=new Q.Event(function(){_isOnline=!1},'Q');Q.beforeActivate=new Q.Event();Q.onActivate=new Q.Event();Q.onDOM=new Q.Event();Q.onReady=new Q.Event();Q.onJQuery=new Q.Event();var _layoutElements=[];var _layoutEvents=[];Q.onLayout=function(element){element=element||document.documentElement;if(Q.typeOf(element)==='Q.Tool'){element=element.element}
for(var i=0,l=_layoutElements.length;i<l;++i){if(_layoutElements[i]===element){return _layoutEvents[i]}}
var event=new Q.Event();var l=_layoutElements.push(element);_layoutEvents[l-1]=event;event.onEmpty().set(function(){for(var i=0,l=_layoutElements.length;i<l;++i){if(_layoutElements[i]===element){_layoutElements.splice(i,1);_layoutEvents.splice(i,1);break}}},'Q');return event}
Q.onLayout().set(function(){_detectOrientation.apply(this,arguments);Q.Masks.update()},'Q');Q.onScroll=new Q.Event();Q.onVisibilityChange=new Q.Event();Q.beforeReplace=new Q.Event();Q.Pipe=function _Q_Pipe(requires,maxTimes,callback){if(this===Q){throw new Q.Error("Q.Pipe: omitted keyword new")}
this.callbacks=[];this.params={};this.subjects={};this.ignore={};this.finished=!1;this.add.apply(this,arguments)};var Pp=Q.Pipe.prototype;Pp.on=function _Q_pipe_on(field,callback){return this.add([field],1,function _Q_pipe_on_callback(params,subjects,field){return callback.apply(subjects[field],params[field],field)})};Pp.add=function _Q_pipe_add(requires,maxTimes,callback){var r=null,n=null,e=null,r2,events,keys;for(var i=0;i<arguments.length;i++){var ai=arguments[i];if(typeof ai==='function'){if(e){r2=[];events=[];keys=[];var pipe=this;Q.each(r,function(k,item){var event=Q.getObject(e,item);if(Q.typeOf(event)==='Q.Event'){keys.push(event.add(pipe.fill(k)));r2.push(k);events.push(event)}});ai.pipeEvents=events;ai.pipeKeys=keys;r=r2}
ai.pipeRequires=r;ai.pipeRemaining=n;r=n=e=null;this.callbacks.push(ai)}else{switch(Q.typeOf(ai)){case 'array':r=ai;if(r.length&&typeof r[0]!=='string'&&typeof r[0]!=='number'){e=arguments[++i]}
break;case 'object':r=ai;e=arguments[++i];break;case 'number':n=ai;break;default:break}
if(e!=null&&typeof e!=='string'){throw new Q.Error("Pipe.prototype.add requires event name after array of objects")}}}
return this};Pp.fill=function _Q_pipe_fill(field,ignore){if(ignore===!0){this.ignore[this.i]=!0}else if(typeof ignore==='string'){this.ignore[ignore]=!0}else if(Q.isArrayLike(ignore)){for(var i=0;i<ignore.length;++i){this.ignore[ignore[i]]=!0}}
var pipe=this;return function _Q_pipe_fill(){pipe.params[field]=Array.prototype.slice.call(arguments);pipe.subjects[field]=this;pipe.run(field)}};Pp.run=function _Q_pipe_run(field){var cb,ret,callbacks=this.callbacks,params=Q.copy(this.params),count=0;var i,j;cbloop:for(i=0;i<callbacks.length;i++){if(this.ignore[i]){continue}
this.i=i;if(!(cb=callbacks[i]))
continue;if(cb.pipeRequires){for(j=0;j<cb.pipeRequires.length;j++){if(this.ignore[cb.pipeRequires[j]]){continue}
if(!(cb.pipeRequires[j]in params)){continue cbloop}}}
if(cb.pipeRemaining){if(!--cb.pipeRemaining){delete callbacks[i]}}
ret=cb.call(this,this.params,this.subjects,field,cb.pipeRequires);if(cb.pipeEvents){for(j=0;j<cb.pipeEvents.length;j++){cb.pipeEvents[j].remove(cb.pipeKeys[j])}}
++count;delete cb.pipeEvents;delete cb.pipeKeys;if(ret===!1){delete callbacks[i]}else if(ret===!0){this.callbacks=[];this.finished=!0;break}}
return count};Q.pipe=function _Q_pipe(a,b,c,d){return new Q.Pipe(a,b,c,d)};Q.batcher=function _Q_batch(batch,options){var o=Q.extend({},Q.batcher.options,options);var result=function _Q_batch_result(){var requestArguments=arguments;function nextRequest(){var i;var callbacks=[],args=[];for(i=0;i<requestArguments.length;++i){if(typeof requestArguments[i]==='function'){callbacks.push(requestArguments[i])}else{args.push(requestArguments[i])}}
if(!batch.count)batch.count=0;if(!batch.argmax)batch.argmax=0;if(!batch.cbmax)batch.cbmax=0;++batch.count;if(callbacks.length>batch.cbmax)batch.cbmax=callbacks.length;if(args.length>batch.argmax)batch.argmax=args.length;if(!batch.subjects)batch.subjects=[];if(!batch.params)batch.params=[];if(!batch.callbacks)batch.callbacks=[];batch.subjects.push(this);batch.params.push(args);batch.callbacks.push(callbacks);if(batch.timeout){clearTimeout(batch.timeout)}
function runBatch(){try{batch.call(this,batch.subjects,batch.params,batch.callbacks);batch.subjects=batch.params=batch.callbacks=null;batch.count=0;batch.argmax=0;batch.cbmax=0}catch(e){batch.count=0;batch.argmax=0;batch.cbmax=0;throw e}}
if(batch.count==o.max){runBatch()}else{batch.timeout=setTimeout(runBatch,o.ms)}}
setTimeout(nextRequest,0)};result.batch=batch;result.cancel=function(){clearTimeout(batch.timeout)};return result};Q.batcher.options={max:10,ms:50};Q.batcher.factory=function _Q_batcher_factory(collection,baseUrl,tail,slotName,fieldName,options){if(!collection){collection={}}
if(slotName===undefined){slotName='batch'}
if(fieldName===undefined){fieldName='batch'}
if(tail&&tail[0]!=='/'){tail='/'+tail}
var delimiter="\t",f;var name=[baseUrl,tail,slotName,fieldName].join(delimiter);if(f=Q.getObject(name,collection,delimiter)){return f}
f=Q.batcher(function _Q_batcher_factory_function(subjects,args,callbacks){var o=Q.extend({method:'post',fields:{}},options);var result=options&&options.preprocess?options.preprocess(args):{args:args};o.fields[fieldName]=JSON.stringify(result);return Q.req(baseUrl+tail,slotName,function(err,response){var error=err||response.errors;if(error){Q.each(callbacks,function(k,cb){cb[0].call(response,error,response)});return}
var request=this;Q.each(response.slots.batch,function(k,result){if(result&&result.errors){callbacks[k][0].call(this,result.errors,null,request)}else{callbacks[k][0].call(this,null,(result&&result.slots)||{},request)}})},o)},options);Q.setObject(name,f,collection,delimiter);return f};Q.getter=function _Q_getter(original,options){var gw=function Q_getter_wrapper(){var i,key,callbacks=[];var arguments2=Array.prototype.slice.call(arguments);key=Q.Cache.key(arguments2,callbacks);if(callbacks.length===0){var noop=function _noop(){};arguments2.push(noop);callbacks.push(noop)}
var ret={dontCache:!1};gw.onCalled.handle.call(this,arguments2,ret);var cached,cbpos,cbi;Q.getter.usingCached=!1;function _prepare(subject,params,callback,ret,cached){if(gw.prepare){gw.prepare.call(gw,subject,params,_result,arguments2)}else{_result(subject,params)}
function _result(subject,params){gw.onResult.handle(subject,params,arguments2,ret,gw);Q.getter.usingCached=cached;callback.apply(subject,params);gw.onExecuted.handle(subject,params,arguments2,ret,gw);Q.getter.usingCached=!1}}
if(gw.cache&&!ignoreCache){if(cached=gw.cache.get(key)){cbpos=cached.cbpos;if(callbacks[cbpos]){_prepare(cached.subject,cached.params,callbacks[cbpos],ret,!0);ret.result=Q.getter.CACHED;return ret}}}
ignoreCache=!1;_waiting[key]=_waiting[key]||[];_waiting[key].push({callbacks:callbacks,ret:ret});if(_waiting[key].length>1){gw.onExecuted.handle.call(this,arguments2,ret);ret.result=Q.getter.WAITING;return ret}
var args=[];for(i=0,cbi=0;i<arguments2.length;i++){if(typeof arguments2[i]!=='function'){args.push(arguments2[i]);continue}
args.push((function(cb,cbpos){return function _Q_getter_callback(){if(gw.cache&&!ret.dontCache){gw.cache.set(key,cbpos,this,arguments)}
var wk=_waiting[key];if(wk)for(i=0;i<wk.length;i++){_prepare(this,arguments,wk[i].callbacks[cbpos],wk[i].ret,!1)}
delete _waiting[key];if(gw.throttle&&gw.throttle.throttleNext){gw.throttle.throttleNext(this)}}})(callbacks[cbi],cbi));++cbi}
if(!gw.throttle){if(!1===original.apply(this,args)){ret.dontCache=!0}
ret.result=Q.getter.REQUESTING;gw.onExecuted.handle.call(this,arguments2,ret);return ret}
if(!gw.throttle.throttleTry){var p={size:gw.throttleSize,count:0,queue:[],args:[]};gw.throttle.throttleTry=function _throttleTry(that,getter,args,ret){++p.count;if(p.size===null||p.count<=p.size){if(!1===getter.apply(that,args)){ret.dontCache=!0}
return!0}
p.queue.push(getter);p.args.push(args);return!1};gw.throttle.throttleNext=function _throttleNext(that){if(--p.count<0){console.warn("Q.getter: throttle count is negative. This probably means you passed a callback somewhere it shouldn't have been passed.")}
if(p.queue.length){p.queue.shift().apply(that,p.args.shift())}}}
if(!gw.throttleSize){gw.throttle.throttleSize=function _throttleSize(newSize){if(newSize===undefined){return p.size}
p.size=newSize}}
ret.result=gw.throttle.throttleTry(this,original,args,ret)?Q.getter.REQUESTING:Q.getter.THROTTLING;gw.onExecuted.handle.call(this,arguments2,ret);return ret}
Q.extend(gw,original,Q.getter.options,options);gw.original=original;gw.onCalled=new Q.Event();gw.onExecuted=new Q.Event();gw.onResult=new Q.Event();var _waiting={};if(gw.cache===!1){gw.cache=null}else if(gw.cache===!0){gw.cache=Q.Cache.document(++_Q_getter_i)}
gw.throttle=gw.throttle||null;if(gw.throttle===!0){gw.throttle=''}
if(typeof gw.throttle==='string'){if(!Q.getter.throttles[gw.throttle]){Q.getter.throttles[gw.throttle]={}}
gw.throttle=Q.getter.throttles[gw.throttle]}
gw.forget=function _forget(){var key=Q.Cache.key(arguments);if(key&&gw.cache){return gw.cache.remove(key)}};var ignoreCache=!1;gw.force=function _force(){ignoreCache=!0;gw.apply(this,arguments)};if(original.batch){gw.batch=original.batch}
return gw};var _Q_getter_i=0;Q.getter.options={cache:!0,throttle:null,throttleSize:100};Q.getter.throttles={};Q.getter.cache={};Q.getter.waiting={};Q.getter.CACHED=0;Q.getter.REQUESTING=1;Q.getter.WAITING=2;Q.getter.THROTTLING=3;Q.promisify=function(getter,useSecondArgument){function _promisifier(){if(!Q.Promise){return getter.apply(this,args)}
var args=[],resolve,reject,found=!1;for(var i=0,l=arguments.length;i<l;++i){var ai=arguments[i];if(typeof ai==='function'){found=!0;ai=function _promisified(err,second){if(err){return reject(err)}
try{ai.apply(this,arguments)}catch(e){err=e}
if(err){return reject(err)}
resolve(useSecondArgument?second:this)}}
args.push(ai);break}
if(!found){args.push(function _defaultCallback(err,second){if(err){return reject(err)}
resolve(useSecondArgument?second:this)})}
var promise=new Q.Promise(function(r1,r2){resolve=r1;reject=r2});return Q.extend(promise,getter.apply(this,args))}
return Q.extend(_promisifier,getter)};Q.once=function(original,defaultValue){var _called=!1;return function _Q_once_wrapper(){if(_called)return defaultValue;_called=!0;return original.apply(this,arguments)}};Q.throttle=function(original,milliseconds,delayedFinal,defaultValue){var _lastCalled;var _timeout=null;return function _Q_throttle_wrapper(e){var t=this,a=arguments;var ms=Date.now()-_lastCalled;if(ms<milliseconds){if(delayedFinal){if(_timeout){clearTimeout(_timeout)}
_timeout=setTimeout(function(){_lastCalled=Date.now();original.apply(t,a)},milliseconds-ms)}
return defaultValue}
_lastCalled=Date.now();return original.apply(this,arguments)}};Q.queue=function(original,milliseconds){var _queue=[];var _timeout=null;milliseconds=milliseconds||0;function _Q_queue_next(){if(!_queue.length){_timeout=null;return 0}
var p=_queue.shift();var ret=original.apply(p[0],p[1]);if(ret===!1){_timeout=null;_queue=[]}else{_timeout=setTimeout(_Q_queue_next,milliseconds)}};return function _Q_queue_wrapper(){var args=Array.prototype.slice.call(arguments,0);var len=_queue.push([this,args]);if(!_timeout){_timeout=setTimeout(_Q_queue_next,0)}
return len}};Q.debounce=function(original,milliseconds,immediate,defaultValue){var _timeout=null;return function _Q_debounce_wrapper(){var t=this,a=arguments;if(_timeout){clearTimeout(_timeout)}else if(immediate){original.apply(t,a)}
_timeout=setTimeout(function _Q_debounce_handler(){if(!immediate){original.apply(t,a)}
_timeout=null},milliseconds);return defaultValue}};Q.preventRecursion=function(name,original,defaultValue){return function(){var n='__preventRecursion_'+name;if(this[n])return defaultValue;this[n]=!0;var ret=original.apply(this,arguments);delete this[n];return ret}};Q.Exception=function(message,fields){this.fields=fields||{};this.message=message||""};Q.Exception.prototype=Error;Q.Tool=function _Q_Tool(element,options){if(this.activated){return this}
this.activated=!0;this.element=element;this.typename='Q.Tool';if(root.jQuery){jQuery(element).data('Q_tool',this)}
if(!this.element.id){var prefix=Q.Tool.beingActivated?Q.Tool.beingActivated.prefix:'';if(!prefix){var e=this.element.parentNode;do{if(e.hasClass&&e.hasClass('Q_tool')){prefix=Q.getObject('Q.tool.prefix',e)||Q.Tool.calculatePrefix(e.id);break}}while(e=e.parentNode)}
var name=Q.Tool.names[this.name]||this.name.toCapitalized();this.element.id=prefix+name.split('/').join('_')+'-'+(Q.Tool.nextDefaultId++)+"_tool";Q.Tool.nextDefaultId%=1000000}
this.prefix=Q.Tool.calculatePrefix(this.element.id);this.id=this.prefix.substr(0,this.prefix.length-1);if(Q.Tool.byId(this.id,this.name)){var toolName=Q.Tool.names[this.name];throw new Q.Error("A "+toolName+" tool with id "+this.id+" is already active")}
var classes=(this.element.className&&this.element.className.split(/\s+/)||[]);var key=Q.calculateKey(this);var dataOptions=element.getAttribute('data-'+Q.normalize(this.name,'-'));if(dataOptions){var parsed=null;if(dataOptions[0]==='{'){parsed=JSON.parse(dataOptions)}else{var ios=dataOptions.indexOf(' ');this.id=dataOptions.substr(0,ios);var tail=dataOptions.substr(ios+1);parsed=tail&&JSON.parse(tail)}
if(parsed){Q.extend(this.options,Q.Tool.options.levels,parsed,key)}}
var partial,i,k,l,a,n;options=options||{};this.options=this.options||{};var normalizedName=Q.normalize(this.name);var pids=this.parentIds();var len=pids.length;var o=len?Q.extend({},Q.Tool.options.levels,options):options;for(i=len-1;i>=0;--i){var pid=pids[i];if(!(a=Q.Tool.active[pid])){continue}
for(n in a){for(k in a[n].state){if(k[0]==='.'||k[0]==='#'){o[k]=Q.extend(o[k],Q.Tool.options.levels,a[n].state[k])}}}}
for(i=0,l=classes.length;i<l;i++){var className=classes[i];var cn=Q.normalize(className.substr(0,className.length-5));partial=o['.'+className];if(partial&&(className.substr(-5)!=='_tool'||cn===this.name)){Q.extend(this.options,Q.Tool.options.levels,partial,key)}}
if((partial=o['#'+this.element.id])){Q.extend(this.options,Q.Tool.options.levels,partial,key);for(k in o){if(k.startsWith('#'+this.prefix)){this.options[k]=o[k]}}}
var _idcomps=this.element.id.split('_');for(i=0;i<_idcomps.length-1;++i){if((partial=o['#'+_idcomps.slice(i).join('_')])){Q.extend(this.options,Q.Tool.options.levels,partial,key)}}
var eo=element.options;if(eo&&eo[normalizedName]){Q.extend(this.options,Q.Tool.options.levels,eo[normalizedName],key)}
if(element.Q===Element.prototype.Q){element.Q=function(toolName){if(!toolName){return(this.Q.tool||null)}
return this.Q.tools[Q.normalize(toolName)]||null}}
if(!element.Q.tools)element.Q.tools={};if(!element.Q.toolNames)element.Q.toolNames=[];element.Q.toolNames.push(normalizedName);element.Q.tools[normalizedName]=this;element.Q.tool=this;Q.setObject([this.id,this.name],this,Q.Tool.active);this.Q=Q.extend({onConstruct:new Q.Event(),onInit:new Q.Event(),beforeRemove:new Q.Event(),onRetain:new Q.Event(),onStateChanged:new Q.Event.factory({},"")},this.Q);return this};Q.Tool.options={levels:10};Q.Tool.active={};Q.Tool.names={};Q.Tool.latestName=null;Q.Tool.latestNames={};var _constructToolHandlers={};var _activateToolHandlers={};var _initToolHandlers={};var _beforeRemoveToolHandlers={};var _waitingParentStack=[];var _pendingParentStack=[];var _toolsToInit={};var _toolsWaitingForInit={};function _toolEventFactoryNormalizeKey(key){var parts=key.split(':',2);parts[parts.length-1]=Q.normalize(parts[parts.length-1]);return[parts.join(':')]}
Q.Tool.onConstruct=Q.Event.factory(_constructToolHandlers,["",_toolEventFactoryNormalizeKey]);Q.Tool.onActivate=Q.Event.factory(_activateToolHandlers,["",_toolEventFactoryNormalizeKey],null,!0);Q.Tool.onInit=Q.Event.factory(_initToolHandlers,["",_toolEventFactoryNormalizeKey],null,!0);Q.Tool.beforeRemove=Q.Event.factory(_beforeRemoveToolHandlers,["",_toolEventFactoryNormalizeKey],null,!0);Q.Tool.remove=function _Q_Tool_remove(elem,removeCached){if(typeof elem==='string'){var tool=Q.Tool.byId(elem);if(!tool)return!1;elem=tool.element}
Q.find(elem,!0,null,function _Q_Tool_remove_found(toolElement){var tn=toolElement.Q.toolNames;if(!tn){return}
for(var i=tn.length-1;i>=0;--i){toolElement.Q.tools[tn[i]].remove(removeCached)}})};Q.Tool.clear=function _Q_Tool_clear(elem,removeCached){if(typeof elem==='string'){var tool=Q.Tool.byId(elem);if(!tool)return!1;elem=tool.element}
Q.Tool.remove(elem.children||elem.childNodes)};Q.Tool.define=function(name,ctor,defaultOptions,stateKeys,methods){var ctors={};if(typeof name==='object'){ctors=name}else{if(typeof arguments[1]!=='function'&&typeof arguments[2]==='function'){var require=arguments[1];if(typeof require==='string'){require=[require]}
ctor=arguments[2];ctor.require=require;defaultOptions=arguments[3];stateKeys=arguments[4];methods=arguments[5]}
ctors[name]=ctor}
for(name in ctors){ctor=ctors[name];var n=Q.normalize(name);if(ctor==null){ctor=function _Q_Tool_default_constructor(){}}
Q.Tool.names[n]=name;if(typeof ctor==='string'){if(typeof _qtc[n]!=='function'){_qtdo[n]=_qtdo[n]||{};_qtc[n]=ctor}
continue}
_qtc[n]=ctor;ctor.toolName=n;if(typeof stateKeys==='object'){methods=stateKeys;stateKeys=undefined}
ctor.options=Q.extend(defaultOptions,Q.Tool.options.levels,_qtdo[n]);ctor.stateKeys=stateKeys;if(typeof ctor!=='function'){throw new Q.Error("Q.Tool.define requires ctor to be a string or a function")}
Q.extend(ctor.prototype,10,methods);Q.Tool.onLoadedConstructor(n).handle(n,ctor);Q.Tool.onLoadedConstructor("").handle(n,ctor);Q.Tool.latestName=n}
return ctor};Q.Tool.beingActivated=undefined;Q.Tool.define.options=function(toolName,setOptions){var options;toolName=Q.normalize(toolName);if(typeof _qtc[toolName]==='function'){options=_qtc[toolName].options}else{options=_qtdo[toolName]=_qtdo[toolName]||{}}
if(setOptions){Q.extend(options,Q.Tool.options.levels,setOptions)}
return options};var _qtdo={};Q.Tool.jQuery=function(name,ctor,defaultOptions,stateKeys,methods){var n;if(typeof name==='object'){for(n in name){Q.Tool.jQuery(n,name[n])}
return}
n=Q.normalize(name);Q.Tool.names[n]=name;if(typeof ctor==='string'){if(root.jQuery&&typeof jQuery.fn.plugin[n]!=='function'){_qtjo[n]=_qtjo[n]||{};jQuery.fn.plugin[n]=_qtc[n]=ctor}
return ctor}
ctor.toolName=n;if(typeof stateKeys==='object'){methods=stateKeys;stateKeys=undefined}
if(root.jQuery){_onJQuery()}
Q.Tool.latestName=n;function _onJQuery(){$=root.jQuery;function jQueryPluginConstructor(options){var key=n+' state',args;if(typeof options==='string'){var method=options;if(!jQueryPluginConstructor.methods[method]){return this}
args=Array.prototype.slice.call(arguments,1);$(this).each(function(){var $this=$(this);if($this.data(key)){return jQueryPluginConstructor.methods[method].apply($this,args)}})}else{args=Array.prototype.slice.call(arguments,0);args[0]=Q.extend({},10,jQueryPluginConstructor.options,10,options);$(this).each(function(){var $this=$(this);if($this.data(key)){$this.plugin(n,'remove')}
$this.data(key,Q.copy(args[0],stateKeys));ctor.apply($this,args)})}
return this}
jQueryPluginConstructor.options=Q.extend(defaultOptions,Q.Tool.options.levels,_qtjo[n]);jQueryPluginConstructor.methods=methods||{};$.fn[n]=jQueryPluginConstructor;var ToolConstructor=Q.Tool.define(name,function _Q_Tool_jQuery_constructor(options){var $te=$(this.element);$te.plugin(n,options,this);this.state=$te.state(n);this.Q.beforeRemove.set(function(){$(this.element).plugin(n,'remove',this)},'Q')});Q.each(methods,function(method){ToolConstructor.prototype['$'+method]=function _Q_Tool_jQuery_method(){var args=Array.prototype.slice.call(arguments,0);args.unshift(n,method);var $te=$(this.element);$te.plugin.apply($te,args)}})}};Q.Tool.jQuery.options=function(pluginName,setOptions){var options;var pluginName=Q.normalize(pluginName);if(typeof _qtc[name]==='function'){options=root.jQuery.fn[pluginName].options}else{options=_qtjo[pluginName]=_qtjo[pluginName]||{}}
if(setOptions){Q.extend(options,Q.Tool.options.levels,setOptions)}
return options};var _qtjo={};Q.Tool.nextDefaultId=1;var _qtc=Q.Tool.constructors={};var Tp=Q.Tool.prototype;Tp.stateChanged=function Q_Tool_prototype_stateChanged(names){if(typeof names==='string'){names=names.split(',');for(var i=0,l=names.length;i<l;++i){names[i]=names[i].trim()}}
var l=names.length;for(var i=0;i<l;++i){var name=names[i];this.Q.onStateChanged(name).handle.call(this,name,this.state[name])}
this.Q.onStateChanged('').handle.call(this,names)};Tp.rendering=function(fields,callback,key,dontWaitForAnimationFrame){var tool=this;var i,l;if(typeof fields==='string'){fields=fields.split(',');for(i=0,l=fields.length;i<l;++i){fields[i]=fields[i].trim()}}
if(!fields.length)return!1;var event;for(i=0,l=fields.length;i<l;++i){this.Q.onStateChanged(fields[i]).set(_handleChange,key)}
var previous=(Q.Tool.beingActivated===this)?{}:Q.copy(this.state,fields);var changed={};var r;function _handleChange(name){if(this.state[name]===previous[name])return;changed[name]=this.state[name];r=r||(dontWaitForAnimationFrame?setTimeout(_render,0):requestAnimationFrame(_render))}
function _render(t){Q.handle(callback,tool,[changed,previous,t])
previous=Q.copy(tool.state,fields);changed={};r=null}};Tp.children=function Q_Tool_prototype_children(name,levels){var result={};var prefix=this.prefix;var id,n,i,ids;name=name&&Q.normalize(name);for(id in Q.Tool.active){for(n in Q.Tool.active[id]){if((name&&name!=n)||!id.startsWith(prefix)){continue}
var tool=Q.Tool.active[id][n];if(!levels){Q.setObject([id,n],tool,result);continue}
ids=tool.parentIds();var l=Math.min(levels,ids.length);for(i=0;i<l;++i){if(ids[i]===this.id){Q.setObject([id,n],tool,result);continue}}}}
return result};Tp.child=function Q_Tool_prototype_child(append,name){name=name&&Q.normalize(name);var prefix2=Q.normalize(this.prefix+(append||""));var id,ni,n;for(id in Q.Tool.active){ni=Q.normalize(id);for(n in Q.Tool.active[id]){if(name&&name!=n){break}
if(id.length>=prefix2.length+(append?0:1)&&ni.substr(0,prefix2.length)==prefix2){return Q.Tool.active[id][n]}}}
return null};Tp.parentIds=function Q_Tool_prototype_parentIds(){var prefix2=Q.normalize(this.prefix),ids=[],id,ni;for(id in Q.Tool.active){ni=Q.normalize(id);if(ni.length<prefix2.length-1&&ni===prefix2.substr(0,ni.length)&&prefix2[ni.length]==='_'){ids.push(id)}}
ids.sort(function(a,b){return String(b).length-String(a).length});return ids};Tp.parents=function Q_Tool_prototype_parents(){var ids=[],i,id;ids=this.parentIds();var result={},len=ids.length;for(i=0;i<len;++i){id=ids[i];result[id]={};for(var n in Q.Tool.active[id]){result[id][n]=Q.Tool.active[id][n]}}
return result};Tp.parent=function Q_Tool_prototype_parent(){var ids=[];ids=this.parentIds();return ids.length?Q.first(Q.Tool.active[ids[0]]):null};Tp.ancestor=function Q_Tool_prototype_parent(name){name=Q.normalize(name);var parents=this.parents();for(var id in parents){for(var n in parents[id]){if(n===name){return parents[id][n]}}}
return null};Tp.sibling=function Q_Tool_prototype_sibling(name){return(this.element&&this.element.Q&&this.element.Q(name))||null};Tp.siblings=function Q_Tool_prototype_siblings(){var tools=(this.element&&this.element.Q&&this.element.Q.tools);tools=tools?Q.copy(tools):{};delete tools[this.name];return tools};Tp.remove=function _Q_Tool_prototype_remove(removeCached){var i;var shouldRemove=removeCached||!this.element.getAttribute('data-Q-retain')!==null;if(!shouldRemove||!Q.Tool.active[this.id]){return!1}
var normalizedName=Q.normalize(this.name);var normalizedId=Q.normalize(this.id);_beforeRemoveToolHandlers["id:"+normalizedId]&&_beforeRemoveToolHandlers["id:"+normalizedId].handle.call(this);_beforeRemoveToolHandlers[normalizedName]&&_beforeRemoveToolHandlers[normalizedName].handle.call(this);_beforeRemoveToolHandlers[""]&&_beforeRemoveToolHandlers[""].handle.call(this);Q.handle(this.Q.beforeRemove,this,[]);var nn=Q.normalize(this.name);delete this.element.Q.tools[nn];delete Q.Tool.active[this.id][nn];if(Q.isEmpty(Q.Tool.active[this.id])){Q.removeElement(this.element);delete Q.Tool.active[this.id]}
var tool=this;var key=Q.calculateKey(this);var arr=Q.Event.forTool[key];while(arr&&arr.length){arr[0].remove(tool)}
var p=Q.Event.jQueryForTool[key];if(p){for(i=p.length-1;i>=0;--i){var off=p[i][0];root.jQuery.fn[off].call(p[i][1],p[i][2],p[i][3])}
Q.Event.jQueryForTool[key]=[]}
return this.removed=!0};Tp.$=function _Q_Tool_prototype_$(selector){if(root.jQuery){return selector===undefined?jQuery(this.element):jQuery(selector,this.element)}else{throw new Q.Error("Tp.$ requires jQuery")}};Tp.getElementsByClassName=function _Q_Tool_prototype_getElementsByClasName(className){return this.element.getElementsByClassName(className)};Tp.forEachChild=function _Q_Tool_prototype_forEachChild(name,levels,withSiblings,callback){if(typeof name!=='string'){levels=name;callback=levels;name=null}
if(typeof levels!=='number'){withSiblings=levels;levels=null}
if(typeof withSiblings!=='boolean'){callback=withSiblings;withSiblings=!1}
name=name&&Q.normalize(name);var id,n;var tool=this;var children=tool.children(name,levels);for(id in children){for(n in children[id]){Q.handle(callback,children[id][n])}}
var onActivate=Q.Tool.onActivate(name);if(withSiblings){var siblings=tool.siblings();for(n in siblings){Q.handle(callback,siblings[n])}}
var key=onActivate.set(function(){if(this.prefix.startsWith(tool.prefix)){if(withSiblings||this.prefix.length>tool.prefix.length){Q.handle(callback,this,arguments)}}});tool.Q.beforeRemove.set(function(){onActivate.remove(key)})};Q.Tool.encodeOptions=function _Q_Tool_encodeOptions(options){var json=JSON.stringify(options).encodeHTML().replaceAll({"&quot;":'"'})};Q.Tool.setUpElement=function _Q_Tool_setUpElement(element,toolName,toolOptions,id,prefix){if(typeof toolOptions==='string'){id=toolOptions;toolOptions=undefined}
if(typeof element==='string'){element=document.createElement(element)}
if(typeof toolName==='string'){toolName=[toolName]}
if(Q.isPlainObject(toolOptions)){toolOptions=[toolOptions]}
for(var i=0,l=toolName.length;i<l;++i){var tn=toolName[i];var ntt=tn.split('/').join('_');var ba=Q.Tool.beingActivated;var p1=prefix||(ba?ba.prefix:'');element.addClass('Q_tool '+ntt+'_tool');if(!element.getAttribute('id')){if(typeof id==='function'){id=id()}
if(id==undefined){var p2;do{p2=p1+ntt+'-'+(Q.Tool.nextDefaultId++)+'_';Q.Tool.nextDefaultId%=1000000}while(Q.Tool.active[p2]);id=p2+'tool'}else{id+='_tool';if(p1){id=p1+id}}
element.setAttribute('id',id)}
if(toolOptions&&toolOptions[i]){element.options=element.options||{};element.options[Q.normalize(tn)]=toolOptions[i]}}
return element};Q.Tool.setUpElementHTML=function _Q_Tool_setUpElementHTML(element,toolName,toolOptions,id,prefix){var e=Q.Tool.setUpElement(element,toolName,null,id,prefix);var ntt=toolName.replace(/\//g,'_');if(toolOptions){e.setAttribute('data-'+ntt.replace(/_/g,'-'),JSON.stringify(toolOptions))}
return e.outerHTML};Tp.setUpElement=function(element,toolName,toolOptions,id){return Q.Tool.setUpElement(element,toolName,toolOptions,id,this.prefix)};Tp.setUpElementHTML=function(element,toolName,toolOptions,id){return Q.Tool.setUpElementHTML(element,toolName,toolOptions,id,this.prefix)};Q.Tool.from=function _Q_Tool_from(toolElement,toolName){if(Q.isArrayLike(toolElement)){toolElement=toolElement[0]}if(typeof toolElement==='string'){toolElement=document.getElementById(toolElement)}
return toolElement.Q?toolElement.Q(toolName):null};Q.Tool.byId=function _Q_Tool_byId(id,name){if(name){name=Q.normalize(name);return Q.Tool.active[id]?Q.Tool.active[id][name]:null}
var tool=Q.Tool.active[id]?Q.first(Q.Tool.active[id]):null;if(!tool){return null}
var q=tool.element.Q;return q.tools[q.toolNames[q.toolNames.length-1]]};Q.Tool.byName=function _Q_Tool_byName(name){var result={};var isString=(typeof name==='string');if(isString){name=Q.normalize(name)}else{for(var i=0,l=name.length;i<l;++i){name[i]=Q.normalize(name[i])}}
for(var id in Q.Tool.active){var tools=Q.Tool.active[id];for(var n in tools){if((isString&&name===n)||(!isString&&name.indexOf(n)>=0)){result[id]=tools[n]}}}
return result};Q.Tool.calculatePrefix=function _Q_Tool_calculatePrefix(id){if(id.match(/_tool$/)){return id.substring(0,id.length-4)}else if(id.substr(id.lengh-1)==='_'){return id}else{return id+"_"}};Q.Tool.calculateId=function _Q_Tool_calculatePrefix(id){if(id.match(/_tool$/)){return id.substring(0,id.length-5)}else if(id.substr(id.length-1)==='_'){return id.substring(0,id.length-1)}else{return id}};Tp.toString=function _Q_Tool_prototype_toString(){return this.id};function _loadToolScript(toolElement,callback,shared,parentId){var toolId=Q.Tool.calculateId(toolElement.id);var normalizedId=Q.normalize(toolId);var classNames=toolElement.className.split(' ');var toolNames=[];for(var i=0,nl=classNames.length;i<nl;++i){var className=classNames[i];if(className==='Q_tool'||className.slice(-5)!=='_tool'){continue}
toolNames.push(Q.normalize(className.substr(0,className.length-5)))}
var p=new Q.Pipe(toolNames,function(params){for(var i=0,nl=toolNames.length;i<nl;++i){var toolName=toolNames[i];callback.apply(null,params[toolName])}});Q.each(toolNames,function(i,toolName){var toolConstructor=_qtc[toolName];function _loadToolScript_loaded(){if(Q.Tool.latestName){_qtc[toolName]=_qtc[Q.Tool.latestName];Q.Tool.latestNames[toolConstructor]=Q.Tool.latestName}
toolConstructor=_qtc[toolName];if(typeof toolConstructor!=='function'){Q.Tool.onMissingConstructor.handle(_qtc,toolName);toolConstructor=_qtc[toolName];if(typeof toolConstructor!=='function'){toolConstructor=function(){console.log("Missing tool constructor for "+toolName)}}}
p.fill(toolName)(toolElement,toolConstructor,toolName,uniqueToolId)}
if(toolConstructor===undefined){Q.Tool.onMissingConstructor.handle(_qtc,toolName);toolConstructor=_qtc[toolName];if(typeof toolConstructor!=='function'&&typeof toolConstructor!=='string'){toolConstructor=function(){console.log("Missing tool constructor for "+toolName)}}}
if(parentId){Q.setObject([toolId,parentId],!0,_toolsToInit);if(parentId!==toolId){Q.setObject([parentId,toolId],!0,_toolsWaitingForInit)}}
if(shared){var uniqueToolId=toolId+" "+toolName;if(!shared.firstToolId){shared.firstToolId=uniqueToolId}
if(shared.waitingForTools.indexOf(uniqueToolId)<0){shared.waitingForTools.push(uniqueToolId)}}
if(typeof toolConstructor==='function'){return p.fill(toolName)(toolElement,toolConstructor,toolName,uniqueToolId)}
if(toolConstructor===undefined){return}
if(typeof toolConstructor!=='string'){throw new Q.Error("Q.Tool.loadScript: toolConstructor cannot be "+Q.typeOf(toolConstructor))}
if(Q.Tool.latestNames[toolConstructor]){Q.Tool.latestName=Q.Tool.latestNames[toolConstructor];_loadToolScript_loaded()}else{Q.Tool.latestName=null;Q.addScript(toolConstructor,_loadToolScript_loaded)}})}
Q.Tool.onLoadedConstructor=Q.Event.factory({},["",function(name){return[Q.normalize(name)]}]);Q.Tool.onMissingConstructor=new Q.Event();Q.Links={sms:function(body,mobileNumbers){var ios=(Q.info.browser.OS!=='ios');if(mobileNumbers&&Q.isArrayLike(mobileNumbers)){mobileNumbers=ios?mobileNumbers[0]:mobileNumbers.join(',')}
var url="sms:"+mobileNumbers;var char=ios?'?':'&';return url+char+'body='+encodeURIComponent(body)},email:function(subject,body,to,cc,bcc){var ios=(Q.info.browser.OS!=='ios');to=to&&Q.isArrayLike(to)?to.join(','):to;cc=cc&&Q.isArrayLike(cc)?cc.join(','):cc;bcc=bcc&&Q.isArrayLike(bcc)?bcc.join(','):bcc;var names=['cc','bcc','subject','body'];var parts=[cc,bcc,subject,body];var url="mailto:"+encodeURIComponent(to||'');var char='?';for(var i=0,l=names.length;i<l;++i){if(parts[i]){url+=char+names[i]+'='+encodeURIComponent(parts[i])
char='&'}}
return url}};Q.Session=function _Q_Session(){return{}};Q.Session=function _Q_Session(){return{}};Q.Request=function _Q_Request(url,slotNames,callback,options){this.url=url;this.slotNames=slotNames;this.callback=callback;this.options=options};Q.Cache=function _Q_Cache(options){if(this===Q){throw new Q.Error("Q.Pipe: omitted keyword new")}
options=options||{};this.typename='Q.Cache';this.localStorage=!!options.localStorage;this.sessionStorage=!!options.sessionStorage;this.name=options.name;this.data={};this.special={};var _earliest,_latest,_count;if(options.localStorage){this.localStorage=!0}else if(options.sessionStorage){this.sessionStorage=!0}else{this.documentStorage=!0;_earliest=_latest=null;_count=0}
this.max=options.max||100;this.earliest=function _Q_Cache_earliest(){var newValue=arguments[0];if(newValue===undefined){if(this.documentStorage){return _earliest}else{var result=Q_Cache_get(this,"earliest",!0);return result===undefined?null:result}}else{if(this.documentStorage){_earliest=newValue}else{Q_Cache_set(this,"earliest",newValue,!0)}}};this.latest=function _Q_Cache_latest(){var newValue=arguments[0];if(newValue===undefined){if(this.documentStorage){return _latest}else{var result=Q_Cache_get(this,"latest",!0);return result===undefined?null:result}}else{if(this.documentStorage){_latest=newValue}else{Q_Cache_set(this,"latest",newValue,!0)}}};this.count=function _Q_Cache_count(){var newValue=arguments[0];if(newValue===undefined){if(this.documentStorage){return _count}else{var result=Q_Cache_get(this,"count",!0);return result||0}}else{if(this.documentStorage){_count=newValue}else{Q_Cache_set(this,"count",newValue,!0)}}};if(options.after){var cache=options.after;if(!(cache instanceof Q.Cache)){throw new Q.Exception("Q.Cache after option must be a Q.Cache instance")}
if(cache.max<this.max){throw new Q.Exception("Q.Cache after.max cannot be less than this.max")}
var _set=this.set;var _get=this.get;var _remove=this.remove;var _clear=this.clear;this.set=function(){cache.set.apply(this,arguments);return _set.apply(this,arguments)};this.get=function(){cache.get.apply(this,arguments);return _get.apply(this,arguments)};this.remove=function(){cache.remove.call(this,arguments);return _remove.apply(this,arguments)};this.clear=function(){this.each([],function(){cache.remove.apply(this,arguments)});return _clear.apply(this,arguments)}}};function Q_Cache_get(cache,key,special){if(cache.documentStorage){return(special===!0)?cache.special[key]:cache.data[key]}else{var storage=cache.localStorage?localStorage:(cache.sessionStorage?sessionStorage:null);var item=storage.getItem(cache.name+(special===!0?"\t":"\t\t")+key);return item?JSON.parse(item):undefined}}
function Q_Cache_set(cache,key,obj,special){if(cache.documentStorage){if(special===!0){cache.special[key]=obj}else{cache.data[key]=obj}}else{var serialized=JSON.stringify(obj);var storage=cache.localStorage?localStorage:(cache.sessionStorage?sessionStorage:null);storage.setItem(cache.name+(special===!0?"\t":"\t\t")+key,serialized)}}
function Q_Cache_remove(cache,key,special){if(cache.documentStorage){if(special===!0){delete cache.special[key]}else{delete cache.data[key]}}else{var storage=cache.localStorage?localStorage:(cache.sessionStorage?sessionStorage:null);storage.removeItem(cache.name+(special===!0?"\t":"\t\t")+key)}}
function Q_Cache_pluck(cache,existing){var value;if(existing.prev){value=Q_Cache_get(cache,existing.prev);if(!value){debugger}
value.next=existing.next;Q_Cache_set(cache,existing.prev,value)}else{cache.earliest(existing.next)}
if(existing.next){value=Q_Cache_get(cache,existing.next);value.prev=existing.prev;Q_Cache_set(cache,existing.next,value)}else{cache.latest(existing.prev)}}
Q.Cache.key=function _Cache_key(args,functions){var i,keys=[];if(Q.isArrayLike(args)){for(i=0;i<args.length;++i){if(typeof args[i]!=='function'){keys.push(args[i])}else if(functions&&functions.push){functions.push(args[i])}}}else{keys=args}
return JSON.stringify(keys)};var Cp=Q.Cache.prototype;Cp.set=function _Q_Cache_prototype_set(key,cbpos,subject,params,options){var existing,previous,count;if(typeof key!=='string'){key=Q.Cache.key(key)}
if(!options||!options.dontTouch){existing=this.get(key);if(!existing){count=this.count()+1;this.count(count)}}
var value={cbpos:cbpos,subject:subject,params:(params instanceof Array)?params:Array.prototype.slice.call(params||[]),prev:(options&&options.prev)?options.prev:(existing?existing.prev:this.latest()),next:(options&&options.next)?options.next:(existing?existing.next:null)};Q_Cache_set(this,key,value);if(!existing||(!options||!options.dontTouch)){if((previous=Q_Cache_get(this,value.prev))){previous.next=key;Q_Cache_set(this,value.prev,previous)}
this.latest(key);if(count===1){this.earliest(key)}}
if(count>this.max){this.remove(this.earliest())}
return existing?!0:!1};Cp.get=function _Q_Cache_prototype_get(key,options){var existing,previous;if(typeof key!=='string'){key=Q.Cache.key(key)}
existing=Q_Cache_get(this,key);if(!existing){return undefined}
if((!options||!options.dontTouch)&&this.latest()!==key){if(this.earliest()==key){this.earliest(existing.next)}
Q_Cache_pluck(this,existing);existing.prev=this.latest();existing.next=null;Q_Cache_set(this,key,existing);if((previous=Q_Cache_get(this,existing.prev))){previous.next=key;Q_Cache_set(this,existing.prev,previous)}
this.latest(key)}
return existing};Cp.remove=function _Q_Cache_prototype_remove(key){var existing,count;if(typeof key!=='string'){key=Q.Cache.key(key)}
existing=this.get(key,!0);if(!existing){return!1}
count=this.count()-1;this.count(count);if(this.latest()===key){this.latest(existing.prev)}
if(this.earliest()===key){this.earliest(existing.next)}
Q_Cache_pluck(this,existing);Q_Cache_remove(this,key);return!0};Cp.clear=function _Q_Cache_prototype_clear(){if(this.documentStorage){this.special={};this.data={}}else{var key=this.earliest(),prevkey,item;while(key){item=Q_Cache_get(this,key);if(item===undefined)break;prevkey=key;key=item.next;Q_Cache_remove(this,prevkey)}}
this.earliest(null);this.latest(null);this.count(0)};Cp.each=function _Q_Cache_prototype_each(args,callback){var prefix=null;if(typeof args==='function'){callback=args;args=undefined}else{var json=Q.Cache.key(args);prefix=json.substring(0,json.length-1)}
if(!callback){return}
var cache=this;if(this.documentStorage){return Q.each(this.data,function(k,v){if(prefix&&!k.startsWith(prefix)){return}
if(callback.call(cache,k,v)===!1){return!1}})}else{var results={},seen={},key=cache.earliest(),item;while(key){item=Q_Cache_get(this,key);if(item===undefined){break}
if(!prefix||key.startsWith(prefix)){results[key]=item}
if(seen[key]){throw new Q.Error("Q.Cache.prototype.each: "+this.name+" has an infinite loop")}
seen[key]=!0;key=item.next}
for(key in results){if(!1===callback.call(this,key,results[key])){break}}}};Cp.removeEach=function _Q_Cache_prototype_each(args){this.each(args,function(key){this.remove(key)});return this};Q.Cache.document=function _Q_Cache_document(name,max){if(!Q.Cache.document.caches[name]){var cache=Q.Cache.document.caches[name]=new Q.Cache({max:max});cache.name=name}
return Q.Cache.document.caches[name]};Q.Cache.local=function _Q_Cache_local(name,max){if(!Q.Cache.local.caches[name]){var cache=Q.Cache.local.caches[name]=new Q.Cache({localStorage:!0,max:max});cache.name=name}
return Q.Cache.local.caches[name]};Q.Cache.session=function _Q_Cache_session(name,max){if(!Q.Cache.session.caches[name]){var cache=Q.Cache.session.caches[name]=new Q.Cache({sessionStorage:!0,max:max});cache.name=name}
return Q.Cache.session.caches[name]};Q.Cache.document.caches={};Q.Cache.local.caches={};Q.Cache.session.caches={};Q.Page=function(uriString){this.uriString=uriString};Q.Page.push=function(url){url=Q.url(url);if(url.substr(0,Q.info.baseUrl.length)!==Q.info.baseUrl){return}
var parts=url.split('#');var path=(url.substr(Q.info.baseUrl.length+1)||'');if(history.pushState){history.pushState({},null,url)}else{var hash='#!url='+encodeURIComponent(path)+location.hash.replace(/#!url=[^&]*/,'').replace(/&!url=[^&]*/,'').replace(/&column=[^&]+/,'').replace(/#column=[^&]+/,'');if(parts[1]){hash+=('&'+parts[1]).replace(/&!url=[^&]*/,'').replace(/&column=[^&]+/,'')}
if(location.hash!==hash){Q_hashChangeHandler.ignore=!0;location.hash=hash}}
Q_hashChangeHandler.currentUrl=url.substr(Q.info.baseUrl.length+1);Q.info.url=url};Q.Page.currentUrl=function(){var url=location.hash.queryField('url');return url?Q.url(url):location.href.split('#')[0]};Q.Page.beingLoaded=!1;Q.Page.beingActivated=!1;Q.Page.beingProcessed=!1;Q.Page.onLoad=Q.Event.factory(null,[""]);Q.Page.onActivate=Q.Event.factory(null,[""]);Q.Page.onUnload=Q.Event.factory(null,[""]);Q.Page.beforeUnload=Q.Event.factory(null,[""]);Q.page=function _Q_page(page,handler,key){if(key===undefined){key='Q'}
if(Q.isArrayLike(page)){for(var i=0,l=page.length;i<l;++i){Q.page(page[i],handler,key)}
return}
if(Q.isPlainObject(page)){for(var k in page){Q.page(k,page[k],key)}
return}
if(typeof handler!=='function'){return}
Q.Page.onActivate(page).add(function Q_onPageActivate_handler(url,options){var unload=handler.call(Q,Q.Page.beforeUnload("Q\t"+page),url,options);if(unload&&typeof unload==="function"){Q.Page.beforeUnload("Q\t"+page).set(unload,key)}},key)};Q.init=function _Q_init(options){if(Q.init.called){return!1}
Q.init.called=!0;Q.info.imgLoading=Q.info.imgLoading||Q.url('plugins/Q/img/throbbers/loading.gif');Q.loadUrl.options.slotNames=Q.info.slotNames;_detectOrientation();Q.addEventListener(root,'unload',Q.onUnload.handle);Q.addEventListener(root,'online',Q.onOnline.handle);Q.addEventListener(root,'offline',Q.onOffline.handle);Q.addEventListener(root,Q.Pointer.focusout,_onPointerBlurHandler);var checks=["ready"];if(_isCordova&&root.cordova&&Q.typeOf(cordova).substr(0,4)!=='HTML'){checks.push("device")}
var p=Q.pipe(checks,1,function _Q_init_pipe_callback(){if(!Q.info)Q.info={};Q.info.isCordova=!!Q.info.isCordova;if(options&&options.isLocalFile){Q.info.isLocalFile=!0;Q.handle.options.loadUsingAjax=!0}
if(Q.info.isCordova&&!Q.cookie('Q_cordova')){Q.cookie('Q_cordova','yes')}
function _ready(){Q.handle(navigator.onLine?Q.onOnline:Q.onOffline);Q.ready()}
function _getJSON(){Q.ensure(root.JSON,Q.libraries.json,_ready)}
if(options&&options.isLocalFile){Q.loadUrl(Q.info.baseUrl,{ignoreHistory:!0,skipNonce:!0,onActivate:_getJSON,handler:function(){},slotNames:["cordova"]})}else{_getJSON()}});function _domReady(){p.fill("ready")()}
function _waitForDeviceReady(){if(checks.indexOf("device")<0){return}
function _Q_init_deviceready_handler(){if(!Q.info)Q.info={};Q.info.isCordova=!0;Q.addEventListener(document,"click",function(e){var t=e.target,s;do{if(t&&t.nodeName==="A"&&t.href&&!t.outerHTML.match(/\Whref=[',"]#[',"]\W/)&&t.href.match(/^https?:\/\//)){e.preventDefault();s=(t.target==="_blank")?"_system":"_blank";root.open(t.href,s,"location=no")}}while((t=t.parentNode))});p.fill("device")()}
if(root.device){_Q_init_deviceready_handler()}else{Q.addEventListener(document,'deviceready',_Q_init_deviceready_handler,!1)}}
if(root.jQuery){Q.jQueryPluginPlugin();Q.onJQuery.handle(jQuery,[jQuery]);jQuery(document).ready(_domReady)}else{document.addEventListener("DOMContentLoaded",_domReady);var _timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(_timer);_domReady()}},10)}
_waitForDeviceReady();Q.handle(Q.beforeInit);Q.handle(Q.onInit)};Q.ready=function _Q_ready(){Q.loadNonce(function readyWithNonce(){_isReady=!0;if(Q.info.isLocalFile){var url=location.hash.queryField('url');if(url===undefined){Q.handle(Q.info.baseUrl)}else{Q.handle(url.indexOf(Q.info.baseUrl)==-1?Q.info.baseUrl+'/'+url:url)}
return}
Q.jQueryPluginPlugin();Q.onDOM.handle.call(root,root.jQuery);Q.activate(document.body,undefined,function _onReadyActivate(){Q.addEventListener(root,'hashchange',Q.onHashChange.handle);Q.addEventListener(root,'popstate',Q.onPopState.handle);Q.addEventListener(root,'resize',Q.layout);Q.addEventListener(root,'orientationchange',Q.layout);Q.addEventListener(root,'scroll',Q.onScroll.handle);_setLayoutInterval();Q.onReady.handle.call(root,root.jQuery);if(Q.info.isCordova&&navigator.splashscreen){navigator.splashscreen.hide()}
try{Q.Page.beingActivated=!0;Q.Page.onActivate('').handle(Q.info.url);if(Q.info&&Q.info.uri){var moduleSlashAction=Q.info.uri.module+"/"+Q.info.uri.action;Q.Page.onActivate(moduleSlashAction).handle();if(Q.info.uriString!==moduleSlashAction){Q.Page.onActivate(Q.info.uriString).handle()}}
Q.Page.beingActivated=!1}catch(e){debugger;Q.Page.beingActivated=!1;throw e}
if(location.hash.toString()){Q_hashChangeHandler()}});if(Q.info.uri&&Q.info.uri.module){var moduleSlashAction=Q.info.uri.module+"/"+Q.info.uri.action;try{Q.Page.beingLoaded=!0;Q.Page.onLoad('').handle();Q.Page.onLoad(moduleSlashAction).handle();if(Q.info.uriString!==moduleSlashAction){Q.Page.onLoad(Q.info.uriString).handle()}}catch(e){debugger;Q.Page.beingLoaded=!1;throw e}}
Q.Page.beingLoaded=!1})};Q.loadNonce=function _Q_loadNonce(callback,context,args){if(Q.nonce){Q.handle(callback,context,args);return}
var p1=Q.info.baseUrl&&Q.info.baseUrl.parseUrl();var p2=location.href.parseUrl();if(!p1||p1.host!==p2.host||(p1.scheme!==p2.scheme&&p2.scheme==='https')){Q.handle(callback,context,args);return}
Q.req('Q/nonce','data',function _Q_loadNonce_nonceLoaded(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){throw new Q.Error(msg)}
Q.nonce=Q.cookie('Q_nonce');if(Q.nonce){Q.handle(callback,context,args)}else{var action=Q.ajaxExtend(Q.action('Q/nonce'),'data');Q.formPost(action,{"just":"something"},'post',function afterFormPost(){Q.nonce=Q.cookie('Q_nonce');var reason=location.hostname.isIPAddress()?" Saving cookies to IP address is not supported.":"";if(!Q.nonce){alert("Our server couldn't set cookies in this browser."+reason)}})}},{"method":"post","skipNonce":!0})};Q.loadHandlebars=function _Q_loadHandlebars(callback){Q.onInit.addOnce(function(){Q.ensure(root.Handlebars,Q.url(Q.libraries.handlebars),function(){_addHandlebarsHelpers();callback()})})};Q.beforeUnload=function _Q_beforeUnload(notice){window.onbeforeunload=function(e){if(!notice)return undefined;e=e||window.event;if(e){e.returnValue=notice}
return notice}};Q.removeElement=function _Q_removeElement(element,removeTools){if(Q.isArrayLike(element)){return Q.each(element,function(){Q.removeElement(this,removeTools)})}
if(removeTools){Q.Tool.remove(element)}
for(var i=0,l=_layoutElements.length;i<l;++i){var p=_layoutElements[i];do{if(p===element){_layoutElements.splice(i,1);_layoutEvents.splice(i,1);--i;--l;break}}while(p=p.parentNode)}
if(root.jQuery){return jQuery(element).remove()}
if(!element.parentNode)return!1;element.parentNode.removeChild(element);try{for(var prop in element){delete element[prop]}}catch(e){}};var _supportsPassive;Q.addEventListener=function _Q_addEventListener(element,eventName,eventHandler,useCapture,hookStopPropagation){useCapture=useCapture||!1;if(Q.isPlainObject(eventName)){for(var k in eventName){Q.addEventListener(element,k,eventName[k],eventHandler)}
return}
var handler=(eventHandler.typename==="Q.Event"?eventHandler.eventListener=function _Q_addEventListener_wrapper(e){Q.handle(eventHandler,element,[e])}:eventHandler);if(typeof eventName==='string'){var split=eventName.split(' ');if(split.length>1){eventName=split}}
if(Q.isPlainObject(useCapture)){if(_supportsPassive===undefined){_supportsPassive=!1;if(Object.defineProperty){try{var opts=Object.defineProperty({},'passive',{get:function(){_supportsPassive=!0}});window.addEventListener("Qtest",_f,opts);window.removeEventListener("Qtest",_f)}catch(e){}}}
useCapture=_supportsPassive?useCapture:useCapture.capture}
if(typeof eventName==='function'){var params={original:eventHandler};var wrapper=eventName(params);if(!('eventName' in params)){throw new Q.Error("Custom $.fn.on handler: need to set params.eventName")}
eventHandler.Q_wrapper=wrapper;eventName=wrapper.eventName=params.eventName;eventHandler=wrapper}
if(!eventName){return}
if(Q.isArrayLike(eventName)){for(var i=0,l=eventName.length;i<l;++i){Q.addEventListener(element,eventName[i],eventHandler,useCapture,hookStopPropagation)}
return}
if(element===root&&detected.name==='explorer'&&detected.mainVersion<=8&&['mousedown','mouseup','click','dblclick'].indexOf(eventName)>=0){element=document}
if(element.addEventListener){element.addEventListener(eventName,handler,useCapture)}else if(element.attachEvent){element.attachEvent('on'+eventName,handler)}else{element["on"+eventName]=function(){if(element["on"+eventName]){element["on"+eventName].apply(this,arguments)}
eventHandler.apply(this,arguments)}}
if(hookStopPropagation){var args=[element,eventName,eventHandler,useCapture];var hooks=Q.addEventListener.hooks;for(var i=0,l=hooks.length;i<l;++i){var hook=hooks[i];if(hook[0]===element&&hook[1]===eventName&&hook[2]===eventHandler&&hook[3]===useCapture){hooks.splice(i,1);break}}
hooks.push(args)}
function _f(){}};Q.addEventListener.hooks=[];function _Q_Event_stopPropagation(){var event=this;Q.each(Q.addEventListener.hooks,function(){var element=this[0];var matches=element===root||element===document||(element instanceof Element&&element!==event.target&&element.contains(event.target));if(matches&&this[1]===event.type){this[2].apply(element,[event])}});var p=_Q_Event_stopPropagation.previous;if(p){p.apply(event,arguments)}else{event.cancelBubble=!1}}
_Q_Event_stopPropagation.previous=Event.prototype.stopPropagation;Event.prototype.stopPropagation=_Q_Event_stopPropagation;Q.removeEventListener=function _Q_removeEventListener(element,eventName,eventHandler,useCapture){useCapture=useCapture||!1;var handler=(eventHandler.typename==="Q.Event"?eventHandler.eventListener:eventHandler);if(typeof eventName==='string'){var split=eventName.split(' ');if(split.length>1){eventName=split}}
if(Q.isArrayLike(eventName)){for(var i=0,l=eventName.length;i<l;++i){Q.removeEventListener(element,eventName[i],eventHandler,useCapture)}
return}
if(!eventHandler){return!1}
if(typeof eventName==='function'){eventName=eventHandler.Q_wrapper&&eventHandler.Q_wrapper.eventName;if(!eventName){return!1}}
if(element===root&&detected.name==='explorer'&&detected.mainVersion<=8&&['mousedown','mouseup','click','dblclick'].indexOf(eventName)>=0){element=document}
if(element.removeEventListener){element.removeEventListener(eventName,handler,!1)}else if(element.detachEvent){element.detachEvent('on'+eventName,handler)}else{element["on"+eventName]=null}
var hooks=Q.addEventListener.hooks;for(var i=hooks.length-1;i>=0;--i){var hook=hooks[i];if(hook[0]===element&&hook[1]===eventName&&hook[2]===eventHandler&&hook[3]===useCapture){hooks.splice(i,1);break}}
return!0};Q.trigger=function _Q_trigger(eventName,element,args){var parts=eventName.split('.');Q.find(element||document.body,!0,function _Q_trigger_found(toolElement){_Q_trigger_recursive(Q.Tool.from(toolElement),eventName,args);return!1},null)};Q.layout=function _Q_layout(element){if(!(element instanceof Element)){element=null}
Q.each(_layoutElements,function(i,e){if(!element||element.contains(e)){var event=_layoutEvents[i];event.handle.call(event,e,element)}})};Q.isReady=function _Q_isReady(){return _isReady};Q.isOnline=function _Q_isOnline(){return _isOnline};Q.load=function _Q_load(plugins,callback,options){var urls=[];if(typeof plugins==='string'){plugins=plugins.split(' ').map(function(str){return str.trim()})}
Q.each(plugins,function(i,plugin){if(plugin&&!Q.plugins[plugin]){urls.push(Q.info.baseUrl+'/plugins/'+plugin+'/js/'+plugin+'.js')}});return Q.addScript(urls,callback,options)};Q.url=function _Q_url(what,fields,options){var what2=what||'';if(fields){for(var k in fields){if(fields[k]==null)continue;what2+='?'+encodeURIComponent(k)+'='+encodeURIComponent(fields[k])}}
if(options&&options.cacheBust){what2+="?Q.cacheBust="+Math.floor(Date.now()/options.cacheBust)}
var parts=what2.split('?');if(parts.length>2){what2=parts.slice(0,2).join('?')+'&'+parts.slice(2).join('&')}
var result='';var baseUrl=(options&&options.baseUrl)||Q.info.proxyBaseUrl||Q.info.baseUrl;if(!what){result=baseUrl+(what===''?'/':'')}else if(what2.isUrl()){result=what2}else{result=baseUrl+((what2.substr(0,1)=='/')?'':'/')+what2}
if(Q.url.options.beforeResult){var params={what:what2,fields:fields,result:result};Q.url.options.beforeResult.handle(params);result=params.result}
return result};Q.url.options={beforeResult:null};Q.action=function _Q_action(uri,fields,options){if(uri.isUrl()){return Q.url(uri,fields)}
return Q.url("action.php/"+uri,fields,options)};Q.ajaxExtend=function _Q_ajaxExtend(what,slotNames,options){if(!what&&what!==''){if(console&&('warn' in console)){console.warn('Q.ajaxExtend received empty url')}
return ''}
options=options||{};var slotNames2=(typeof slotNames==='string')?slotNames:Q.extend([],slotNames).join(',');var idPrefixes=options?((typeof options.idPrefixes==='string')?options.idPrefixes:(options.idPrefixes&&options.idPrefixes.join(','))):'';var timestamp=Date.now();var ajax=options.iframe?'iframe':(options.loadExtras?'loadExtras':'json');if(typeof what=='string'){var p=what.split('#');var what2=p[0];if(Q.info&&Q.info.baseUrl===what2){what2+='/'}
what2+=(what2.indexOf('?')<0)?'?':'&';what2+=encodeURI('Q.ajax='+ajax);if(options.timestamp){what2+=encodeURI('&Q.timestamp=')+encodeURIComponent(timestamp)}
if(slotNames2!=null){what2+=encodeURI('&Q.slotNames=')+encodeURIComponent(slotNames2)}
if(idPrefixes){what2+=encodeURI('&Q.idPrefixes=')+encodeURIComponent(idPrefixes)}
if(options){if(typeof options.callback==='string'){what2+=encodeURI('&Q.callback=')+encodeURIComponent(options.callback)}
if('echo' in options){what2+=encodeURI('&Q.echo=')+encodeURIComponent(options.echo)}
if(options.method){what2+=encodeURI('&Q.method='+encodeURIComponent(options.method.toUpperCase()))}}
if(Q.nonce!==undefined){what2+=encodeURI('&Q.nonce=')+encodeURIComponent(Q.nonce)}
what2=(p[1]?what2+'#'+p[1]:what2)}else{var what2={};for(var k in what){what2[k]=what[k]}
what2["Q.ajax"]=ajax;if(options.timestamp){what2["Q.timestamp"]=timestamp}
if(slotNames){what2["Q.slotNames"]=slotNames2}
if(options){if(options.callback){what2["Q.callback"]=options.callback}
if('echo' in options){what2["Q.echo"]=options.echo}
if(options.method){what2["Q.method"]=options.method}}
if('nonce' in Q){what2["Q.nonce"]=Q.nonce}}
return what2};Q.req=function _Q_req(uri,slotNames,callback,options){if(typeof options==='string'){options={'method':options}}
var args=arguments,index=(typeof arguments[0]==='string')?0:1;args[index]=Q.action(args[index],null,options);return Q.request.apply(this,args)};Q.request=function(url,slotNames,callback,options){var fields,delim;if(typeof url==='object'){fields=arguments[0];url=arguments[1];slotNames=arguments[2];callback=arguments[3];options=arguments[4];delim=(url.indexOf('?')<0)?'?':'&';url+=delim+Q.queryString(fields)}
if(typeof slotNames==='function'){options=callback;callback=slotNames;slotNames=[]}else if(typeof slotNames==='string'){slotNames=slotNames.split(',')}
var o=Q.extend({},Q.request.options,options);if(o.skipNonce){return _Q_request_makeRequest.call(this,url,slotNames,callback,o)}else{Q.loadNonce(_Q_request_makeRequest,this,[url,slotNames,callback,o])}
function _Q_request_makeRequest(url,slotNames,callback,o){var request=new Q.Request(url,slotNames,callback,o);var tout=!1,t={};if(o.timeout!==!1){tout=o.timeout||1500}
function _Q_request_callback(err,content,wasJsonP){if(err){callback(err);Q.handle(o.onProcessed,this,[err]);return}
var data=content;if(o.parse!==!1){try{if(wasJsonP){data=content}else{data=JSON.parse(content)}}catch(e){console.warn('Q.request('+url+',['+slotNames+']):'+e);err={"errors":[e]};callback(e,content);return Q.handle(o.onProcessed,this,[e,content])}}
var redirected=!1;if(data&&data.redirect&&data.redirect.url){Q.handle(o.onRedirect,Q,[data.redirect.url]);redirected=!0}
callback&&callback.call(this,err,data,redirected);Q.handle(o.onProcessed,this,[err,data,redirected])};function _onStart(){Q.handle(o.onLoadStart,this,[url,slotNames,o]);if(tout!==!1){t.timeout=setTimeout(_onTimeout,tout)}}
function _onTimeout(){if(!t.loaded){Q.handle(o.onShowCancel,this,[_onCancel,o]);if(o.onTimeout){o.onTimeout(_onCancel)}}}
function _onResponse(data,wasJsonP){t.loaded=!0;if(t.timeout){clearTimeout(t.timeout)}
Q.handle(o.onLoadEnd,request,[url,slotNames,o]);if(!t.cancelled){o.onResponse.handle.call(request,data,wasJsonP);_Q_request_callback.call(request,null,data,wasJsonP)}}
function _onCancel(status,msg){status=Q.isInteger(status)?status:null;var defaultError=status?Q.text.Q.request.error:Q.text.Q.request.canceled;msg=(msg||Q.text.Q.request[status]||defaultError).interpolate({'status':status,'url':url})
t.cancelled=!0;_onResponse();var errors={errors:[{message:msg||"Request was canceled",code:status}]};o.onCancel.handle.call(this,errors,o);_Q_request_callback.call(this,errors,errors)}
function xhr(onSuccess,onCancel){if(o.extend!==!1){url=Q.ajaxExtend(url,slotNames,overrides)}
var xmlhttp;if(root.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{xmlhttp=new root.ActiveXObject("Microsoft.XMLHTTP")}
xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){onSuccess.call(xmlhttp,xmlhttp.responseText)}else{console.log("Q.request xhr: "+xmlhttp.status+' '+xmlhttp.responseText.substr(1000));onCancel.call(xmlhttp,xmlhttp.status)}}};if(typeof o.xhr==='function'){o.xhr.call(xmlhttp,xmlhttp,options)}
var sync=(o.xhr==='sync');if(Q.isPlainObject(o.xhr)){Q.extend(xmlhttp,o.xhr);sync=sync||xmlhttp.sync}
var content=Q.queryString(o.fields);request.xmlhttp=xmlhttp;if(verb==='GET'){xmlhttp.open('GET',url+(content?'&'+content:''),!sync);xmlhttp.send()}else{xmlhttp.open(verb,url,!sync);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(content)}
return url}
var method=o.method||'GET';var verb=method.toUpperCase();var overrides={loadExtras:!!o.loadExtras};if(verb!=='GET'){verb='POST';overrides.method=o.method}
if(o.form){if(o.extend!==!1){overrides.iframe=!0;o.fields=Q.ajaxExtend(o.fields||{},slotNames,overrides)}
Q.formPost(url,o.fields,o.method,{form:o.form,onLoad:function(iframe){var resultFunction=o.resultFunction?Q.getObject(o.resultFunction,iframe.contentWindow):null;var result=resultFunction?resultFunction():undefined;_Q_request_callback.call(request,null,result,!0)}});return}
if(!o.query&&o.xhr!==!1&&Q.url(url).search(Q.info.baseUrl)===0){_onStart();return xhr(_onResponse,_onCancel)}
var i=Q.request.callbacks.length;var url2=url;if(callback){Q.request.callbacks[i]=function _Q_request_JSONP(data){delete Q.request.callbacks[i];Q.removeElement(script);_onResponse(data,!0)};if(o.callbackName){url2=url+(url.indexOf('?')<0?'?':'&')+encodeURIComponent(o.callbackName)+'='+encodeURIComponent('Q.request.callbacks['+i+']')}else{url2=(o.extend===!1)?url:Q.ajaxExtend(url,slotNames,Q.extend(o,{callback:'Q.request.callbacks['+i+']'}))}}else{url2=(o.extend===!1)?url:Q.ajaxExtend(url,slotNames,o)}
if(options.fields){delim=(url.indexOf('?')<0)?'?':'&';url2+=delim+Q.queryString(options.fields)}
if(!o.query){var script=Q.addScript(url2,null,{'duplicate':o.duplicate})}
return url2}};Q.request.callbacks=[];Q.firstErrorMessage=function _Q_firstErrorMessage(data){var error=null;for(var i=0;i<arguments.length;++i){var d=arguments[i];if(Q.isEmpty(d)){continue}
if(d.errors&&d.errors[0]){error=d.errors[0]}else if(d.error){error=d.error}else if(Q.isArrayLike(d)){error=d[0]}else if(!i){error=d}
if(error){break}}
if(!error){return null}
return(typeof error==='string')?error:(error.message?error.message:JSON.stringify(error))};Q.ajaxErrors=function _Q_ajaxErrors(errors,fields){var result={};var e,f,i,j;if(fields&&typeof fields==='string'){fields=[fields]}
for(i=0;i<errors.length;++i){e=!1;if((f=errors[i].fields)){for(j=0;j<f.length;++j){if(fields&&fields.indexOf(f[j])<0){continue}
result[f[j]]=errors[i].message;e=!0}}
if(!e&&fields){result[fields[0]]=errors[i].message}}
return result};Q.jsonRequest=Q.request;Q.queryString=function _Q_queryString(fields,keys,returnAsObject){if(Q.isEmpty(fields)){return ''}
if(typeof fields==='string'){return fields}
if(fields instanceof Element){if(fields.tagName.toUpperCase()!=='FORM'){throw new Q.Error("Q.queryString: element must be a FORM")}
var result='';Q.each(fields.querySelectorAll('input, textarea, select'),function(){var value=(this.tagName.toUpperCase()==='SELECT')?this.options[this.selectedIndex].text:this.value;result+=(result?'&':'')+this.getAttribute('name')+'='+encodeURIComponent(value)});return result}
var parts=[];function _params(prefix,obj){if(obj==undefined){return}
if(Q.typeOf(obj)==="array"){Q.each(obj,function _Q_param_each(i,value){if(/\[\]$/.test(prefix)){_add(prefix,value)}else{_params(prefix+"["+(Q.typeOf(value)==="object"||Q.typeOf(value)==="array"?i:"")+"]",value,_add)}})}else if(obj&&Q.typeOf(obj)==="object"){for(var name in obj){_params(prefix+"["+name+"]",obj[name],_add)}}else{_add(prefix,obj)}}
var result={};function _add(key,value){value=Q.typeOf(value)==="function"?value():value;if(value==undefined)return;if(returnAsObject){result[key]=value}else{parts.push(encodeURIComponent(key)+"="+encodeURIComponent(value))}}
if(keys){Q.each(keys,function _Q_param_each(i,field){_params(field,fields[field])})}else{Q.each(fields,function _Q_param_each(field,value){_params(field,value)})}
return returnAsObject?result:parts.join("&").replace(/%20/g,"+")};Q.formPost=function _Q_formPost(action,fields,method,options){if(typeof options==='function'){options={onLoad:options}}else if(options===!0){options={straight:!0}}else{options=options||{}}
var o=Q.copy(options);if(action&&typeof action.action==='string'){o.form=action;action=action.action;method=form.method}else if(o.form){method=method||o.form.method||"POST";action=action||o.form.action||""}else{method=method||"POST";action=action||""}
method=method.toUpperCase();var onload;if(o.onLoad){onload=(o.onLoad.typename==='Q.Event')?o.onLoad.handle:o.onLoad}
var name=o.target,iframeProvided=o.iframe,iframe;if(!name){iframe=o.iframe;if(iframe){name=iframe.getAttribute('name')}
if(!name){name='Q_formPost_iframe_'+(++Q.formPost.counter%1000)}
if(!o.iframe){iframe=options.iframe=document.createElement('iframe');iframe.width=iframe.height=iframe.marginWidth=iframe.marginHeight=0}
iframe.setAttribute("name",name);iframe.setAttribute("id",name)}
var form=o.form,oldMethod,oldAction;if(form){oldMethod=form.method;oldAction=form.action}else{form=document.createElement('form')}
form.setAttribute("method",method);form.setAttribute("action",action);var hiddenFields=[];var fields2=Q.queryString(fields,null,!0);for(var key in fields2){if(fields2.hasOwnProperty(key)){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden");hiddenField.setAttribute("name",key);hiddenField.setAttribute("value",fields2[key]);form.appendChild(hiddenField);hiddenFields.push(hiddenField)}}
if(iframe&&!iframeProvided){document.body.appendChild(iframe)}
if(iframe){Q.addEventListener(iframe,'load',function _Q_formPost_loaded(){Q.handle(onload,this,[iframe]);if(!iframeProvided&&iframe.parentNode){Q.removeElement(iframe)}})}
if(!o.form)document.body.appendChild(form);if(!o.straight){form.setAttribute("target",name)}
form.submit();setTimeout(function(){if(!o.form){Q.removeElement(form)}else{for(var i=hiddenFields.length-1;i>=0;--i){Q.removeElement(hiddenFields[i])}
form.action=oldAction;form.method=oldMethod}},0)};Q.formPost.counter=0;Q.addScript=function _Q_addScript(src,onload,options){function stateChangeInIE(){var script;while(_pendingIEScripts[0]&&(_pendingIEScripts[0].readyState=='loaded'||_pendingIEScripts[0].readyState=='complete')){script=_pendingIEScripts.shift();script.onreadystatechange=null;container.appendChild(script);onload2(null,script,script.src)}}
function onload2(e,s,u){var cb;if(('readyState' in this)&&(this.readyState!=='complete'&&this.readyState!=='loaded')){return}
if(s){script=s;src=u}else if(onload2.executed){return}
Q.addScript.loaded[src]=!0;while((cb=Q.addScript.onLoadCallbacks[src].shift())){Q.nonce=Q.nonce||Q.cookie('Q_nonce');cb.call(this)}
script.onload=script.onreadystatechange=null;onload2.executed=!0}
function onerror2(e){if(o.ignoreLoadingErrors){return onload2(e)}
if(onerror2.executed){return}
var cb;Q.addScript.loaded[src]=!1;if(Q.addScript.onErrorCallbacks[src]){while((cb=Q.addScript.onErrorCallbacks[src].shift())){cb.call(this)}}
onerror2.executed=!0}
function _onload(){Q.addScript.loaded[src]=!0;if(root.jQuery&&!Q.onJQuery.occurred){Q.onJQuery.handle(jQuery,[jQuery])}
Q.jQueryPluginPlugin();onload()}
var p,ret=[];if(!onload){onload=function(){}}
if(Q.isArrayLike(src)){var srcs=[];Q.each(src,function(i,src){if(!src)return;srcs.push((src&&src.src)?src.src:src)});if(Q.isEmpty(srcs)){onload();return[]}
p=new Q.Pipe(srcs,onload);Q.each(srcs,function(i,src){ret.push(Q.addScript(src,p.fill(src),options))});return ret}
var o=Q.extend({},Q.addScript.options,options),firstScript=document.scripts?document.scripts[0]:document.getElementsByTagName('script')[0],container=o.container||document.head||document.getElementsByTagName('head')[0];if(!onload){onload=function(){}}
var script,i;_onload.loaded={};src=(src&&src.src)?src.src:src;if(!src){return null}
src=Q.url(src);if(!o||!o.duplicate){var scripts=document.getElementsByTagName('script');var ieStyle=_pendingIEScripts.length;if(ieStyle){var arr=[].concat(_pendingIEScripts);for(i=0;i<scripts.length;++i){arr.push(scripts[i])}
scripts=arr}
for(i=0;i<scripts.length;++i){script=scripts[i];if(script.getAttribute('src')!==src){continue}
p=scripts[i];var outside=!0;while(p=p.parentNode){if(p===container){outside=!1;break}}
if(outside&&!ieStyle){container.appendChild(script)}
if(Q.addScript.loaded[src]){_onload();return o.returnAll?script:!1}
if(Q.addScript.loaded[src]===!1){if(o.ignoreLoadingErrors){_onload()}else if(o.onError){o.onError.call(script)}
return o.returnAll?script:!1}
if(!Q.addScript.added[src]&&(!('readyState' in script)||(script.readyState!=='complete'||script.readyState!=='loaded'))){_onload();return o.returnAll?script:!1}
if(!Q.addScript.onLoadCallbacks[src]){Q.addScript.onLoadCallbacks[src]=[]}
if(!Q.addScript.onErrorCallbacks[src]){Q.addScript.onErrorCallbacks[src]=[]}
Q.addScript.onLoadCallbacks[src].push(onload);if(o.onError){Q.addScript.onErrorCallbacks[src].push(o.onError)}
if(!scripts[i].wasProcessedByQ){scripts[i].onload=onload2;scripts[i].onreadystatechange=onload2;Q.addEventListener(script,'error',onerror2);scripts[i].wasProcessedByQ=!0}
return o.returnAll?script:!1}}
script=document.createElement('script');script.setAttribute('type','text/javascript');Q.addScript.added[src]=!0;Q.addScript.onLoadCallbacks[src]=[_onload];Q.addScript.onErrorCallbacks[src]=[];if(o.onError){Q.addScript.onErrorCallbacks[src].push(o.onError)}
script.onload=onload2;script.wasProcessedByQ=!0;Q.addEventListener(script,'error',onerror2);if('async' in script){script.setAttribute('src',src);script.async=!1;container.appendChild(script)}else if(firstScript.readyState){_pendingIEScripts.push(script);script.onreadystatechange=stateChangeInIE;script.src=src}else{script.setAttribute('defer','defer');script.setAttribute('src',src);container.appendChild(script)}
return script};Q.addScript.onLoadCallbacks={};Q.addScript.onErrorCallbacks={};Q.addScript.added={};Q.addScript.loaded={};var _pendingIEScripts=[];Q.addScript.options={duplicate:!1,ignoreLoadingErrors:!1};Q.findScript=function(src){var scripts=document.getElementsByTagName('script');src=Q.url(src);for(var i=0;i<scripts.length;++i){if(scripts[i].getAttribute('src')===src){return scripts[i]}}
return null};Q.addStylesheet=function _Q_addStylesheet(href,media,onload,options){var i;options=options||{};if(typeof media==='function'){onload=media;media=undefined}
if(!onload){onload=function _onload(){}}
if(Q.isArrayLike(href)){var ret=[];var len=href.length;for(i=0;i<len;++i){ret.push(Q.addStylesheet(href[i].href||href[i],href[i].media))}
return ret}
var container=options.container||document.getElementsByTagName('head')[0];if(!href){onload(!1);return!1}
href=Q.url(href);if(!media)media='screen,print';var links=document.getElementsByTagName('link');for(i=0;i<links.length;++i){if(links[i].getAttribute('href')!==href)continue;var p=links[i],outside=!0;while(p=p.parentNode){if(p===container){outside=!1;break}}
if(outside){container.appendChild(links[i])}
if(Q.addStylesheet.loaded[href]||!Q.addStylesheet.added[href]){onload();return options.returnAll?links[i]:!1}
if(Q.addStylesheet.onLoadCallbacks[href]){Q.addStylesheet.onLoadCallbacks[href].push(onload)}else{Q.addStylesheet.onLoadCallbacks[href]=[onload]}
links=document.getElementsByTagName('link');for(var j=0;j<links.length;++j){if(links[j].href!==href)continue;if(Q.info.isAndroidStock){onload2.call(links[j])}else{links[j].onload=onload2;links[j].onreadystatechange=onload2}
break}
return options.returnAll?links[i]:!1}
function onload2(){if(onload2.executed){return}
if(('readyState' in this)&&(this.readyState!=='complete'&&this.readyState!=='loaded')){return}
Q.addStylesheet.loaded[href]=!0;var cb;while((cb=Q.addStylesheet.onLoadCallbacks[href].shift())){cb.call(this)}
onload2.executed=!0}
var link=document.createElement('link');link.setAttribute('rel','stylesheet');link.setAttribute('type','text/css');link.setAttribute('media',media);Q.addStylesheet.added[href]=!0;Q.addStylesheet.onLoadCallbacks[href]=[onload];link.onload=onload2;link.onreadystatechange=onload2;link.setAttribute('href',href);container.appendChild(link);return link};Q.addStylesheet.onLoadCallbacks={};Q.addStylesheet.added={};Q.addStylesheet.loaded={};Q.findStylesheet=function(href){var links=document.getElementsByTagName('link');href=Q.url(href);for(var i=0;i<links.length;++i){if(links[i].getAttribute('rel').toLowerCase()!=='stylesheet'){continue}
if(links[i].getAttribute('href')===href){return links[i]}}
return null};Q.cookie=function _Q_cookie(name,value,options){var parts;options=options||{};if(typeof value!='undefined'){var path,domain='';parts=Q.info.baseUrl.split('://');if('path' in options){path=';path='+options.path}else{path=';path=/'+parts[1].split('/').slice(1).join('/')}
if('domain' in options){domain=';domain='+options.domain}else{var hostname=parts[1].split('/').shift();domain=';domain='+(hostname.isIPAddress()?'':'.')+hostname}
if(value===null){document.cookie=encodeURIComponent(name)+'=;expires=Thu, 01-Jan-1970 00:00:01 GMT'+path+domain;return null}
var expires='';if(options.expires){expires=new Date();expires.setTime((new Date()).getTime()+options.expires);expires=';expires='+expires.toGMTString()}
document.cookie=encodeURIComponent(name)+'='+encodeURIComponent(value)+expires+path+domain;return null}
var cookies=document.cookie.split(';'),result;for(var i=0;i<cookies.length;++i){parts=cookies[i].split('=');result=parts.splice(0,1);result.push(parts.join('='));if(decodeURIComponent(result[0].trim())===name){return result.length<2?null:decodeURIComponent(result[1])}}
return null};Q.sessionName=function(){return Q.info.sessionName||'Q_sessionId'};Q.sessionId=function(){return Q.cookie(Q.sessionName())};Q.clientId=function(){var storage=sessionStorage;if(Q.clientId.value=storage.getItem("Q\tclientId")){return Q.clientId.value}
var detected=Q.Browser.detect();var code=Math.floor(Date.now()/1000)*1000+Math.floor(Math.random()*1000);var ret=Q.clientId.value=(detected.device||"desktop").substr(0,4)+"-"+Q.normalize(detected.OS.substr(0,3))+"-"+Q.normalize(detected.name.substr(0,3))+"-"+detected.mainVersion+(detected.isWebView?"n":"w")+"-"+code.toString(36);storage.setItem("Q\tclientId",ret);return ret};Q.uuid=function(){return Q.uuid.value=Q.uuid.value||'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16)})};Q.find=function _Q_find(elem,filter,callbackBefore,callbackAfter,options,shared,parent,index){var i;if(!elem){return}
if(filter===!0){filter='q_tool'}
if((Q.isArrayLike(elem)&&!Q.instanceOf(elem,Element))||(typeof HTMLCollection!=='undefined'&&(elem instanceof root.HTMLCollection))||(root.jQuery&&(elem instanceof jQuery))){Q.each(elem,function _Q_find_array(i){if(!1===Q.find(this,filter,callbackBefore,callbackAfter,options,shared,parent,i)){return!1}});return}
var found=(filter===null);if(!found&&('className' in elem)&&typeof elem.className==="string"&&elem.className){var classNames=elem.className.split(' ');for(i=classNames.length-1;i>=0;--i){var className=Q.normalize(classNames[i]);if(((typeof filter==='string')&&(filter===className))||((filter instanceof RegExp)&&filter.test(className))||((typeof filter==='function'&&filter(className)))){found=!0;break}}}
if(!found&&elem.attributes){for(i=elem.attributes.length-1;i>=0;--i){var attribute=elem.attributes[i].name;if(((typeof filter==='string')&&(filter===attribute))||((filter instanceof RegExp)&&filter.test(attribute))||((typeof filter==='function'&&filter(attribute)))){found=!0;break}}}
var ret;if(found&&typeof callbackBefore=='function'){ret=callbackBefore(elem,options,shared,parent,index);if(ret===!1){return!1}}
if(ret!==!0){var children;if('children' in elem){children=elem.children}else{children=elem.childNodes}
var c=[];if(children){for(i=0;i<children.length;++i){c[i]=children[i]}}
ret=Q.find(c,filter,callbackBefore,callbackAfter,options,shared,elem);if(ret===!1){return!1}}
if(found&&typeof callbackAfter=='function'){if(!1===callbackAfter(elem,options,shared,parent,index)){return!1}}};Q.activate=function _Q_activate(elem,options,callback){if(!elem){return}
var ba,tool;if(Q.typeOf(elem)==='Q.Tool'){tool=elem;ba=Q.Tool.beingActivated;Q.Tool.beingActivated=tool;elem=tool.element}
Q.beforeActivate.handle.call(root,elem);var shared={tool:null,tools:{},waitingForTools:[],pipe:Q.pipe()};if(typeof options==='function'){callback=options;options=undefined}
Q.find(elem,!0,_activateTools,_initTools,options,shared);shared.pipe.add(shared.waitingForTools,1,_activated).run();Q.Tool.beingActivated=ba;function _activated(){var tool=shared.firstTool||shared.tool;if(callback){Q.handle(callback,tool,[elem,options,shared.tools])}
Q.handle(Q.onActivate,tool,[elem,options,shared.tools])}};Q.replace=function _Q_replace(container,source,options){if(!source){var c;while(c=container.lastChild){Q.removeElement(c,!0)}
return container}
options=Q.extend({},Q.replace.options,options);if(Q.typeOf(source)==='string'){var s=document.createElement('div');s.innerHTML=source;source=s}
var replaceElements;if(options.replaceElements){replaceElements=[];Q.each(options.replaceElements,function(i,e){replaceElements.push(typeof e==='string'?document.getElementById(e):e)})}
var retainedTools={};var newOptions={};var incomingElements={};Q.find(source.childNodes,null,function(incomingElement){var id=incomingElement.id;var element=id&&document.getElementById(id);if(element&&element.getAttribute('data-Q-retain')!==null&&!incomingElement.getAttribute('data-Q-replace')!==null){incomingElements[incomingElement.id]=incomingElement;incomingElement.parentNode.replaceChild(element,incomingElement);for(var name in element.Q.tools){var tool=Q.Tool.from(element,name);var attrName='data-'+Q.normalize(tool.name,'-');var newOptionsString=incomingElement.getAttribute(attrName);element.setAttribute(attrName,newOptionsString);retainedTools[id]=tool;newOptions[id]=JSON.parse(newOptionsString)}}});Q.beforeReplace.handle(container,source,options,newOptions,retainedTools);var c;while(c=container.lastChild){Q.removeElement(c,!0)}
var c;while(c=source.childNodes[0]){container.appendChild(c)}
for(var id in retainedTools){var tool=retainedTools[id];var newOpt=newOptions[id];Q.handle(tool.Q.onRetain,tool,[newOptions,incomingElements[id]]);Q.extend(tool.state,10,newOptions)}
return container};var _latestLoadUrlObjects={};Q.loadUrl=function _Q_loadUrl(url,options){url=Q.url(url);var o=Q.extend({},Q.loadUrl.options,options);var handler=o.handler;var slotNames=o.slotNames;if(typeof slotNames==='string'){slotNames=slotNames.split(',')}
if(o.retainSlots){var arr=[],i,l=slotNames.length;for(i=0;i<l;++i){var slotName=slotNames[i];if(!o.retainSlots[slotName]||!Q.loadUrl.retainedSlots[slotName]){arr.push(slotName)}}
slotNames=arr}
var parts=url.split('#');var urlToLoad=(parts[1]&&parts[1].queryField('url'))||parts[0];var loader=Q.request;var onActivate,onError;if(o.loader){loader=o.loader}
if(o.onError){onError=o.onError}
if(o.onActivate){onActivate=o.onActivate}
var _loadUrlObject={};_latestLoadUrlObjects[o.key]=_loadUrlObject;loader(urlToLoad,slotNames,loadResponse,o);function loadResponse(err,response,redirected){if(_loadUrlObject!=_latestLoadUrlObjects[o.key]){return}
if(err){return Q.handle(onError,this,[Q.firstErrorMessage(err)])}
if(!response){return Q.handle(onError,this,["Response is empty",response])}
if(response.errors){return Q.handle(onError,this,[response.errors[0].message])}
Q.handle(o.onLoad,this,[response]);if(redirected){return}
Q.Page.beingProcessed=!0;loadTemplates();var newScripts;if(!o.ignoreDialogs){while(Q.Dialogs.dialogs.length){Q.Dialogs.pop()}}
if(o.ignorePage){newScripts=[];afterScripts()}else{newScripts=loadScripts(afterScripts)}
function afterScripts(){var moduleSlashAction=Q.info.uri.module+"/"+Q.info.uri.action;var i,newStylesheets,newStyles;function _doEvents(prefix,moduleSlashAction){var event,f=Q.Page[prefix+'Unload'];if(Q.info&&Q.info.uri){event=f("Q\t"+moduleSlashAction);event.handle(url,o);event.removeAllHandlers();event=f(moduleSlashAction);event.handle(url,o);if(Q.info.uriString!==moduleSlashAction){event=f("Q\t"+Q.info.uriString);event.handle(url,o);event.removeAllHandlers();event=f(Q.info.uriString);event.handle(url,o)}}
event=f("Q\t");event.handle(url,o);event.removeAllHandlers();event=f('');event.handle(url,o)}
function _activatedSlot(){if(_activatedSlot.remaining!==undefined&&--_activatedSlot.remaining>0){return}
Q.each([newStylesheets,newStyles,newScripts],function(i,collection){Q.each(collection,function(slotName,arr){if(!slotName)return;Q.each(arr,function(i,element){if(!element)return;element.setAttribute('data-slot',slotName);if(element.tagName.toUpperCase()==='LINK'){processStylesheets.slots[element.getAttribute('href')]=slotName}})})});if(!o.ignorePage){try{Q.Page.beingActivated=!0;Q.Page.onActivate('').handle(url,o);if(Q.info&&Q.info.uri){var moduleSlashAction=Q.info.uri.module+"/"+Q.info.uri.action;Q.Page.onActivate(moduleSlashAction).handle(url,o);if(Q.info.uriString!==moduleSlashAction){Q.Page.onActivate(Q.info.uriString).handle(url,o)}}
Q.Page.beingActivated=!1}catch(e){debugger;Q.Page.beingActivated=!1;throw e}}
if(root.StyleFix){root.StyleFix.process()}
Q.Page.beingProcessed=!1;Q.handle(onActivate,this,[domElements])}
function afterStyles(){if(!o.ignorePage&&Q.info&&Q.info.uri){Q.Page.onLoad(moduleSlashAction).occurred=!1;Q.Page.onActivate(moduleSlashAction).occurred=!1;if(Q.info.uriString!==Q.moduleSlashAction){Q.Page.onLoad(Q.info.uriString).occurred=!1;Q.Page.onActivate(Q.info.uriString).occurred=!1}}
if(response.scriptData){Q.each(response.scriptData,function _Q_loadUrl_scriptData_each(slot,data){Q.each(data,function _Q_loadUrl_scriptData_assign(k,v){Q.setObject(k,v)})})}
if(response.scriptLines){for(i in response.scriptLines){if(response.scriptLines[i]){eval(response.scriptLines[i])}}}
if(!o.ignorePage){try{Q.Page.beingLoaded=!0;Q.Page.onLoad('').handle(url,o);if(Q.info&&Q.info.uri){moduleSlashAction=Q.info.uri.module+"/"+Q.info.uri.action;Q.Page.onLoad(moduleSlashAction).handle(url,o);if(Q.info.uriString!==moduleSlashAction){Q.Page.onLoad(Q.info.uriString).handle(url,o)}}
Q.Page.beingLoaded=!1}catch(e){debugger;Q.Page.beingLoaded=!1;throw e}}
if(Q.isEmpty(domElements)){_activatedSlot()}else if(Q.isPlainObject(domElements)){_activatedSlot.remaining=Object.keys(domElements).length;for(var slotName in domElements){Q.activate(domElements[slotName],undefined,_activatedSlot)}}else{Q.activate(domElements,undefined,_activatedSlot)}}
if(!o.ignorePage){_doEvents('before',moduleSlashAction);while(Q.Event.forPage&&Q.Event.forPage.length){Q.Event.forPage[0].remove(!0)}
var p=Q.Event.jQueryForPage;for(i=p.length-1;i>=0;--i){var off=p[i][0];root.jQuery.fn[off].call(p[i][1],p[i][2],p[i][3])}
Q.Event.jQueryForPage=[]}
if(!o.ignoreHistory){Q.Page.push(url)}
if(!o.ignorePage){Q.each(['link','style','script'],function(i,tag){if(tag!=='style'&&!o.loadExtras){return}
Q.each(document.getElementsByTagName(tag),function(k,e){if(tag==='link'&&e.getAttribute('rel').toLowerCase()!='stylesheet'){return}
var slot=e.getAttribute('data-slot');if(slot&&slotNames.indexOf(slot)>=0){var found=!1;if(response.stylesheets&&response.stylesheets[slot]){var stylesheets=response.stylesheets[slot];for(var i=0,l=stylesheets.length;i<l;++i){var stylesheet=stylesheets[i];if(stylesheet.href===e.href&&(!stylesheet.media||stylesheet.media===e.media)){found=!0;break}}}
if(!found){Q.removeElement(e)}}
if(tag==='style'){var href=e.getAttribute('data-href');if(slotNames.indexOf(processStylesheets.slots[href])>=0){Q.removeElement(e);delete processStylesheets.slots[href]}}})})}
var domElements=handler(response,url,o);if(o.ignorePage){newStylesheets=[];afterStylesheets()}else{_doEvents('on',moduleSlashAction);newStylesheets=loadStylesheets(afterStylesheets)}
function afterStylesheets(){var newStyles=loadStyles();afterStyles();if(!o.ignoreHash&&parts[1]&&history.pushState){var e=document.getElementById(parts[1]);if(e){location.hash=parts[1]}}}}
function loadStylesheets(callback){if(!response.stylesheets){return null}
var newStylesheets={};var keys=Object.keys(response.stylesheets);if(response.stylesheets[""]){keys.splice(keys.indexOf(""),1);keys.unshift("")}
var waitFor=[];var slotPipe=Q.pipe();Q.each(keys,function(i,slotName){var stylesheets=[];for(var j in response.stylesheets[slotName]){var stylesheet=response.stylesheets[slotName][j];if(root.StyleFix&&(stylesheet.href in processStylesheets.slots)){continue}
var key=slotName+'\t'+stylesheet.href+'\t'+stylesheet.media;var elem=Q.addStylesheet(stylesheet.href,stylesheet.media,slotPipe.fill(key),{returnAll:!1});if(elem){stylesheets.push(elem)}
waitFor.push(key)}
newStylesheets[slotName]=stylesheets});slotPipe.add(waitFor,function _Q_loadUrl_pipe_slotNames(){callback()}).run();return newStylesheets}
function loadStyles(){if(!response.stylesInline){return null}
var newStyles={},head=document.head||document.getElementsByTagName('head')[0];var keys=Object.keys(response.stylesInline);if(response.stylesInline[""]){keys.splice(keys.indexOf(""),1);keys.unshift("")}
Q.each(keys,function(i,slotName){var styles=response.stylesInline[slotName];if(!styles)return;var style=document.createElement('style');style.setAttribute('type','text/css');style.setAttribute('data-slot',slotName);if(style.styleSheet){style.styleSheet.cssText=styles}else{style.appendChild(document.createTextNode(styles))}
head.appendChild(style);newStyles[slotName]=[style]});return newStyles}
function loadTemplates(){if(!response.templates){return null}
var slotName,newTemplates={};for(slotName in response.templates){newTemplates[slotName]=[];Q.each(response.templates[slotName],function(i){newTemplates[slotName].push(Q.Template.set(this.name,this.content,this.type))})}
return newTemplates}
function loadScripts(callback){if(!response.scripts){callback();return null}
var slotPipe=Q.pipe(Object.keys(response.scripts),function _Q_loadUrl_pipe_slotNames(){callback()});var newScripts={};var keys=Object.keys(response.scripts);if(response.scripts[""]){keys.splice(keys.indexOf(""),1);keys.unshift("")}
Q.each(keys,function(i,slotName){var elem=Q.addScript(response.scripts[slotName],slotPipe.fill(slotName),{ignoreLoadingErrors:o.ignoreLoadingErrors,returnAll:!1});if(elem){newScripts[slotName]=elem}});return newScripts}}};Q.loadUrl.retainedSlots={};Q.loadUrl.saveScroll=function _Q_loadUrl_saveScroll(url){var slotNames=Q.info.slotNames,l,elem,i;if(typeof slotNames==='string'){slotNames=slotNames.split(',')}
l=slotNames.length;for(i=0;i<l;++i){if((elem=document.getElementById(slotNames[i]+"_slot"))&&('scrollLeft' in elem)){Q.setObject(['Q','scroll',url],{left:elem.scrollLeft,top:elem.scrollTop},elem)}}};Q.handle=function _Q_handle(callables,context,args,options){if(!callables){return 0}
if(!context)context=root;if(!args)args=[];var i=0,count=0,k,result;if(callables===location)callables=location.href;switch(Q.typeOf(callables)){case 'function':result=callables.apply(context,args);if(result===!1)return!1;return 1;case 'array':for(i=0;i<callables.length;++i){result=Q.handle(callables[i],context,args);if(result===!1)return!1;count+=result}
return count;case 'Q.Event':return callables.handle.apply(context,args);case 'object':for(k in callables){result=Q.handle(callables[k],context,args);if(result===!1)return!1;count+=result}
return count;case 'string':var o=Q.extend({},Q.handle.options,options);if(!callables.isUrl()&&(callables[0]!='#')&&(!o.target||o.target.toLowerCase()==='_self')){var c=Q.getObject(callables,context)||Q.getObject(callables);return Q.handle(c,context,args)}
if(o.dontReload&&Q.info&&Q.info.url===callables){return 0}
var callback=null;if(typeof arguments[1]==='function'){callback=arguments[1];o=Q.handle.options}else if(arguments[1]&&(arguments[3]===undefined)){o=Q.extend({},Q.handle.options,arguments[1]);if(typeof arguments[2]==='function'){callback=arguments[2]}}else{o=Q.extend({},Q.handle.options,options);if(o.callback){callback=o.callback}}
var sameDomain=callables.sameDomain(Q.info.baseUrl);if(callables[0]==='#'){root.location.hash=callables}else if(o.loadUsingAjax&&sameDomain&&(!o.target||o.target===!0||o.target==='_self')){if(callables.search(Q.info.baseUrl)===0){Q.loadUrl(callables,Q.extend({loadExtras:!0,ignoreHistory:!1,onActivate:function(){if(callback)callback()}},o))}else if(o.externalLoader){o.externalLoader.apply(this,arguments)}else{root.location=callables}}else{if(Q.typeOf(o.fields)==='object'){var method='POST';if(o.method){switch(o.method.toUpperCase()){case "GET":case "POST":method=o.method;break;default:method='POST';break}}
Q.formPost(callables,o.fields,method,{onLoad:o.callback,target:o.target})}else{if(Q.info&&(callables===Q.info.baseUrl||callables===Q.info.proxyBaseUrl)){callables+='/'}
if(!o.target||o.target===!0||o.target==='_self'){if(root.location.href==callables){root.location.reload(!0)}else{root.location=callables}}else{root.open(callables,o.target)}}}
Q.handle.onUrl.handle(callables,o);return 1;default:return 0}};Q.handle.options={loadUsingAjax:!1,externalLoader:null,dontReload:!1};Q.handle.onUrl=new Q.Event(function(){var elements=document.getElementsByClassName('Q_error_message');Q.each(elements,function(){Q.removeElement(this)});Q.Pointer.stopHints()},"Q");Q.parseQueryString=function Q_parseQueryString(queryString,keys){if(!queryString)return{};if(queryString[0]==='?'||queryString[0]==='#'){queryString=queryString.substr(1)}
var result={};Q.each(queryString.split('&'),function(i,clause){var parts=clause.split('=');var key=decodeURIComponent(parts[0]);var value=(parts[1]==null)?null:decodeURIComponent(parts[1]);if(!key)return;if(keys)keys.push(key);result[key]=value});return result};function Q_hashChangeHandler(){var url=location.hash.queryField('url'),result=null;if(url===undefined){url=root.location.href.split('#')[0].substr(Q.info.baseUrl.length+1)}
if(Q_hashChangeHandler.ignore){Q_hashChangeHandler.ignore=!1}else if(url!=Q_hashChangeHandler.currentUrl){Q.handle(url.indexOf(Q.info.baseUrl)==-1?Q.info.baseUrl+'/'+url:url);result=!0}
Q_hashChangeHandler.currentUrl=url;return result}
function Q_popStateHandler(){var url=root.location.href.split('#')[0],result=null;if(Q.info.url===url){return}
url=url.substr(Q.info.baseUrl.length+1);if(url!=Q_hashChangeHandler.currentUrl){Q.handle(url.indexOf(Q.info.baseUrl)===0?url:Q.info.baseUrl+'/'+url,{ignoreHistory:!0,quiet:!0});Q_hashChangeHandler.currentUrl=url;result=!0}
return result}
var _constructors={};function _activateTools(toolElement,options,shared){var pendingParentEvent=_pendingParentStack[_pendingParentStack.length-1];var pendingCurrentEvent=new Q.Event();pendingCurrentEvent.toolElement=toolElement;_pendingParentStack.push(pendingCurrentEvent);var toolId=Q.Tool.calculateId(toolElement.id);_waitingParentStack.push(toolId);_loadToolScript(toolElement,function _activateTools_doConstruct(toolElement,toolConstructor,toolName,uniqueToolId){if(!_constructors[toolName]){_constructors[toolName]=function Q_Tool(element,options){var tool=Q.getObject(['Q','tools',toolName],element);if(this.activated||tool){tool=tool||this;return _activateTools.alreadyActivated}
this.activated=!1;this.initialized=!1;try{this.options=Q.extend({},Q.Tool.options.levels,toolConstructor.options);if(options){var o2={},k;for(k in options){if(k[0]!=='#'){o2[k]=options[k]}}
Q.extend(this.options,Q.Tool.options.levels,o2)}
this.name=toolName;Q.Tool.call(this,element,options);this.state=Q.copy(this.options,toolConstructor.stateKeys);var prevTool=Q.Tool.beingActivated;Q.Tool.beingActivated=this;var normalizedName=Q.normalize(this.name);var normalizedId=Q.normalize(this.id);_constructToolHandlers[""]&&_constructToolHandlers[""].handle.call(this,this.options);_constructToolHandlers[normalizedName]&&_constructToolHandlers[normalizedName].handle.call(this,this.options);_constructToolHandlers["id:"+normalizedId]&&_constructToolHandlers["id:"+normalizedId].handle.call(this,this.options);var args=[this.options];Q.each(toolConstructor.require,function(i,n){var req=Q.Tool.from(element,n);if(!req){throw new Q.Exception("Q.Tool.define: "+toolConstructor.toolName+" requires "+n+" to have been activated on the same element.")}
args.push(req)});toolConstructor.apply(this,args);if(normalizedName==='q_inplace')
_activateToolHandlers[""]&&_activateToolHandlers[""].handle.call(this,this.options);_activateToolHandlers[normalizedName]&&_activateToolHandlers[normalizedName].handle.call(this,this.options);_activateToolHandlers["id:"+normalizedId]&&_activateToolHandlers["id:"+normalizedId].handle.call(this,this.options);Q.Tool.beingActivated=prevTool}catch(e){debugger;console.warn(e);Q.Tool.beingActivated=prevTool}
this.activated=!0};Q.mixin(toolConstructor,Q.Tool);Q.mixin(_constructors[toolName],toolConstructor)}
var key;if(pendingParentEvent){key=pendingParentEvent.add(_reallyConstruct,toolId)}else{_reallyConstruct()}
function _reallyConstruct(){var _constructor=_constructors[toolName];var result=new _constructor(toolElement,options);var tool=Q.getObject(['Q','tools',toolName],toolElement);shared.tools[toolId]=shared.tool=tool;if(uniqueToolId){if(uniqueToolId===shared.firstToolId){shared.firstTool=tool}
shared.pipe.fill(uniqueToolId)()}
if(!tool){return}
pendingCurrentEvent.handle.call(tool,options,result);pendingCurrentEvent.removeAllHandlers()}},shared)}
_activateTools.alreadyActivated={};function _initTools(toolElement){var currentEvent=_pendingParentStack[_pendingParentStack.length-1];_pendingParentStack.pop();var currentId=_waitingParentStack.pop();var ba=Q.Tool.beingActivated;var parentId=_waitingParentStack[_waitingParentStack.length-1]||(ba&&ba.id);_loadToolScript(toolElement,function _initTools_doInit(toolElement,toolConstructor,toolName){currentEvent.add(_doInit,currentId)},null,parentId);function _doInit(){var tool=this;var normalizedName=Q.normalize(tool.name);var normalizedId=Q.normalize(tool.id);var waiting=_toolsWaitingForInit[tool.id];if(tool.initialized||waiting){return}
tool.initialized=!0;Q.handle(tool.Q&&tool.Q.onInit,tool,[tool.options]);_initToolHandlers[""]&&_initToolHandlers[""].handle.call(tool,tool.options);_initToolHandlers[normalizedName]&&_initToolHandlers[normalizedName].handle.call(tool,tool.options);_initToolHandlers["id:"+normalizedId]&&_initToolHandlers["id:"+normalizedId].handle.call(tool,tool.options);var toInit=_toolsToInit[tool.id];for(var parentId in toInit){if(!Q.Tool.active[parentId]){return}
var allInitialized=!0;var childIds=_toolsWaitingForInit[parentId];for(var childId in childIds){var a=Q.Tool.active[childId];if(!a){allInitialized=!1;break}
for(var childName in a){var c=a[childName];if(!c||!c.initialized){allInitialized=!1;break}}}
if(allInitialized){delete _toolsWaitingForInit[parentId];for(var parentName in Q.Tool.active[parentId]){var p=Q.Tool.active[parentId][parentName];_doInit.call(p)}}}
delete _toolsToInit[tool.id]}}
Q.baseUrl=function _Q_host(where){var result,i;for(i=0;i<Q.baseUrl.routers.length;++i){if(result=Q.baseUrl.routers[i](where)){return result}}
return Q.info.baseUrl};Q.baseUrl.routers=[];Q.nodeUrl=function _Q_node(where){var result,i;for(i=0;i<Q.nodeUrl.routers.length;++i){if(result=Q.nodeUrl.routers[i](where)){return result}}
return Q.info.nodeUrl};Q.nodeUrl.routers=[];Q.Template=function(){};Q.Template.collection={};Q.Template.set=function(name,content,type){type=type||'handlebars';Q.Template.remove(name);Q.Template.collection[Q.normalize(name)]=content;Q.loadHandlebars(function(){Q.Template.compile(content)})};Q.Template.remove=function(name){if(typeof name==='string'){delete Q.Template.collection[Q.normalize(name)];Q.Template.load.cache.removeEach([name]);return}
Q.each(name,function(i,name){Q.Template.remove(name)})};Q.Template.compile=function _Q_Template_compile(content){var r=Q.Template.compile.results;if(!r[content]){r[content]=Handlebars.compile(content)}
return r[content]};Q.Template.compile.results={};Q.Template.load=Q.getter(function _Q_Template_load(name,callback,options){if(typeof callback==="object"){options=callback;callback=undefined}
options=options||{};if(options.name){name=options.name}
if(!name){console.error('Q.Template.load: name is empty');return}
var o=Q.extend({},Q.Template.load.options,options);var tpl=Q.Template.collection;var i,l,script;var scripts=document.getElementsByTagName('script');var trash=[];for(i=0,l=scripts.length;i<l;i++){script=scripts[i];var type=script.getAttribute('type');if(script&&script.id&&script.innerHTML&&type&&type.substr(0,5)==='text/'&&o.types[type.substr(5)]){tpl[Q.normalize(script.id)]=script.innerHTML.trim();trash.unshift(script)}}
for(i=0,l=trash.length;i<l;i++){Q.removeElement(trash[i])}
var n=Q.normalize(name);if(tpl&&typeof tpl[n]==='string'){var result=tpl[n];callback(null,result);return!0}
function _callback(err,content){if(err){Q.Template.onError.handle(err);return callback(err,null)}
tpl[n]=content.trim();callback(null,tpl[n])}
function _fail(){var err='Failed to load template "'+o.dir+'/'+name+'.'+o.type+'"';Q.Template.onError.handle(err);callback(err)}
var url=Q.url(o.dir+'/'+name+'.'+o.type);Q.request(url,_callback,{parse:!1,extend:!1});return!0},{cache:Q.Cache.document('Q.Template.load',100),throttle:'Q.Template.load'});Q.Template.load.options={type:"handlebars",types:{"handlebars":!0,"php":!0},dir:"views"};Q.Template.onError=new Q.Event(function(err){console.warn("Q.Template: "+Q.firstErrorMessage(err))},'Q.Template');Q.Template.render=function _Q_Template_render(name,fields,partials,callback,options){if(typeof fields==="function"){options=partials;callback=fields;partials=undefined;fields={}}else if(typeof partials==="function"){options=callback;callback=partials;partials=undefined}
if(!callback){throw new Q.Error("Q.Template.render: callback is missing")}
var isArray=Q.isArrayLike(name);if(isArray||Q.isPlainObject(name)){var names=name;var p=Q.pipe(isArray?names:Object.keys(names),callback);return Q.each(names,function(key,name){Q.Template.render(name,fields,partials,p.fill(isArray?name:key),options)})}
var tba=(options&&options.tool)||Q.Tool.beingActivated;var pba=Q.Page.beingActivated;Q.loadHandlebars(function(){var p=Q.pipe(['template','partials'],function(params){if(params.template[0]){return callback(params.template[0])}
var tbaOld=Q.Tool.beingActivated;var pbaOld=Q.Page.beingActivated;Q.Tool.beingActivated=tba;Q.Page.beingActivated=pba;try{var compiled=Q.Template.compile(params.template[1]);callback(null,compiled(fields,{partials:params.partials[0]}))}catch(e){console.warn(e)}
Q.Tool.beingActivated=tbaOld;Q.Page.beingActivated=pbaOld});var o=Q.copy(options,['type','dir','name']);Q.Template.load(name,p.fill('template'),o);if(partials&&partials.length){var pp=Q.pipe(partials,function(params){var i,partial,part={};for(i=0;i<partials.length;i++){partial=partials[i];part[partial]=params[partial][0]?null:params[partial][1]}
p.fill('partials')(part)});for(var i=0;i<partials.length;i++){Q.Template.load(partials[i],pp.fill(partials[i]),options)}}else{p.fill('partials')()}})};var _qsockets={},_eventHandlers={},_connectHandlers={},_ioCleanup=[];var _socketRegister=[];function _ioOn(obj,evt,callback){obj.off(evt,callback);obj.on(evt,callback);_ioCleanup.push(function(){obj.off(evt,callback)})}
Q.Socket=function(params){this.socket=params.socket;this.url=params.url;this.ns=params.ns};Q.Socket.get=function _Q_Socket_get(ns,url){ns=ns||"";if(ns[0]!=='/'){ns='/'+ns}
if(!url){return _qsockets[ns]}
return _qsockets[ns]&&_qsockets[ns][url]};Q.Socket.getAll=function _Q_Socket_all(){return _qsockets};function _connectSocketNS(ns,url,callback,callback2,force){function _connectNS(ns,url,callback,callback2){if(!root.io)return;var qs=_qsockets[ns][url];if(!qs||!qs.socket){_qsockets[ns][url]=qs=new Q.Socket({socket:root.io.connect(url+ns,force?{'force new connection':!0}:{}),url:url,ns:ns});Q.Socket.onConnect(ns,url).add(_Q_Socket_register,'Q');var socket=qs.socket;_ioOn(socket,'connect',_connected);_ioOn(socket,'connect_error',function(error){console.log('Failed to connect to '+url,error)});_ioOn(socket,'disconnect',function(){console.log('Socket '+ns+' disconnected from '+url)});_ioOn(socket,'error',function(){console.log('Error on connection '+url)})}
callback2&&callback2(_qsockets[ns][url],ns,url);function _Q_Socket_register(socket){Q.each(_socketRegister,function(i,item){if(item[0]!==ns)return;var name=item[1];_ioOn(socket,name,Q.Socket.onEvent(ns,url,name).handle);_ioOn(socket,name,Q.Socket.onEvent(ns,'',name).handle)})}
function _connected(){Q.Socket.onConnect().handle(this,[ns,url]);Q.Socket.onConnect(ns).handle(this,[ns,url]);Q.Socket.onConnect(ns,url).handle(this,[ns,url]);callback&&callback(_qsockets[ns][url],ns,url);console.log('Socket connected to '+url)}}
if(ns[0]!=='/'){ns='/'+ns}
if(root.io&&root.io.Socket){_connectNS(ns,url,callback,callback2)}else{Q.addScript(url+'/socket.io/socket.io.js',function(){_connectNS(ns,url,callback,callback2)})}}
Q.Socket.connect=function _Q_Socket_connect(ns,url,callback,callback2){if(!url){return!1}
if(typeof ns==='function'){callback=ns;ns=''}else if(!ns){ns=''}else if(ns[0]!=='/'){ns='/'+ns}
if(!_qsockets[ns])_qsockets[ns]={};if(!_qsockets[ns][url]){_qsockets[ns][url]=null}
_connectSocketNS(ns,url,callback,callback2)};Q.Socket.prototype.disconnect=function _Q_Socket_prototype_disconnect(){if(!this.url){console.warn("Q.Socket.prototype.disconnect: Attempt to disconnect socket with empty url");return}
var qs=Q.getObject([this.ns,this.url],_qsockets);if(!qs){console.warn("Q.Socket.prototype.disconnect: Attempt to disconnect nonexistent socket: ",this.url);return}
qs.socket.disconnect()};Q.Socket.disconnectAll=function _Q_Socket_disconnectAll(ns){if(ns){Q.each(_qsockets[ns],function(url,socket){socket&&socket.disconnect()})}else{Q.each(_qsockets,function(ns,arr){Q.each(arr,function(url,socket){socket&&socket.disconnect()})})}};Q.Socket.reconnectAll=function _Q_Socket_reconnectAll(){var ns,url;for(ns in _qsockets){for(url in _qsockets[ns]){if(!_qsockets[ns][url]){_connectSocketNS(ns,url)}else if(!_qsockets[ns][url].socket.io.connected){_qsockets[ns][url].socket.io.reconnect()}}}};Q.Socket.destroyAll=function _Q_Socket_destroyAll(){Q.Socket.disconnectAll();setTimeout(function(){for(var i=0;i<_ioCleanup.length;i++){_ioCleanup[i]()}
_ioCleanup=[];_qsockets={}},1000)};Q.Socket.onEvent=Q.Event.factory(_eventHandlers,["","","",function(ns,url,name){if(ns[0]!=='/'){return['/'+ns,url,name]}}],function _Q_Socket_SetupEvent(ns,url,name){var event=this;event.onFirst().set(function(){Q.each(Q.Socket.get(ns,url),function(url,qs){function _Q_Socket_register(socket){_ioOn(socket,name,event.handle)}
if(qs){Q.Socket.onConnect(ns,url).add(_Q_Socket_register,'Q')}});_socketRegister.push([ns,name])});event.onEmpty().set(function(){Q.each(Q.Socket.get(ns,url),function(url,qs){if(qs){qs.socket.off(name,event.handle)}});Q.each(_socketRegister,function(i,item){if(item[0]===ns&&item[1]===name){_socketRegister.splice(i,1)}})})});Q.Socket.onConnect=Q.Event.factory(_connectHandlers,["","",function(ns,url){if(ns[0]!=='/'){return['/'+ns,url]}}]);Q.Socket.prototype.onEvent=function(name){return Q.Socket.onEvent(this.url,this.ns,name)};Q.Animation=function _Q_Animation(callback,duration,ease,until,params){if(duration==undefined){duration=1000}
if(typeof until==="object"){params=until;until=1}
if(typeof ease=="string"){ease=Q.Animation.ease[ease]}
if(typeof ease!=='function'){ease=Q.Animation.ease.smooth}
var anim=this;this.position=0;this.milliseconds=0;this.sinceLastFrame=0;this.id=++_Q_Animation_index;this.duration=duration;this.ease=ease;this.until=1;this.callback=callback;this.params=params;this.onRewind=new Q.Event();this.onJump=new Q.Event();this.onPause=new Q.Event();this.onRender=new Q.Event();this.onComplete=new Q.Event()};var Ap=Q.Animation.prototype;Ap.pause=function _Q_Animation_prototype_pause(){this.playing=!1;delete Q.Animation.playing[this.id];this.onPause.handle.call(this);return this};Ap.jump=function _Q_Animation_prototype_jump(position){var lastPosition=this.position;this.position=position;this.milliseconds=this.duration*position;this.sinceLastFrame=0;this.jumped=position;this.started=Q.milliseconds();this.onJump.handle.call(this,position,lastPosition);return this};Ap.rewind=function _Q_Animation_prototype_rewind(){this.pause();this.jump(0);this.onRewind.handle.call(this);return this};Ap.nextFrame=function _Q_Animation_prototype_render(position){var anim=this;var ms=Q.milliseconds();requestAnimationFrame(function(){var _milliseconds=anim.milliseconds||0;var qm=Q.milliseconds();anim.elapsed=qm-anim.started;anim.milliseconds+=qm-ms;anim.sinceLastFrame=anim.milliseconds-_milliseconds;if(!anim.playing){return}
var x=anim.position=(anim.jumped==null)?(anim.elapsed/anim.duration):(anim.elapsed/anim.duration)+anim.jumped;if(x>=anim.until){Q.handle(anim.callback,anim,[1,anim.ease(1),anim.params]);anim.onRender.stop();anim.onComplete.handle.call(anim);anim.rewind();return}
anim.render(x);if(anim.playing){anim.nextFrame()}})};Ap.render=function _Q_Animation_prototype_render(position){var x=(position===undefined)?this.position:position;var y=this.ease(x);Q.handle(this.callback,this,[x,y,this.params]);this.onRender.handle.call(this,x,y,this.params)};Ap.play=function _Q_Animation_instance_play(until){Q.Animation.playing[this.id]=this;if(!this.playing){this.started=Q.milliseconds()}
this.playing=!0;this.until=until||1;this.nextFrame();return this};Q.Animation.play=function _Q_Animation_play(callback,duration,ease,until,params){var result=new Q.Animation(callback,duration,ease,until,params);return result.play()};Q.Animation.fps=60;Q.Animation.ease={linear:function(fraction){return fraction},power:function(exponent){return function(fraction){return 1-Math.pow(1-fraction,exponent)}},bounce:function(fraction){return Math.sin(Math.PI*1.2*(fraction-0.5))/1.7+0.5},smooth:function(fraction){return Math.sin(Math.PI*(fraction-0.5))/2+0.5},easeInExpo:function(t){return(x==0)?0:pow(2,10*(x-1))+0-1*0.001},inOutQuintic:function(t){var ts=t*t;var tc=ts*t;return 6*tc*ts+ -15*ts*ts+10*tc}};Q.Animation.ease.swing=Q.Animation.ease.inOutQuintic;function _listenForVisibilityChange(){var hidden,visibilityChange;Q.each(['','moz','ms','webkit','o'],function(i,k){hidden=k?k+'Hidden':'hidden';if(hidden in document){visibilityChange=k+'visibilitychange';return!1}});Q.addEventListener(document,visibilityChange,function(){Q.onVisibilityChange.handle(document,[document[hidden]])},!1);Q.isDocumentHidden=function(){return document[hidden]}}
_listenForVisibilityChange();function _handleVisibilityChange(){if(document.hidden||document.msHidden||document.webkitHidden||document.oHidden){return}
for(var k in Q.Animation.playing){Q.Animation.playing[k].play()}}
Q.onVisibilityChange.set(_handleVisibilityChange,'Q.Animation');Q.Animation.playing={};var _Q_Animation_index=0;Q.jQueryPluginPlugin=function _Q_jQueryPluginPlugin(){var $=root.jQuery;if(!$||$.fn.plugin){return}
$.fn.plugin=function _jQuery_fn_plugin(pluginName,options,callback){if(!this.length)return this;var args;switch(Q.typeOf(options)){case 'function':callback=options;options={};args=[];case 'array':args=options;break;case 'string':args=Array.prototype.slice.call(arguments,1);callback=null;break;default:args=[options]}
var that=this;$.fn.plugin.load(pluginName,function _jQuery_plugin_load_completed(results){for(var k in results){if(!results[k]){throw new Q.Error("jQuery.fn.plugin: "+pluginName+" not defined")}
results[k].apply(that,args);Q.handle(callback,that,args);break}});return this};$.fn.plugin.load=function _jQuery_fn_load(pluginNames,callback,options){var srcs=[];if(typeof pluginNames==='string'){pluginNames=[pluginNames]}
var results={};Q.each(pluginNames,function _jQuery_plugin_loaded(i,pluginName){var pn=Q.normalize(pluginName);results[pn]=pluginName;if($.fn[pn])return;var src=($.fn.plugin[pn]||'plugins/jQuery/'+pn+'.js');if(typeof src==='string'){srcs.push(src)}});Q.addScript(srcs,function _jQuery_plugin_script_loaded(){for(var pn in results){results[pn]=$.fn[pn]||$.fn[results[pn]]}
Q.handle(callback,root,[results])},options);return!1};$.fn.state=function _jQuery_fn_state(pluginName){var key=Q.normalize(pluginName)+' state';return $(this).data(key)};$.fn.tool=function _jQuery_fn_tool(toolName,toolOptions,id,prefix){var args=arguments;return this.each(function(){var id2=(typeof id==='function')?id.apply(this,args):id;Q.Tool.setUpElement(this,toolName,toolOptions,id2,prefix)})};$.fn.activate=function _jQuery_fn_activate(options,callback){if(!this.length){return Q.handle(callback,null,options,[])}
return this.each(function _jQuery_fn_activate_each(index,element){if(!$(element).closest('html').length){console.log("Q.activate: element "+element.id+" is not in the DOM");return!1}
Q.activate(element,options,callback)})};$.fn.andSelf=$.fn.addBack||$.fn.andSelf;Q.each({'on':'off','live':'die','bind':'unbind'},function(on,off){var _jQuery_fn_on=$.fn[on];$.fn[on]=function _jQuery_on(){var args=Array.prototype.slice.call(arguments,0)
for(var f=args.length-1;f>=0;--f){if(typeof args[f]==='function'){break}}
var af1,af2;af1=af2=args[f];var namespace='';if(Q.isArrayLike(args[0])){namespace=args[0][1]||'';if(namespace&&namespace[0]!=='.'){namespace='.'+namespace}
args[0]=args[0][0]}
if(typeof args[0]==='function'){var params={original:args[f]};af2=args[f]=args[0](params);af1.Q_wrapper=af2;if(!('eventName' in params)){throw new Q.Error("Custom $.fn.on handler: need to set params.eventName")}
args[0].eventName=params.eventName;args[0]=params.eventName}
if(namespace){var parts=args[0].split(' ');for(var i=parts.length-1;i>=0;--i){parts[i]+=namespace}
args[0]=parts.join(' ')}
var added;if(args[f-1]===!0){Q.Event.jQueryForPage.push([off,this,args[0],af2]);added='page'}else if(Q.typeOf(args[f-1])==='Q.Tool'){var tool=args[f-1],key=tool.id;if(!Q.Event.jQueryForTool[key]){Q.Event.jQueryForTool[key]=[]}
Q.Event.jQueryForTool[key].push([off,this,args[0],af2]);added='tool'}
if(added){args.splice(f-1,1)}
return _jQuery_fn_on.apply(this,args)};var _jQuery_fn_off=$.fn[off];$.fn[off]=function(){var args=Array.prototype.slice.call(arguments,0);var namespace='';if(Q.isArrayLike(arguments[0])){namespace=args[0][1]||'';if(namespace&&namespace[0]!=='.'){namespace='.'+namespace}
args[0]=args[0][0]}
if(typeof args[0]==='function'){var params={};args[0](params);if(!('eventName' in params)){throw new Q.Error("Custom $.fn.on handler: need to set params.eventName")}
args[0]=params.eventName}
if(namespace){var parts=args[0].split(' ');for(var i=parts.length-1;i>=0;--i){parts[i]+=namespace}
args[0]=parts.join(' ')}
var f,af=null;for(f=args.length-1;f>=0;--f){if(typeof args[f]==='function'){af=args[f];break}}
if(af&&af.Q_wrapper){args[f]=af.Q_wrapper}
return _jQuery_fn_off.apply(this,args)}})};Q.jQueryPluginPlugin();Q.Browser={detect:function(){var data=this.searchData(this.dataBrowser);var browser=(data&&data.identity)||"An unknown browser";var version=(this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version").toString();var dotIndex=version.indexOf('.');var mainVersion=version.substring(0,dotIndex!=-1?dotIndex:version.length);var OSdata=this.searchData(this.dataOS);var OS=(OSdata&&OSdata.identity)||"an unknown OS";var engine='',ua=navigator.userAgent.toLowerCase();if(ua.indexOf('webkit')!=-1){engine='webkit'}else if(ua.indexOf('gecko')!=-1){engine='gecko'}else if(ua.indexOf('presto')!=-1){engine='presto'}
var isWebView=/(.*)QWebView(.*)/.test(navigator.userAgent)||(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i).test(navigator.userAgent);var isStandalone=navigator.standalone||(root.matchMedia&&root.matchMedia('(display-mode: standalone)').matches)||(root.external&&external.msIsSiteMode&&external.msIsSiteMode())||!1;if(OS==='Android'){var w=screen.width-document.documentElement.clientHeight;var h=screen.height-document.documentElement.clientHeight;isStandalone=(0<h&&h<40)||(0<w&&w<40)}
if(/(.*)QWebView(.*)/.test(navigator.userAgent)){isStandalone=!1}
var name=browser.toLowerCase();var prefix;switch(engine){case 'webkit':prefix='-webkit-';break;case 'gecko':prefix='-moz-';break;case 'presto':prefix='-o-';break;default:prefix=''}
prefix=(name==='explorer')?'-ms-':prefix;return{name:name,mainVersion:mainVersion,prefix:prefix,OS:OS.toLowerCase(),engine:engine,device:OSdata.device,isWebView:isWebView,isStandalone:isStandalone,isCordova:_isCordova}},searchData:function(data){for(var i=0,l=data.length;i<l;i++){var dataString=data[i].string;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(navigator.userAgent.indexOf(data[i].subString)!=-1){return data[i]}}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1)
return;return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:root.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.userAgent,subString:"iPhone",identity:"iOS",device:"iPhone"},{string:navigator.userAgent,subString:"iPod",identity:"iOS",device:"iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iOS",device:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"BSD",identity:"FreeBSD"},],getScrollbarWidth:function(){if(Q.Browser.scrollbarWidth){return Q.Browser.scrollbarWidth}
var inner=document.createElement('p');inner.style.width='100%';inner.style.height='200px';var outer=document.createElement('div');Q.each({'position':'absolute','top':'0px','left':'0px','visibility':'hidden','width':'200px','height':'150px','overflow':'hidden'},function(k,v){outer.style[k]=v});outer.appendChild(inner);document.body.appendChild(outer);var w1=parseInt(inner.offsetWidth);outer.style.overflow='scroll';var w2=parseInt(inner.offsetWidth);if(w1==w2){w2=outer.clientWidth}
Q.removeElement(outer);return Q.Browser.scrollbarWidth=w1-w2}};var _isCordova=/(.*)QCordova(.*)/.test(navigator.userAgent)||location.search.queryField('Q.cordova');var detected=Q.Browser.detect();var isTouchscreen=('ontouchstart' in root||!!root.navigator.msMaxTouchPoints);var isTablet=navigator.userAgent.match(/tablet|ipad/i)||(isTouchscreen&&!navigator.userAgent.match(/mobi/i));Q.info={isTouchscreen:isTouchscreen,isTablet:isTablet,isWebView:detected.isWebView,isStandalone:detected.isStandalone,platform:detected.OS,browser:detected,isIE:function(minVersion,maxVersion){return Q.info.browser.name==='explorer'&&(minVersion==undefined||minVersion<=Q.info.browser.mainVersion)&&(maxVersion==undefined||maxVersion>=Q.info.browser.mainVersion)},isAndroid:function(maxWidth,maxHeight,minVersion,maxVersion){return Q.info.platform==='android'&&(maxWidth==undefined||maxWidth>=Q.Pointer.windowWidth())&&(maxHeight==undefined||maxHeight>=Q.Pointer.windowHeight())&&(minVersion==undefined||minVersion<=Q.info.browser.mainVersion)&&(maxVersion==undefined||maxVersion>=Q.info.browser.mainVersion)}};Q.info.isAndroidStock=!!(Q.info.platform==='android'&&navigator.userAgent.match(/Android .*Version\/[\d]+\.[\d]+/i));Q.info.isMobile=Q.info.isTouchscreen&&!Q.info.isTablet;Q.info.formFactor=Q.info.isMobile?'mobile':(Q.info.isTablet?'tablet':'desktop');var de=document.documentElement;de.addClass('Q_js');de.addClass(Q.info.isTouchscreen?'Q_touchscreen':'Q_notTouchscreen');de.addClass(Q.info.isMobile?'Q_mobile':'Q_notMobile');de.addClass(Q.info.isAndroid()?'Q_android':'Q_notAndroid');de.addClass(Q.info.isStandalone?'Q_standalone':'Q_notStandalone');de.addClass(Q.info.isWebView?'Q_webView':'Q_notWebView');if(Q.info.isAndroidStock){de.addClass('Q_androidStock')}
Q.Page.onLoad('').set(function(){de.addClass(Q.info.uri.module+'_'+Q.info.uri.action).addClass(Q.info.uri.module)},'Q');Q.Page.beforeUnload('').set(function(){de.removeClass(Q.info.uri.module+'_'+Q.info.uri.action).removeClass(Q.info.uri.module)},'Q');function _touchScrollingHandler(event){var p=event.target;var pos;var scrollable=null;do{if(!p.computedStyle){continue}
var overflow=p.computedStyle().overflow;var hiddenWidth=p.scrollWidth-Math.min(p.offsetWidth,Q.Pointer.windowWidth());var q=(p.tagName==='HTML')?document.body:p;var hiddenHeight=q.scrollHeight-Math.min(p.offsetHeight,Q.Pointer.windowHeight());var s=(['hidden','visible'].indexOf(overflow)<0);if((s||p.tagName==='HTML')&&hiddenHeight>0&&Q.Pointer.movement){if(_touchScrollingHandler.options.direction!='horizontal'&&(Q.Pointer.movement.positions.length==1)&&(pos=Q.Pointer.movement.positions[0])){var sy=Q.Pointer.getY(event)-Q.Pointer.scrollTop();if((sy>pos.y&&q.scrollTop==0)||(sy<pos.y&&q.scrollTop>=hiddenHeight)){continue}}
scrollable=p;break}
if(!scrollable&&(s||p.tagName==='HTML')&&hiddenWidth>0){if(_touchScrollingHandler.options.direction!='vertical'&&(Q.Pointer.movement.positions.length==1)&&(pos=Q.Pointer.movement.positions[0])){var sx=Q.Pointer.getX(event)-Q.Pointer.scrollLeft();if((sx>pos.x&&q.scrollLeft==0)||(sx<pos.x&&q.scrollLeft>=hiddenWidth)){continue}}
scrollable=p;break}}while(p=p.parentNode);if(!scrollable){Q.Pointer.preventDefault(event)}}
_touchScrollingHandler.options={direction:'both'};function _touchBlurHandler(event){var o=_touchBlurHandler.options.blur;if(!o.blur)return;var target=Q.Pointer.target(event);var ae=document.activeElement;if(ae&&(typeof ae.blur==='function')&&(ae!==target)){if(o.blur.indexOf(target.tagName.toUpperCase())>=0||(o.blurContentEditable&&target.getAttribute('contenteditable'))){var f=function(){target.focus();Q.removeEventListener(root,'click',f)};Q.addEventListener(root,'click',f)}else{ae.blur()}}}
_touchBlurHandler.options={blur:['INPUT','TEXTAREA','SELECT'],blurContentEditable:!0};function _detectOrientation(e){var w=window;var d=document;var h=d.documentElement;var b=d.getElementsByTagName('body')[0];var x=w.innerWidth||h.clientWidth||(b&&b.clientWidth);var y=w.innerHeight||h.clientHeight||(b&&b.clientHeight);var m=w.matchMedia;if((m&&m("(orientation: landscape)").matches)||x>y){h.removeClass('Q_verticalOrientation').addClass('Q_horizontalOrientation');Q.info.isVertical=!1}else{h.removeClass('Q_horizontalOrientation').addClass('Q_verticalOrientation');Q.info.isVertical=!0}}
function _setLayoutInterval(e){if(!Q.info.isTouchscreen||!_setLayoutInterval.options.milliseconds){return}
var w=Q.Pointer.windowWidth();var h=Q.Pointer.windowHeight();var interval=setInterval(function(){var ae=document.activeElement;if(ae&&['INPUT','TEXTAREA','SELECT'].indexOf(ae.tagName.toUpperCase())>=0){return}
var w2=Q.Pointer.windowWidth();var h2=Q.Pointer.windowHeight();if(w!==w2||h!==h2){Q.layout()}
w=w2;h=h2},_setLayoutInterval.options.milliseconds)}
_setLayoutInterval.options={milliseconds:300};Q.Pointer={start:(Q.info.isTouchscreen?'touchstart':'mousedown'),move:(Q.info.isTouchscreen?'touchmove':'mousemove'),end:(Q.info.isTouchscreen?'touchend':'mouseup'),enter:(Q.info.isTouchscreen?'touchenter':'mouseenter'),leave:(Q.info.isTouchscreen?'touchleave':'mouseleave'),cancel:(Q.info.isTouchscreen?'touchcancel':'mousecancel'),focusin:function(params){params.eventName=(Q.info.browser.engine==='gecko'?'focus':'focusin');var justHandled=!1;return function _Q_focusin_on_wrapper(e){if(justHandled)return;justHandled=!0;setTimeout(function(){justHandled=!1},300);return params.original.apply(this,arguments)}},focusout:function(params){params.eventName=(Q.info.browser.engine==='gecko'?'blur':'focusout');var justHandled=!1;return function _Q_focusout_on_wrapper(e){if(justHandled)return;justHandled=!0;setTimeout(function(){justHandled=!1},300);return params.original.apply(this,arguments)}},click:function _Q_click(params){params.eventName='click';return function _Q_click_on_wrapper(e){if(Q.Pointer.canceledClick){return Q.Pointer.preventDefault(e)}
return params.original.apply(this,arguments)}},fastclick:function _Q_fastclick(params){params.eventName=Q.info.isTouchscreen?'touchend':'click';return function _Q_fastclick_on_wrapper(e){var x=Q.Pointer.getX(e),y=Q.Pointer.getY(e);var elem=(!isNaN(x)&&!isNaN(y))&&Q.Pointer.elementFromPoint(x,y);if(Q.Pointer.canceledClick||!this.contains(Q.Pointer.started||null)||!this.contains(elem)){return Q.Pointer.preventDefault(e)}
return params.original.apply(this,arguments)}},touchclick:function _Q_touchclick(params){if(!Q.info.isTouchscreen){return Q.Pointer.click(params)}
params.eventName=Q.Pointer.start;return function _Q_touchclick_on_wrapper(e){var _relevantClick=!0;var t=this,a=arguments;function _clickHandler(e){Q.removeEventListener(root,'click',_clickHandler);if(Q.Pointer.canceledClick){return Q.Pointer.preventDefault(e)}
if(_relevantClick){params.original.apply(t,a)}}
function _touchendHandler(e){Q.removeEventListener(this,'touchend',_touchendHandler);setTimeout(function(){_relevantClick=!1},Q.Pointer.touchclick.duration)}
Q.addEventListener(root,'click',_clickHandler);Q.addEventListener(this,'touchend',_touchendHandler)}},wheel:function _Q_wheel(params){_Q_wheel.div=document.createElement("div");params.eventName=("onwheel" in _Q_wheel.div)?"wheel":(document.onmousewheel!==undefined)?"mousewheel":"DOMMouseScroll MozMousePixelScroll";return function _Q_wheel_on_wrapper(e){var oe=e.originalEvent||e;e.type='wheel';e.deltaMode=(oe.type=="MozMousePixelScroll")?0:1;e.deltaX=oe.deltaX||0;e.deltaY=oe.deltaY||0;e.deltaZ=oe.deltaZ||0;switch(params.eventName){case 'mousewheel':oe.wheelDelta&&(e.deltaY=-Math.ceil(1/3*oe.wheelDelta));oe.wheelDeltaX&&(e.deltaX=-Math.ceil(1/3*oe.wheelDeltaX));break;case 'wheel':default:e.deltaY=('deltaY' in oe)?oe.deltaY:oe.detail}
return params.original.apply(this,arguments)}},canceledClick:!1,scrollLeft:function(){return root.pageXOffset||document.documentElement.scrollLeft||(document.body&&document.body.scrollLeft)},scrollTop:function(){return root.pageYOffset||document.documentElement.scrollTop||(document.body&&document.body.scrollTop)},windowWidth:function(){return root.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},windowHeight:function(){return root.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},boundingRect:function(container,omitClasses,omitOverflow){var rect={left:0,top:0};rect.right=Q.Pointer.windowWidth();rect.bottom=Q.Pointer.windowHeight();container=container||document.body;var sl=Q.Pointer.scrollLeft();var st=Q.Pointer.scrollTop();Q.each(container.children||container.childNodes,function(){if(this.hasClass&&omitClasses){for(var i=0,l=omitClasses.length;i<l;++i){if(this.hasClass(omitClasses[i]))return}}
var bcr=this.getBoundingClientRect();var r={left:bcr.left,top:bcr.top,right:bcr.right,bottom:bcr.bottom};if(!r)return;r.left+=sl;r.right+=sl;r.top+=st;r.bottom+=st;var cs=this.computedStyle();if(!omitOverflow&&cs.overflow==='visible'){if(this.scrollWidth>r.right-r.left){r.right+=this.scrollWidth-(r.right-r.left);r.left-=this.scrollLeft}
if(this.scrollHeight>r.bottom-r.top){r.bottom+=this.scrollHeight-(r.bottom-r.top);r.top-=this.scrollTop}}
if(r.right-r.left==0||r.bottom-r.top==0)return;rect.left=Math.min(rect.left,r.left);rect.top=Math.min(rect.top,r.top);rect.right=Math.max(rect.right,r.right);rect.bottom=Math.max(rect.bottom,r.bottom)});rect.width=rect.right-rect.left;rect.height=rect.bottom-rect.top;return rect},getX:function(e){var oe=e.originalEvent||e;oe=(oe.touches&&oe.touches.length)?oe.touches[0]:(oe.changedTouches&&oe.changedTouches.length?oe.changedTouches[0]:oe);return Math.max(0,('pageX' in oe)?oe.pageX:oe.clientX+Q.Pointer.scrollLeft())},getY:function(e){var oe=e.originalEvent||e;oe=(oe.touches&&oe.touches.length)?oe.touches[0]:(oe.changedTouches&&oe.changedTouches.length?oe.changedTouches[0]:oe);return Math.max(0,('pageY' in oe)?oe.pageY:oe.clientY+Q.Pointer.scrollTop())},touchCount:function(e){var oe=e.originalEvent||e;return oe.touches?oe.touches.length:(Q.Pointer.which(e)>0?1:0)},which:function(e){var button=e.button,which=e.which;if(!which&&button!==undefined){which=(button&1?1:(button&2?3:(button&4?2:0)))}
return which},target:function(e){var target=e.target||e.srcElement;if(target.nodeType===3){target=target.parentNode}
return target},relatedTarget:function(e){e.relatedTarget=e.relatedTarget||(e.type=='mouseover'?e.fromElement:e.toElement)},offset:function(element){var offsetLeft=0,offsetTop=0;do{if(!isNaN(element.offsetLeft)){offsetLeft+=element.offsetLeft}
if(!isNaN(element.offsetTop)){offsetTop+=element.offsetTop}}while(element=element.offsetParent);return{left:offsetLeft,top:offsetTop}},hint:function(targets,options){options=options||{};var img,img1,i,l;var qphi=Q.Pointer.hint.imgs;var imageEvent=options.imageEvent||new Q.Event();var audioEvent=options.audioEvent||new Q.Event();var hintEvent=imageEvent.and(audioEvent);var o=Q.extend({},Q.Pointer.hint.options,10,options);if(!options.dontRemove&&!options.waitForEvents){for(i=0,l=qphi.length;i<l;++i){img=qphi[i];if(img.parentNode){img.parentNode.removeChild(img)}}
qphi=Q.Pointer.hint.imgs=[]}
img1=document.createElement('img');img1.setAttribute('src',Q.url(o.src));img1.style.position='absolute';img1.style.width=o.width;img1.style.height=o.height;img1.style.display='block';img1.style.pointerEvents='none';img1.setAttribute('class','Q_hint');img1.style.opacity=0;img1.hide=o.hide;img1.dontStopBeforeShown=o.dontStopBeforeShown;qphi.push(img1);document.body.appendChild(img1);hintEvent.add(Q.once(function _hintReady(){img1.timeout=setTimeout(function(){var i,l;var imgs=[img1];if(typeof targets==='string'){targets=document.querySelectorAll(targets)}
if(Q.isEmpty(targets)){return}
if(Q.isArrayLike(targets)){img1.target=targets[0];for(i=1,l=targets.length;i<l;++i){var img2=img1.cloneNode(!1);img2.hide=img1.hide;img2.dontStopBeforeShown=img1.dontStopBeforeShown;img2.target=targets[i];img2.timeout=!1;imgs.push(img2);Q.Pointer.hint.imgs.push(img2);document.body.appendChild(img2)}}else{img1.target=targets}
Q.each(imgs,function(i,img){if(typeof img.target==='string'){img.target=document.querySelector(target)}
img1.timeout=!1;var point;var target=img.target;if(Q.instanceOf(target,Element)){if(!target.isVisible()){if(img.parentNode){img.parentNode.removeChild(img)}
return}
var offset=Q.Pointer.offset(target);point={x:offset.left+target.offsetWidth/2,y:offset.top+target.offsetHeight/2}}else{point=target}
img.style.display='block';img.style.left=point.x-img.offsetWidth*o.hotspot.x+'px';img.style.top=point.y-img.offsetHeight*o.hotspot.y+'px';img.style.zIndex=o.zIndex;var width=parseInt(img.style.width);var height=parseInt(img.style.height);Q.Animation.play(function(x,y){img.style.opacity=y;if(o.show.initialScale!==1){var z=1+(o.show.initialScale-1)*(1-y);var w=width*z;var h=height*z;img.style.width=w+'px';img.style.height=h+'px';img.style.left=point.x-w*o.hotspot.x+'px';img.style.top=point.y-h*o.hotspot.y+'px'}},o.show.duration,o.show.ease)})},o.show.delay)}));if(!Q.Pointer.hint.addedListeners){Q.addEventListener(window,Q.Pointer.start,Q.Pointer.stopHints,!1,!0);Q.addEventListener(window,'keydown',Q.Pointer.stopHints,!1,!0);Q.addEventListener(document,'scroll',Q.Pointer.stopHints,!1,!0);Q.Pointer.hint.addedListeners=!0}
if(options.waitForEvents){return}
if(img1.complete){imageEvent.handle()}else{img1.onload=imageEvent.handle}
var a=options.audio||{};if(a.src){Q.audio(a.src,function(){img1.audio=this;this.hint=[targets,options];this.play(a.from||0,a.until,a.removeAfterPlaying);audioEvent.handle()})}else if(!options.waitForEvents){audioEvent.handle()}},stopHints:function(container){var imgs=Q.Pointer.hint.imgs;var imgs2=[];Q.each(imgs,function(i,img){var outside=(Q.instanceOf(container,Element)&&!container.contains(img.target));if((img.timeout!==!1&&img.dontStopBeforeShown)||outside){imgs2.push(img);return}
if(img.audio){img.audio.pause()}
clearTimeout(img.timeout);img.timeout=null;Q.Animation.play(function(x,y){img.style.opacity=1-y},img.hide.duration,img.hide.ease).onComplete.set(function(){if(img.parentNode){img.parentNode.removeChild(img)}})});Q.Pointer.hint.imgs=imgs2},preventDefault:function(e){if(('cancelable' in e)&&!e.cancelable){return!1}
e.preventDefault?e.preventDefault():e.returnValue=!1;return!0},cancelClick:function(event,extraInfo,skipMask){if(!1===Q.Pointer.onCancelClick.handle(event,extraInfo)){return!1}
Q.Pointer.canceledClick=!0;if(!skipMask){Q.Masks.show('Q.click.mask')}},elementFromPoint:function(pageX,pageY){return document.elementFromPoint(pageX-Q.Pointer.scrollLeft(),pageY-Q.Pointer.scrollTop())},preventRubberBand:function(options){if(Q.info.platform==='ios'){Q.extend(_touchScrollingHandler.options,options);Q.addEventListener(window,'touchmove',_touchScrollingHandler,{passive:!1},!0)}},restoreRubberBand:function(){Q.removeEventListener(window,'touchmove',_touchScrollingHandler,{passive:!1},!0)},startBlurringOnTouch:function(options){Q.addEventListener(window,'touchstart',_touchBlurHandler,!1,!0)},stopBlurringOnTouch:function(options){Q.removeEventListener(window,'touchstart',_touchBlurHandler,!1,!0)},onCancelClick:new Q.Event(),onEnded:new Q.Event(),onStarted:new Q.Event(),options:{cancelClickDistance:10}};Q.Pointer.which.LEFT=1;Q.Pointer.which.MIDDLE=2;Q.Pointer.which.RIGHT=3;Q.Pointer.touchclick.duration=400;Q.Pointer.hint.options={src:'plugins/Q/img/hints/tap.gif',hotspot:{x:0.5,y:0.3},width:"50px",height:"50px",zIndex:99999,show:{delay:500,duration:500,initialScale:2,ease:Q.Animation.ease.smooth},hide:{delay:300,duration:300,ease:Q.Animation.ease.linear}};Q.Pointer.hint.imgs=[];function _Q_restoreScrolling(){if(!Q.info||!Q.info.isTouchscreen)return!1;var lastScrollLeft,lastScrollTop;var focused=!1;setInterval(function _Q_saveScrollPositions(){var ae=document.activeElement;var b=_Q_restoreScrolling.options.prevent;if(ae&&b.indexOf(ae.tagName.toUpperCase())>=0){focused=!0}
if(focused)return!1;lastScrollTop=Q.Pointer.scrollTop();lastScrollLeft=Q.Pointer.scrollLeft()},300);Q.addEventListener(document.body,Q.Pointer.focusin,function _Q_body_focusin(){focused=!0});Q.addEventListener(document.body,Q.Pointer.focusout,function _Q_body_focusout(){focused=!1;if(lastScrollTop!==undefined){window.scrollTo(lastScrollLeft,lastScrollTop)}});return!0}
_Q_restoreScrolling.options={prevent:["INPUT","TEXTAREA","SELECT"]};var _pos,_dist,_last,_lastTimestamp,_lastVelocity;function _Q_PointerStartHandler(e){Q.Pointer.started=Q.Pointer.target(e);Q.Pointer.canceledClick=!1;Q.addEventListener(window,Q.Pointer.move,_onPointerMoveHandler,!1,!0);Q.addEventListener(window,Q.Pointer.end,_onPointerEndHandler,!1,!0);Q.addEventListener(window,Q.Pointer.cancel,_onPointerEndHandler,!1,!0);Q.addEventListener(window,Q.Pointer.click,_onPointerClickHandler,!1,!0);Q.handle(Q.Pointer.onStarted,this,arguments);var screenX=Q.Pointer.getX(e)-Q.Pointer.scrollLeft();var screenY=Q.Pointer.getY(e)-Q.Pointer.scrollTop();_pos={x:screenX,y:screenY};_dist=_last=_lastTimestamp=_lastVelocity=null;Q.Pointer.movement={times:[],positions:[],velocities:[],movingAverageVelocity:null,accelerations:[],timeout:300}}
var _pointerMoveTimeout=null;function _onPointerMoveHandler(evt){clearTimeout(_pointerMoveTimeout);var screenX=Q.Pointer.getX(evt)-Q.Pointer.scrollLeft();var screenY=Q.Pointer.getY(evt)-Q.Pointer.scrollTop();if(!screenX||!screenY||Q.Pointer.canceledClick){return}
var ccd=Q.Pointer.options.cancelClickDistance;if(_pos&&((_pos.x&&Math.abs(_pos.x-screenX)>ccd)||(_pos.y&&Math.abs(_pos.y-screenY)>ccd))){if(!1!==Q.Pointer.cancelClick(evt,{fromX:_pos.x,fromY:_pos.y,toX:screenX,toY:screenY,comingFromPointerMovement:!0},!0)){_pos=!1}}
var _timestamp=Q.milliseconds();Q.Pointer.movement.times.push(_timestamp);if(_last&&_lastTimestamp){_dist={x:screenX-_last.x,y:screenY-_last.y};var _timeDiff=_timestamp-_lastTimestamp;var velocity={x:_dist.x/_timeDiff,y:_dist.y/_timeDiff};Q.Pointer.movement.velocities.push(velocity);if(_lastVelocity!=null){Q.Pointer.movement.accelerations.push({x:(velocity.x-_lastVelocity.x)/_timeDiff,y:(velocity.y-_lastVelocity.y)/_timeDiff})}
_lastVelocity=velocity;var times=Q.Pointer.movement.times;var velocities=Q.Pointer.movement.velocities;var totalX=0,totalY=0;var t=_timestamp,tNext;for(var i=times.length-1;i>=1;--i){var tNext=times[i];if(tNext<_timestamp-100)break;var v=velocities[i-1];totalX+=v.x*(t-tNext);totalY+=v.y*(t-tNext);t=tNext}
var tDiff=_timestamp-t;Q.Pointer.movement.movingAverageVelocity=tDiff?{x:totalX/tDiff,y:totalY/tDiff}:Q.Pointer.movement.velocities[velocities.length-1];_pointerMoveTimeout=setTimeout(function(){var noMovement={x:0,y:0};var _timestamp=Q.milliseconds();var _timeDiff=_timeDiff-_lastTimestamp;var movement=Q.Pointer.movement;movement.times.push(_timestamp);movement.velocities.push(noMovement);movement.movingAverageVelocity=noMovement;movement.accelerations.push({x:-velocity.x/_timeDiff,y:-velocity.y/_timeDiff})},Q.Pointer.movement.timeout)}
_lastTimestamp=_timestamp;_last={x:screenX,y:screenY};Q.Pointer.movement.positions.push(_last)}
var _onPointerEndHandler=Q.Pointer.ended=function _onPointerEndHandler(){setTimeout(function(){Q.Pointer.started=null},0);clearTimeout(_pointerMoveTimeout);Q.removeEventListener(window,Q.Pointer.move,_onPointerMoveHandler);Q.removeEventListener(window,Q.Pointer.end,_onPointerEndHandler);Q.removeEventListener(window,Q.Pointer.cancel,_onPointerEndHandler);Q.removeEventListener(window,Q.Pointer.click,_onPointerClickHandler);Q.handle(Q.Pointer.onEnded,this,arguments);setTimeout(function(){Q.Pointer.canceledClick=!1},100)};function _onPointerClickHandler(e){if(Q.Pointer.canceledClick){e.preventDefault()}
Q.removeEventListener(window,Q.Pointer.click,_onPointerClickHandler)}
function _onPointerBlurHandler(){Q.Pointer.blurring=!0;setTimeout(function(){Q.Pointer.blurring=!1},500)};Q.Dialogs={options:{topMargin:'10%',bottomMargin:'10%'},dialogs:[],push:function(options){var maskDefault=!0;for(var i=0;i<this.dialogs.length;i++){if(!this.dialogs[i].isFullscreen)maskDefault=!1}
var o=Q.extend({mask:maskDefault},Q.Dialogs.options,Q.Dialogs.push.options,options);if(o.fullscreen)o.mask=!1;var $dialog=$(o.dialog);if(o.template){Q.Template.render(o.template.name,o.template.fields,function(err,html){if(!err){_proceed1(html)}})}else{_proceed1(o.content)}
return $dialog&&$dialog[0];function _proceed1(content){if(o.stylesheet){Q.addStylesheet(o.stylesheet,function(){_proceed2(content)})}else{_proceed2(content)}}
function _proceed2(content){var $h2,$title,$content;if(!$dialog.length){$h2=$('<h2 class="Q_dialog_title" />');$title=$('<div class="Q_title_slot" />').append($h2);$content=$('<div class="Q_dialog_slot Q_dialog_content Q_overflow" />');$dialog=$('<div />').append($title).append($content);if(o.className){$dialog.addClass(o.className)}
if(o.apply){$dialog.addClass('Q_overlay_apply')}
if(o.removeOnClose!==!1){o.removeOnClose=!0}}else{$h2=$('.Q_dialog_title',$dialog);$title=$('.Q_title_slot',$dialog)
$content=$('.Q_dialog_slot',$dialog)}
if(o.title){$h2.empty().append(o.title)}
if(content){$content.empty().append(content)}
$dialog.hide();$(o.appendTo||document.body).append($dialog);var _onClose=o.onClose;o.onClose=new Q.Event(function(){if(!Q.Dialogs.dontPopOnClose){Q.Dialogs.pop(!0)}
Q.Dialogs.dontPopOnClose=!1;Q.handle(o.onClose.original,$dialog,[$dialog])},'Q.Dialogs');o.onClose.original=_onClose;$dialog.plugin('Q/dialog',o);var topDialog=null;var dialogs=Q.Dialogs.dialogs;$dialog.isFullscreen=o.fullscreen;if(dialogs.length){topDialog=dialogs[dialogs.length-1]}
if(!topDialog||topDialog[0]!==$dialog[0]){dialogs.push($dialog);if(o.hidePrevious&&topDialog){topDialog.hide()}}}},pop:function(dontTriggerClose){if(dontTriggerClose===undefined){dontTriggerClose=!1}
var $dialog=this.dialogs.pop();if(this.dialogs.length){this.dialogs[this.dialogs.length-1].show()}
if(!dontTriggerClose&&$dialog){Q.Dialogs.dontPopOnClose=!0;if($dialog.data('Q/overlay')){$dialog.data('Q/overlay').close()}else if($dialog.data('Q/dialog')){$dialog.data('Q/dialog').close()}}
if(!this.dialogs.length){Q.Masks.hide('Q.screen.mask')}
return $dialog&&$dialog[0]}};Q.info.useFullscreen=Q.info.isMobile&&Q.info.isAndroid(1000)&&Q.info.isAndroidStock&&Q.info.browserMainVersion<11;Q.Dialogs.push.options={dialog:null,url:null,title:null,content:'',className:null,fullscreen:Q.info.useFullscreen,appendTo:document.body,alignByParent:!1,beforeLoad:new Q.Event(),onActivate:new Q.Event(),beforeClose:new Q.Event(),onClose:null,closeOnEsc:!0,removeOnClose:null,hidePrevious:!0};Q.alert=function(message,options){if(options===undefined)options={};if(options.title===undefined)options.title='Alert';return Q.Dialogs.push(Q.extend({'title':options.title,'content':'<div class="Q_messagebox Q_big_prompt"><p>'+message+'</p></div>','className':'Q_alert','onClose':options.onClose||undefined,'fullscreen':!1,'hidePrevious':!0},options))};Q.confirm=function(message,callback,options){var o=Q.extend({},Q.confirm.options,options);var buttonClicked=!1;var dialog=Q.Dialogs.push(Q.extend({'title':o.title,'content':$('<div class="Q_messagebox Q_big_prompt" />').append($('<p />').html(message),$('<div class="Q_buttons" />').append($('<button class="Q_button" />').html(o.ok),' ',$('<button class="Q_button" />').html(o.cancel))),'className':'Q_confirm','noClose':o.noClose,'onClose':{'Q.confirm':function(){if(!buttonClicked)Q.handle(callback,this,[null])}},'fullscreen':!1,'hidePrevious':!0},options));var $dialog=$(dialog);$dialog.find('.Q_buttons button:first').on(Q.Pointer.end,function(){buttonClicked=!0;Q.Dialogs.pop();Q.handle(callback,root,[!0])});$dialog.find('.Q_buttons button:last').on(Q.Pointer.end,function(){buttonClicked=!0;Q.Dialogs.pop();Q.handle(callback,root,[!1])});return $dialog};Q.confirm.options={title:'Confirm',ok:'OK',cancel:'Cancel',noClose:!0};Q.prompt=function(message,callback,options){function _done(){buttonClicked=!0;var value=$dialog.find('input').val();Q.Dialogs.pop();Q.handle(callback,this,[value])}
if(options===undefined)options={};var o=Q.extend({},Q.prompt.options,options);var buttonClicked=!1;var dialog=Q.Dialogs.push(Q.extend({'title':o.title,'content':$('<div class="Q_messagebox Q_big_prompt" />').append($('<p />').html(message),$('<div class="Q_buttons" />').append($('<input type="text" />').attr({'placeholder':o.placeholder,'maxlength':o.maxLength}),' ',$('<button class="Q_messagebox_done Q_button" />').html(o.ok))),'className':'Q_prompt','onActivate':function(dialog){var field=$(dialog).find('input');var fieldWidth=field.parent().width()-field.next().outerWidth(!0)-5;field.css({width:fieldWidth+'px',boxSizing:'border-box'}).plugin('Q/placeholders').plugin('Q/clickfocus').on('keydown',function(event){if((event.keyCode||event.which)===13){_done()}})},'onClose':{'Q.prompt':function(){if(!buttonClicked)Q.handle(callback,this,[null])}},'fullscreen':!1,'hidePrevious':!0},options));var $dialog=$(dialog);$dialog.find('button').on(Q.Pointer.click,_done);return $dialog};Q.prompt.options={title:'Prompt',ok:'OK',placeholder:'',maxlength:100,noClose:!0};Q.Audio=function(url){if(this===root){throw new Q.Error("Please call Q.Audio with the keyword new")}
var t=this;this.src=url=Q.url(url);var container=document.getElementById('Q-audio-container');if(!container){container=document.createElement('div');container.setAttribute('id','Q-audio-container');container.style.display='none';document.body.appendChild(container)}
this.container=container;var audio=this.audio=document.createElement('audio');audio.setAttribute('src',url);audio.setAttribute('preload','auto');function _handler(e){Q.handle(e.type==='canplay'?Aup.onCanPlay:((e.type==='canplaythrough'?Aup.onCanPlayThrough:Aup.onEnded)),t,[e]);Q.handle(e.type==='canplay'?Q.Audio.onCanPlay:((e.type==='canplaythrough'?Q.Audio.onCanPlayThrough:Q.Audio.onEnded)),t,[e])}
Q.addEventListener(audio,{'canplay':_handler,'canplaythrough':_handler,'ended':_handler});container.appendChild(audio);audio.load();Q.Audio.collection[url]=this};Q.Audio.collection={};Q.Audio.onPlay=new Q.Event();Q.Audio.onPause=new Q.Event();Q.Audio.onCanPlay=new Q.Event();Q.Audio.onCanPlayThrough=new Q.Event();Q.Audio.onEnded=new Q.Event();var Aup=Q.Audio.prototype;Aup.onCanPlay=new Q.Event();Aup.onCanPlayThrough=new Q.Event();Aup.onEnded=new Q.Event();Aup.play=function(from,until,removeAfterPlaying){var t=this;var a=t.audio;from=from||0;if(from>until){throw new Q.Error("Audio.prototype.play: from can't be greater than until")}
if(!a.readyState){return!1}
if(removeAfterPlaying){t.onEnded.set(function(){delete Q.Audio.collection[t.src];container.removeChild(t.audio);t.onEnded.remove('Q.Audio')},'Q.Audio')}
t.playing=!0;t.paused=!1;if(a.currentTime!=from){a.currentTime=from}
if(until){setTimeout(function Q_Audio_play_pause(){a.pause()},(until-from)*1000)}
a.play();Q.handle(Q.Audio.onPlay,this);return t};Aup.pause=function(){var t=this;if(t.playing){t.audio.pause();t.playing=!1;t.paused=!0}
Q.handle(Q.Audio.onPause,this);return t};Q.Audio.pauseAll=function(){for(var url in Q.Audio.collection){Q.Audio.collection[url].pause()}};Q.audio=Q.getter(function _Q_audio(url,handler,options){url=Q.url(url);var audio=Q.Audio.collection[url]?Q.Audio.collection[url]:new Q.Audio(url);if(options&&options.canPlayThrough===!1){audio.onCanPlay.add(handler)}else{audio.onCanPlayThrough.add(handler)}},{cache:Q.Cache.document('Q.audio',100)});Q.Masks={collection:{},mask:function(key,options)
{key=Q.calculateKey(key);if(key in Q.Masks.collection){return Q.Masks.collection[key]}
var mask=Q.Masks.collection[key]=Q.extend({fadeIn:0,fadeOut:0,shouldCover:null},Q.Masks.options[key],options);var me=mask.element=document.createElement('div');me.addClass('Q_mask '+(mask.className||''));if(options&&options.html){me.innerHTML=options.html}
document.body.appendChild(me);me.style.display='none';mask.counter=0;if(options&&options.zIndex){me.style.zIndex=options.zIndex}
return Q.Masks.collection[key]=mask},show:function(key,options)
{if(Q.typeOf(key)==='Q.Tool'){key.Q.beforeRemove.set(function(){Q.Masks.hide(key)},key)}
key=Q.calculateKey(key);var mask=Q.Masks.mask(key,options);if(!mask.counter){var me=mask.element;me.style.display='block';if(mask.fadeIn){var opacity=me.computedStyle().opacity;Q.Animation.play(function(x,y){me.style.opacity=y*opacity},mask.fadeIn);me.style.opacity=0}}
++mask.counter;Q.Masks.update(key);if(mask.duration){setTimeout(function(){Q.Masks.hide(key)},mask.duration)}
return mask},hide:function(key)
{key=Q.calculateKey(key);if(!(key in Q.Masks.collection))return;var mask=Q.Masks.collection[key];if(mask.counter===0)return;var me=mask.element;if(--mask.counter===0){if(mask.fadeOut){var opacity=me.computedStyle().opacity;Q.Animation.play(function(x,y){me.style.opacity=(1-y)*opacity},mask.fadeOut).onComplete.set(function(){me.style.display='none'})}else{me.style.display='none'}}},update:function(key)
{var collection={};if(key){collection[key]=!0}else{collection=Q.Masks.collection}
for(var k in collection){var mask=Q.Masks.collection[k];if(!mask.counter)continue;var html=document.documentElement;var offset=$('body').offset();var scrollLeft=Q.Pointer.scrollLeft()-offset.left;var scrollTop=Q.Pointer.scrollTop()-offset.top;var ms=mask.element.style;var rect=(mask.shouldCover||html).getBoundingClientRect();mask.rect={'left':rect.left,'right':rect.right,'top':rect.top,'bottom':rect.bottom};if(!mask.shouldCover){mask.rect=Q.Pointer.boundingRect(document.body,['Q_mask'])}
ms.left=scrollLeft+mask.rect.left+'px';ms.top=scrollTop+mask.rect.top+'px';ms.width=(mask.rect.right-mask.rect.left)+'px';ms.height=ms['line-height']=(mask.rect.bottom-mask.rect.top)+'px'}},isVisible:function(key)
{key=Q.calculateKey(key);return!!Q.getObject([key,'counter'],Q.Masks.Collection)}};Q.Masks.options={'Q.click.mask':{className:'Q_click_mask',fadeIn:0,fadeOut:0,duration:500},'Q.screen.mask':{className:'Q_screen_mask',fadeIn:100},'Q.request.load.mask':{className:'Q_load_mask',fadeIn:1000},'Q.request.cancel.mask':{className:'Q_cancel_mask',fadeIn:200}};Q.addEventListener(window,Q.Pointer.start,_Q_PointerStartHandler,!1,!0);function noop(){}
if(!root.console){root.console={debug:noop,dir:noop,error:noop,group:noop,groupCollapsed:noop,groupEnd:noop,info:noop,log:noop,time:noop,timeEnd:noop,trace:noop,warn:noop}}
function processStylesheets(){if(Q.findScript('plugins/Q/js/prefixfree.min.js')){var warning="Q.js must be included before prefixfree in order to work properly";console.warn(warning)}
var links=document.getElementsByTagName('link');var slots=processStylesheets.slots;for(var i=0;i<links.length;++i){var rel=links[i].getAttribute('rel');if(!rel||rel.toLowerCase()!=='stylesheet'){continue}
var href=links[i].getAttribute('href');slots[href]=links[i].getAttribute('data-slot')||null}}
processStylesheets.slots={};processStylesheets();Q.addEventListener(window,'load',Q.onLoad.handle);Q.onInit.add(function(){if(!Q.info.baseUrl){throw new Q.Error("Please set Q.info.baseUrl before calling Q.init()")}
Q_hashChangeHandler.currentUrl=window.location.href.split('#')[0].substr(Q.info.baseUrl.length+1);if(window.history.pushState){Q.onPopState.set(Q_popStateHandler,'Q.loadUrl')}else{Q.onHashChange.set(Q_hashChangeHandler,'Q.loadUrl')}
Q.onReady.set(function(){Q.onOnline.set(Q.Socket.reconnectAll,'Q.Socket')},'Q.Socket')},'Q');Q.onJQuery.add(function($){Q.Tool.define({"Q/inplace":"plugins/Q/js/tools/inplace.js","Q/tabs":"plugins/Q/js/tools/tabs.js","Q/form":"plugins/Q/js/tools/form.js","Q/panel":"plugins/Q/js/tools/panel.js","Q/ticker":"plugins/Q/js/tools/ticker.js","Q/timestamp":"plugins/Q/js/tools/timestamp.js","Q/bookmarklet":"plugins/Q/js/tools/bookmarklet.js","Q/columns":"plugins/Q/js/tools/columns.js","Q/drawers":"plugins/Q/js/tools/drawers.js","Q/expandable":"plugins/Q/js/tools/expandable.js","Q/filter":"plugins/Q/js/tools/filter.js","Q/rating":"plugins/Q/js/tools/rating.js","Q/paging":"plugins/Q/js/tools/paging.js"});Q.Tool.jQuery({"Q/placeholders":"plugins/Q/js/fn/placeholders.js","Q/textfill":"plugins/Q/js/fn/textfill.js","Q/autogrow":"plugins/Q/js/fn/autogrow.js","Q/dialog":"plugins/Q/js/fn/dialog.js","Q/flip":"plugins/Q/js/fn/flip.js","Q/gallery":"plugins/Q/js/fn/gallery.js","Q/zoomer":"plugins/Q/js/fn/zoomer.js","Q/fisheye":"plugins/Q/js/fn/fisheye.js","Q/listing":"plugins/Q/js/fn/listing.js","Q/hautoscroll":"plugins/Q/js/fn/hautoscroll.js","Q/imagepicker":"plugins/Q/js/fn/imagepicker.js","Q/viewport":"plugins/Q/js/fn/viewport.js","Q/actions":"plugins/Q/js/fn/actions.js","Q/clickable":"plugins/Q/js/fn/clickable.js","Q/clickfocus":"plugins/Q/js/fn/clickfocus.js","Q/contextual":"plugins/Q/js/fn/contextual.js","Q/scrollIndicators":"plugins/Q/js/fn/scrollIndicators.js","Q/iScroll":"plugins/Q/js/fn/iScroll.js","Q/scroller":"plugins/Q/js/fn/scroller.js","Q/touchscroll":"plugins/Q/js/fn/touchscroll.js","Q/scrollbarsAutoHide":"plugins/Q/js/fn/scrollbarsAutoHide.js","Q/sortable":"plugins/Q/js/fn/sortable.js","Q/validator":"plugins/Q/js/fn/validator.js"});Q.onLoad.add(function(){$.fn.plugin.load(['Q/clickfocus','Q/contextual','Q/scrollIndicators','Q/iScroll','Q/scroller','Q/touchscroll'])});if($&&$.tools&&$.tools.validator&&$.tools.validator.conf){$.tools.validator.conf.formEvent=null}},'Q');function _addHandlebarsHelpers(){var Handlebars=root.Handlebars;if(!Handlebars.helpers.call){Handlebars.registerHelper('call',function(path){if(!path){return "{{call missing method name}}"}
var args=Array.prototype.slice.call(arguments,1,arguments.length-1);var parts=path.split('.');var subparts=parts.slice(0,-1);var f=Q.getObject(parts,this);if(typeof f==='function'){return f.apply(Q.getObject(subparts,this),args)}
var f=Q.getObject(parts);if(typeof f==='function'){return f.apply(Q.getObject(subparts),args)}
return "{{call '"+path+"' not found}}"})}
if(!Handlebars.helpers.tool){Handlebars.registerHelper('idPrefix',function(){var ba=Q.Tool.beingActivated;return(ba?ba.prefix:'')});Handlebars.registerHelper('join',function(array,sep,options){return array.map(function(item){return options.fn(item)}).join(sep)});Handlebars.registerHelper('tool',function(name,id,tag,options){if(!name){return "{{tool missing name}}"}
if(Q.isPlainObject(tag)){options=tag;tag=undefined}
if(Q.isPlainObject(id)){options=id;id=undefined}
tag=tag||'div';var ba=Q.Tool.beingActivated;var prefix=(ba?ba.prefix:'');var o={};var hash=(options&&options.hash);if(hash){for(var k in hash){Q.setObject(k,hash[k],o,'-')}}
if(this&&this[name]){Q.extend(o,this[name])}
if(id){if(typeof id==='string'||typeof id==='number'){id=name.split('/').join('_')+(id!==''?'-'+id:'')}
if(this&&this['id:'+id]){Q.extend(o,this['id:'+id])}}
return Q.Tool.setUpElementHTML(tag,name,o,id,prefix)})}
if(!Handlebars.helpers.url){Handlebars.registerHelper('toUrl',function(url){if(!url){return "{{url missing}}"}
return Q.url(url)})}
if(!Handlebars.helpers.toCapitalized){Handlebars.registerHelper('toCapitalized',function(text){text=text||'';return text.charAt(0).toUpperCase()+text.slice(1)})}
if(!Handlebars.helpers.option){Handlebars.registerHelper('option',function(value,html,selectedValue){var attr=value==selectedValue?' selected="selected"':'';return new Handlebars.SafeString('<option value="'+value.encodeHTML()+'"'+attr+'>'+html+"</option>")})}}
function _Q_trigger_recursive(tool,eventName,args){if(!tool){return!1}
var obj=Q.getObject(eventName,tool);if(obj){Q.handle(obj,tool,args)}
var children=tool.children('',1);for(var id in children){for(var n in children[id]){_Q_trigger_recursive(children[id][n],eventName,args)}}}
Q.loadUrl.fillSlots=function _Q_loadUrl_fillSlots(res,url,options){var elements={},name,elem,pos;var osc=options.slotContainer;if(Q.isPlainObject(osc)){options.slotContainer=function(slotName){return osc[slotName]||document.getElementById(slotName+"_slot")}}
for(name in res.slots){if(name.toUpperCase()==='TITLE'){document.title=res.slots[name]}else if(elem=options.slotContainer(name,res)){try{Q.replace(elem,res.slots[name],options);if(pos=Q.getObject(['Q','scroll',url],elem)){elem.scrollLeft=pos.left;elem.scrollTop=pos.top}}catch(e){debugger;console.warn('slot '+name+' could not be filled');console.warn(e)}
elements[name]=elem}}
return elements}
Q.loadUrl.options={quiet:!1,onError:new Q.Event(),onResponse:new Q.Event(),onLoadStart:new Q.Event(Q.loadUrl.saveScroll,'Q'),onLoadEnd:new Q.Event(),onActivate:new Q.Event(),slotNames:[],slotContainer:function(slotName){return document.getElementById(slotName+"_slot")},handler:Q.loadUrl.fillSlots,key:'Q'};Q.request.options={duplicate:!0,quiet:!0,parse:'json',onRedirect:new Q.Event(function(url){Q.handle(url,{target:'_self',quiet:!0})},"Q"),resultFunction:"result",onLoadStart:new Q.Event(),onShowCancel:new Q.Event(),onLoadEnd:new Q.Event(),onResponse:new Q.Event(),onProcessed:new Q.Event(),onCancel:new Q.Event(function(error){var msg=Q.firstErrorMessage(error);if(msg){console.warn(msg)}},'Q')};Q.onReady.set(function _Q_masks(){_Q_restoreScrolling();Q.request.options.onLoadStart.set(function(url,slotNames,o){if(o.quiet)return;Q.Masks.show('Q.request.load.mask')},'Q.request.load.mask');Q.request.options.onShowCancel.set(function(callback,o){if(o.quiet)return;var mask=Q.Masks.mask('Q.request.cancel.mask').element;var button=mask.querySelectorAll('.Q_load_cancel_button');if(!button.length){button=document.createElement('button');button.setAttribute('class','Q_load_cancel_button');button.innerHTML='Cancel';if(mask[0]){mask=mask[0]}
mask.appendChild(button)}
$(button).off(Q.Pointer.end).on(Q.Pointer.end,callback);Q.Masks.show('Q.request.cancel.mask')},'Q.request.load.mask');Q.request.options.onLoadEnd.set(function(url,slotNames,o){if(o.quiet)return;Q.Masks.hide('Q.request.load.mask');Q.Masks.hide('Q.request.cancel.mask')},'Q.request.load.mask');Q.layout()},'Q.Masks');if(typeof module!=='undefined'&&typeof process!=='undefined'){module.exports=Q}else if(!dontSetGlobals){Q.noConflict=function(extend){if(extend){Q.extend(oldQ,Q)}
root.Q=oldQ;return Q};var oldQ=root.Q;root.Q=Q}
Q.globalNames=Object.keys(root);Q.globalNamesAdded=function(){return Q.diff(Object.keys(window),Q.globalNames)};Q.stackTrace=function(){var obj={};if(Error.captureStackTrace){Error.captureStackTrace(obj,Q.stackTrace)}else{obj=new Error()}
return obj.stack};return Q}).call(this);"use strict";(function(Q,$){var Users=Q.Users=Q.plugins.Users={info:{},apps:{},connected:{},icon:{defaultSize:40}};var dc=Q.extend.dontCopy;dc["Q.Users.User"]=!0;Q.text.Users={login:{title:'Welcome',directions:'Create an account, or log in.',directionsNoRegister:'Log in if you have an account.',explanation:null,goButton:"Go",passphrase:'Enter your pass phrase:',loginButton:"Get Started",registerButton:"Get Started",resendButton:"Send Activation Message",forgot:"Forgot it?",resendConfirm:"Do you want to send a message to reset your passphrase?",resendSuccess:"Check for a message to reset your passphrase",resendClose:"Close",noPassphrase:"Before you can log in, you must set a pass phrase by clicking the link in your activation message.",notVerified:"You must send yourself an activation message in order to log in.",emailExists:"Did you try to register with this email before? If so, check your inbox to activate your account. <a href='#resend'>Click to re-send the message</a>.",mobileExists:"Did you try to register with this mobile number before? If so, check your SMS to activate your account. <a href='#resend'>Click to re-send the message</a>.",usingOther:"or you can ",facebookSrc:null,prompt:"Choose a username:",placeholders:{identifier:"your mobile # or email",mobile:"enter your mobile #",email:"enter your email address",username:"username"},maxlengths:{identifier:100,username:32,passphrase:100},confirmTerms:"Accept the Terms of Service?",facebookNoEmail:"Your facebook account is missing a confirmed email address. Simply log in the native way.",picTooltip:"You can change this picture later"},setIdentifier:{title:"Add a way to log in",sendMessage:"Send Activation Message",placeholders:{identifier:"enter your mobile # or email",mobile:"enter your mobile number",email:"enter your email address",username:"username"}},prompt:{title:"{$Platform} Account",areUsing:"You are using {$platform} as",noLongerUsing:"You are no longer connected to {$platform} as",doAuth:"Log in with this account",doSwitch:"Switch to this account"},authorize:{mustAgree:"First you must agree to the terms."}};var priv={};Users.onError=new Q.Event(function(err,err2){console.warn(Q.firstErrorMessage(err,err2))},'Users.onError');Users.onDevice=new Q.Event(function(response){console.log("Device registered for user with id "+Users.loggedInUserId())},'Users.onError');Users.initFacebook=function(callback,options){var appId=(options&&options.appId)||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){throw new Q.Error("Users.initFacebook: missing facebook app info for '"+appId+"'")}
if(Users.initFacebook.completed[Q.info.app]){callback&&callback();return}
function _init(){if(!Users.initFacebook.completed[appId]&&fbAppId){FB.init(Q.extend({appId:fbAppId,version:'v2.8',status:!0,cookie:!0,oauth:!0,xfbml:!0},Users.initFacebook.options,options));Users.onInitFacebook.handle(Users,window.FB,[appId])}
Users.initFacebook.completed[appId]=!0;callback&&callback()}
if(!$('#fb-root').length){$('body').prepend($('<div id="fb-root"></div>'))}
Q.addScript('https://connect.facebook.net/en_US/sdk.js',_init,{onError:function(){console.log("Couldn't load script:",this,arguments)}})};Users.initFacebook.completed={};Users.initFacebook.options={frictionlessRequests:!0};function FB_getLoginStatus(cb,force){var timeout=2000;if(timeout){var t=setTimeout(function(){console.warn("Facebook is not responding to FB.getLoginStatus within "+timeout/1000+" sec.");cb({})},timeout);FB.getLoginStatus(function(response){clearTimeout(t);cb(response)},force)}else{FB.getLoginStatus(cb,force)}}
Users.initFacebook.ready=function(appId,callback){if(typeof appId==='function'){callback=appId;appId=Q.info.app}
if(Users.initFacebook.completed[appId]){_proceed()}else{Users.onInitFacebook.set(_proceed,"Users.initFacebook.ready")}
function _proceed(){if(FB.getAccessToken()){callback()}else{FB_getLoginStatus(function(response){callback()})}}};Users.authenticate=function(platform,onSuccess,onCancel,options){if(platform!=='facebook'){throw new Q.Error("Users.authenticate: The only supported platform for now is facebook")}
options=options||{};var fields={};Users.authenticate.occurring=!0;var appId=options.appId||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){console.warn("Users.logout: missing Users.apps.facebook."+appId+".appId");return}
Users.initFacebook(function(){FB_getLoginStatus(function(response){if(response.status==='connected'){var fb_uid=parseInt(response.authResponse.userID);var ignoreUid=parseInt(Q.cookie('Users_ignoreFacebookUid'));Q.cookie('Users_ignoreFacebookUid',fb_uid);if(Users.loggedInUser&&Users.loggedInUser.uids.facebook==fb_uid){_doSuccess(null);return}
if(options.prompt===undefined||options.prompt===null){if(fb_uid===ignoreUid){_doCancel()}else{Users.prompt('facebook',fb_uid,_doAuthenticate,_doCancel)}}else if(options.prompt===!1){_doAuthenticate()}else if(options.prompt===!0){Users.prompt('facebook',fb_uid,_doAuthenticate,_doCancel)}else if(typeof options.prompt==='function'){options.prompt('facebook',fb_uid,_doAuthenticate,_doCancel)}else{Users.authenticate.occurring=!1;throw new Q.Error("Users.authenticate: options.prompt is the wrong type")}}else if(fbAppId){Q.cookie('fbs_'+fbAppId,null,{path:'/'});Q.cookie('fbsr_'+fbAppId,null,{path:'/'});_doCancel()}
function _doSuccess(user){Users.connected.facebook=!0;Users.onConnected.handle.call(Users,platform,user,options);Q.handle(onSuccess,this,[user,options]);Users.authenticate.occurring=!1}
function _doCancel(ignoreUid){if(ignoreUid){Q.cookie('Users_ignoreFacebookUid',ignoreUid)}
delete Users.connected.facebook;Users.onConnectionLost.handle.call(Users,platform,options);Q.handle(onCancel,Users,[options]);Users.authenticate.occurring=!1}
function _doAuthenticate(){if(!FB.getAuthResponse()){alert("Connection to facebook was lost. Try connecting again.");_doCancel();return}
var ar=response.authResponse;ar.expires=Math.floor(Date.now()/1000)+ar.expiresIn;ar.fbAppId=fbAppId;ar.appId=appId;fields['Q.Users.facebook.authResponse']=ar;fields.platform='facebook';Q.req('Users/authenticate','data',function(err,response){var fem=Q.firstErrorMessage(err,response);if(fem){alert(fem);return _doCancel()}
var user=response.slots.data;if(user.authenticated!==!0){priv.result=user.authenticated}
priv.used='facebook';user.result=user.authenticated;user.used='facebook';Users.loggedInUser=new Users.User(user);Q.nonce=Q.cookie('Q_nonce');_doSuccess(user)},{method:"post",fields:fields})}},options.force?!0:!1)},{appId:appId})};Users.prompt=function(platform,uid,authCallback,cancelCallback,options){if(platform!=='facebook'){throw new Q.Error("Users.authenticate prompt: The only supported platform for now is facebook")}
var appId=(options&&options.appId)||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!Users.prompt.overlay){Q.addStylesheet(Q.url('plugins/Users/css/Users.css'));var o=Q.extend({},Users.prompt.options,options);var title=Q.text.Users.prompt.title.replace(/{\$platform}/g,platform).replace(/{\$Platform}/g,platform.toCapitalized());var areUsing=Q.text.Users.prompt.areUsing.replace(/{\$platform}/g,platform).replace(/{\$Platform}/g,platform.toCapitalized());var noLongerUsing=Q.text.Users.prompt.noLongerUsing.replace(/{\$platform}/g,platform).replace(/{\$Platform}/g,platform.toCapitalized());var caption;var tookAction=!1;var content_div=$('<div />');var fb_uid;if(fb_uid=Q.getObject(['loggedInUser','identifiers','facebook'],Users)){content_div.append(_usingInformation(fb_uid,noLongerUsing));caption=Q.text.Users.prompt.doSwitch.replace(/{\$platform}/,platform).replace(/{\$Platform}/,platform.toCapitalized())}else{caption=Q.text.Users.prompt.doAuth.replace(/{\$platform}/,platform).replace(/{\$Platform}/,platform.toCapitalized())}
content_div.append(_usingInformation(uid,areUsing)).append(_authenticateActions(caption));Users.prompt.overlay=$('<div id="Users_prompt_overlay" class="Users_prompt_overlay" />');var titleSlot=$('<div class="Q_title_slot" />');titleSlot.append($('<h2 class="Users_dialog_title Q_dialog_title" />').html(title));var dialogSlot=$('<div class="Q_dialog_slot Q_dialog_content">');dialogSlot.append(content_div);Users.prompt.overlay.append(titleSlot).append(dialogSlot).prependTo(o.dialogContainer)}
Q.Dialogs.push({dialog:Users.prompt.overlay,alignByParent:!0,doNotRemove:!0,onActivate:function(){Users.initFacebook(function(){FB.XFBML.parse(content_div.get(0))},{appId:appId})},onClose:function(){if(!tookAction){if(cancelCallback)cancelCallback(uid)}
tookAction=!1}});function _usingInformation(uid,explanation){return $("<table />").append($("<tr />").append($("<td class='Users_profile_pic' />").html("<fb:profile-pic uid='"+uid+"' linked='false' size='square' class='fb_profile_pic'></fb:profile-pic>")).append($("<td class='Users_explanation_name' />").append($("<div class='Users_explanation' />").html(explanation)).append("<fb:name uid='"+uid+"' useyou='false' linked='false' size='square' class='fb_name'>user id "+uid+"</fb:name>")))}
function _authenticateActions(caption){return $("<div class='Users_actions Q_big_prompt' />").append($('<button type="submit" class="Q_button Q_main_button" />').html(caption).click(function(){tookAction=!0;Users.prompt.overlay.data('Q/overlay').close();authCallback()}))}};Users.scope=function(platform,callback,options){if(platform!=='facebook'){throw new Q.Error("Users.scope: The only supported platform for now is facebook")}
var appId=(options&&options.appId)||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);Users.initFacebook(function(){if(!FB.getAuthResponse()){callback(null)}
FB.api('/me/permissions',function(response){if(response&&response.data){var checked=[];Q.each(options&&options.check,function(i,s){var granted=!1;for(var i=0,l=response.data.length;i<l;++i){if(response.data[i].permission===s&&response.data[i].status){granted=!0}}
checked.push(granted)});callback(response.data,checked)}else{callback(null)}})},{appId:appId})};Users.login=function(options){if(typeof options==='function'){options={onSuccess:{'options':options}};if(arguments.length>1){options.onRequireComplete={'Users.login.options':arguments[1]}}}
var o=Q.extend({},Users.login.options,options);if(typeof o.using==='string'){o.using=o.using.split(',')}
Users.login.occurring=!0;if(o.using.indexOf('native')<0){_doLogin()}else{$.fn.plugin.load('Q/dialog',_doLogin)}
return!1;function _doLogin(){var dest;if(o.tryQuietly){if(o.using.indexOf('facebook')>=0){o.force=!0;Users.authenticate('facebook',function(user){_onConnect(user)},function(){_onCancel()},o)}
return!1}
priv.result=null;priv.used=null;if(o.using.indexOf('native')>=0){var appId=(o.appIds&&o.appIds.facebook)||Q.info.app;var usingPlatforms=(o.using.indexOf('facebook')>=0)?{facebook:appId}:{};login_setupDialog(usingPlatforms,o.scope,o.dialogContainer,o.identifierType);priv.login_onConnect=_onConnect;priv.login_onCancel=_onCancel;priv.linkToken=null;priv.scope=o.scope;priv.activation=o.activation;var d=login_setupDialog.dialog;if(d.css('display')=='none'){d.data('Q/dialog').load()}
$('#Users_login_step1').show();$('#Users_login_usingPlatforms').show();$('#Users_login_step1_form *').removeAttr('disabled');$('#Users_login_identifierType').val(o.identifierType)}else if(o.using[0]==='facebook'){Users.initFacebook(function(){var opts=o.scope?{scope:o.scope.join(',')}:undefined;FB.login(function(response){if(!response.authResponse){_onCancel();return}
if(Q.isEmpty(o.scope)){_success();return}
Users.scope('facebook',function(scope,checked){if(!scope){_onCancel(null);return}
for(var i=0;i<checked.length;++i){if(!checked[i]){_onCancel(scope);return}}
_success();function _success(){Users.authenticate('facebook',function(user){_onConnect(user)},function(){_onCancel()},{"prompt":!1})}},{check:o.scope})},opts)},{appId:appId})}
delete priv.login_connected}
function _onConnect(user){if(user){user.result=priv.result;user.used=priv.used;Users.loggedInUser=new Users.User(user);Q.nonce=Q.cookie('Q_nonce')}
if(!o.accountStatusUrl){_onComplete(user);return}
Q.request(o.accountStatusUrl,'accountStatus',function(err,response2){var fem=Q.firstErrorMessage(err,response2);if(fem){return alert(fem)}
Users.login.occurring=!1;if(!o.onRequireComplete||response2.slots.accountStatus==='complete'){_onComplete(user)}else if(response2.slots.accountStatus==='refresh'){Q.handle(window.location);return}else{if(!1!==Q.handle(o.onResult,this,[user,response2,o])){Q.handle(o.onRequireComplete,this,[user,response2,o])}}})}
function _onCancel(scope){if(!1!==Q.handle(o.onResult,this,[scope,o])){Q.handle(o.onCancel,this,[scope,o])}
Users.login.occurring=!1}
function _onComplete(user){Users.onLogin.handle(user);var pn=priv.used||'native';var ret=Q.handle(o.onResult,this,[user,o,priv.result,pn]);if(!1!==ret){Q.handle(o.onSuccess,this,[user,o,priv.result,pn])}
Users.login.occurring=!1}};Users.logout=function(options){if(typeof options==='function'){options={onSuccess:{'options':options}}}
var o=Q.extend({},Users.logout.options,options);if(typeof o.using==='string'){o.using=o.using.split(',')}
Users.logout.occurring=!0;function callback(err,response){if(response&&response.slots&&response.slots.script){try{eval(response.slots.script)}catch(e){alert(e)}}
setTimeout(function(){Users.logout.occurring=!1},0);Users.lastSeenNonce=Q.cookie('Q_nonce');Users.roles={};var appId=o.appId||Q.info.app;if(fbAppId&&o.using.indexOf('facebook')>=0){var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){console.warn("Users.logout: missing Users.apps.facebook."+appId+".appId")}
Q.cookie('fbs_'+fbAppId,null,{path:'/'});Q.cookie('fbsr_'+fbAppId,null,{path:'/'});if((o.using[0]==='native'||o.using[1]==='native')){Users.loggedInUser=null;Q.nonce=Q.cookie('Q_nonce')}
Users.initFacebook(function logoutCallback(){FB_getLoginStatus(function(response){if(response.authResponse){FB.logout(function(){delete Users.connected.facebook;Users.onLogout.handle.call(this,o);Q.handle(o.onSuccess,this,[o])})}else{Users.onLogout.handle.call(this,o);Q.handle(o.onSuccess,this,[o])}},!0)},{appId:appId})}else{var fb_uid=Q.getObject(['loggedInUser','identifiers','facebook'],Users);if(fb_uid){Q.cookie('Users_ignoreFacebookUid',fb_uid)}
Users.loggedInUser=null;Q.nonce=Q.cookie('Q_nonce');Users.onLogout.handle.call(this,o);Q.handle(o.onSuccess,this,[o])}}
if(!o.url){callback();return!1}
var url=o.url+(o.url.indexOf('?')<0?'?':'')+'&logout=1';Q.request(url,'script',callback,{"method":"post"});return!0};Users.loggedInUserId=function(){return Users.loggedInUser?Users.loggedInUser.id:''};Users.get=function(userId,callback){var func=Users.batchFunction(Q.baseUrl({userIds:userId}),'user',['userIds']);func.call(this,userId,function Users_get_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(!msg&&!data.user){msg="Users.get: no such user"}
if(msg){Users.onError.handle.call(this,msg,err,data.user);Users.get.onError.handle.call(this,msg,err,data.user);return callback&&callback.call(this,msg)}
var user=new Users.User(data.user);callback.call(user,err,user)})}
Users.get.onError=new Q.Event();Users.User=function(fields){Q.extend(this,fields);this.typename='Q.Users.User'};Users.User.prototype.iconUrl=function Users_User_iconUrl(size){return Users.iconUrl(this.icon.interpolate({userId:this.id.splitId()}),size)};Users.User.get=Users.get;Users.iconUrl=function Users_iconUrl(icon,size){if(!icon){console.warn("Users.iconUrl: icon is empty");return ''}
if(!size||size===!0){size='40'}
size=(String(size).indexOf('.')>=0)?size:size+'.png';var src=(icon+'/'+size).interpolate({"baseUrl":Q.info.baseUrl});return src.isUrl()?src:Q.url('plugins/Users/img/icons/'+src)};function _constructUser(fields){var user=new Users.User(fields);Users.get.cache.removeEach(fields.id);if(fields.id){Users.get.cache.set([fields.id],0,user,[null,user])}}
Users.batchFunction=function Users_batchFunction(baseUrl,action,fields){return Q.batcher.factory(Users.batchFunction.functions,baseUrl,"/action.php/Users/"+action,"batch","batch",{preprocess:function(args){var i,j,obj={},field;for(i=0;i<args.length;++i){for(j=0;j<fields.length;++j){field=fields[j];obj[field]=obj[field]||[];obj[field].push(args[i][j])}}
return obj}})};Users.batchFunction.functions={};Q.onActivate.set(function(elem){$(elem||document).off('click.Users').on('click.Users','a',function(e){var href=$(this).attr('href');if(!Users.requireLogin||!Users.requireLogin[href]){return}
if(Users.requireLogin[href]==='facebook'){if(!Users.connected.facebook){Users.login({'using':'facebook',onSuccess:href});e.preventDefault()}}else if(Users.requireLogin[href]===!0){Users.login({onSuccess:href});e.preventDefault()}})},'Users');Users.importContacts=function(platform)
{window.open(Q.action("Users/importContacts?platform="+platform),"import_contacts","scrollbars,resizable,width=700,height=500")};Users.setIdentifier=function(options){var o=Q.extend({},Users.setIdentifier.options,options);function onSuccess(user){if(!1!==Q.handle(o.onResult,this,[user])){Q.handle(o.onSuccess,this,[user])}}
function onCancel(scope){if(!1!==Q.handle(o.onResult,this,[scope])){Q.handle(o.onCancel,this,[scope])}}
priv.setIdentifier_onSuccess=onSuccess;priv.setIdentifier_onCancel=onCancel;$.fn.plugin.load(['Q/dialog','Q/placeholders'],function(){setIdentifier_setupDialog(o.identifierType,o);var d=setIdentifier_setupDialog.dialog;if(d.css('display')=='none'){d.data('Q/dialog').load()}
$('#Users_setIdentifier_type').val(o.identifierType)})};function login_callback(err,response){var identifier_input=$('#Users_login_identifier');var form=$('#Users_login_step1_form');identifier_input.css('background-image','none');if(response.errors){form.plugin('Q/validator','invalidate',Q.ajaxErrors(response.errors,['identifier']));identifier_input.plugin('Q/clickfocus');return}
form.plugin('Q/validator','reset');identifier_input.blur();var json=response.slots.data;var step2_form;var autologin=!1;var setupRegisterForm=Users.login.options.setupRegisterForm||defaultSetupRegisterForm;if(form.data('used')==='facebook'){autologin=!0;Users.authenticate('facebook',function(user){var msg=user&&user.username?'Welcome, '+user.username+'!':'Success!';if(step2_form!==undefined){$('button',step2_form).html(msg).attr('disabled','disabled')}
if(priv.login_onConnect){priv.login_connected=!0;if(setIdentifier_setupDialog.dialog){setIdentifier_setupDialog.dialog.data('Q/dialog').close()}
if(login_setupDialog.dialog){login_setupDialog.dialog.data('Q/dialog').close()}
priv.login_onConnect(user)}},function(){alert("Could not authenticate with facebook. Try again.");if(login_setupDialog.dialog){login_setupDialog.dialog.data('Q/dialog').close()}},{"prompt":!1})}else if(!json.exists){step2_form=setupRegisterForm(identifier_input.val(),json,priv,login_setupDialog.dialog.data('Q/dialog'))}else if(json.passphrase_set){step2_form=setupLoginForm()}else if(json.verified){step2_form=setupResendForm(!0)}else{step2_form=setupResendForm(!1)}
var userId=response.slots.data.exists;function onFormSubmit(event){var $this=$(this);event.preventDefault();if($this.data('cancelSubmit')){return}
if(!$this.is(':visible')){return}
var first_input=$('input:not([type=hidden])',$this).add('button',$this).eq(0);var h=$('#Users_login_identifier').outerHeight()-5;$('input',$this).css({'background-image':'url('+Q.info.imgLoading+')','background-repeat':'no-repeat','background-size':'auto '+first_input.height()+'px','background-position':'right center'});if(window.CryptoJS){var p=$('#Users_form_passphrase');var v=p.val();if(v){if(!/^[0-9a-f]{40}$/i.test(v)){p.val(CryptoJS.SHA1(p.val()+"\t"+userId))}
$('#Users_login_isHashed').attr('value',1)}else{$('#Users_login_isHashed').attr('value',0)}}
var url=$this.attr('action')+'?'+$this.serialize();Q.request(url,'data',function(err,response){$('#Users_form_passphrase').attr('value','').trigger('change');$('input',$this).css('background-image','none');if(err||(response&&response.errors)){if(response&&response.errors){$this.plugin('Q/validator','invalidate',Q.ajaxErrors(response.errors,[first_input.attr('name')]))}
$('#Users_login_identifier').blur();first_input.plugin('Q/clickfocus');return}
Users.lastSeenNonce=Q.cookie('Q_nonce');Users.roles=response.slots.data.roles||{};switch($this.data('form-type')){case 'resend':$('button',$this).html('Sent').attr('disabled','disabled');login_setupDialog.dialog.data('Q/dialog').close();return;case 'register':priv.result='registered';break}
priv.used=$('#Users_login_step1_form').data('used');var msg='Success!';var u;if(u=response.slots.data.user){msg='Welcome, '+(u.displayName||u.username)+'!'}
$('button',$this).html(msg).attr('disabled','disabled');if(priv.login_onConnect){priv.login_connected=!0;if(login_setupDialog.dialog){login_setupDialog.dialog.data('Q/dialog').close()}
priv.login_onConnect(response.slots.data.user)}},{"method":"post"})}
function setupLoginForm(){var passphrase_input=$('<input type="password" name="passphrase" id="Users_form_passphrase" class="Q_password" />').attr('maxlength',Q.text.Users.login.maxlengths.passphrase).attr('maxlength',Q.text.Users.login.maxlengths.passphrase).attr('autocomplete','current-password').on('change keyup input',function(){$('#Users_login_passphrase_forgot').css('display',$(this).val()?'none':'inline')});var $b=$('<a class="Q_button Users_login_start Q_main_button" />').html(Q.text.Users.login.loginButton).on(Q.Pointer.start,function(){Users.submitClosestForm.apply(this,arguments);return!1});var login_form=$('<form method="post" />').attr('action',Q.action("Users/login")).data('form-type','login').append($("<div id='Users_login_label_div'>").append($('<label for="Users_login_passphrase" />').html(Q.text.Users.login.passphrase))).append($("<div id='Users_login_passphrase_div' >").append(passphrase_input,$('<a id="Users_login_passphrase_forgot" href="#forgot"/>').html(Q.text.Users.login.forgot).on(Q.Pointer.touchclick,function(){if(Q.text.Users.login.resendConfirm){if(confirm(Q.text.Users.login.resendConfirm)){_resend()}}else{_resend()}
function _resend(){Q.req('Users/resend','data',function(err){$('#Users_login_step1').hide();$('#Users_login_step2').empty().append($('<div id="Users_login_resend_success" />').append($('<p />').html(Q.text.Users.login.resendSuccess),$('<button class="Q_button Q_main_button" />').html(Q.text.Users.login.resendClose).click(function(){$('form',login_setupDialog.dialog).each(function(){$(this).plugin('Q/validator','reset')});login_setupDialog.dialog.data('Q/dialog').close()})))},{method:'post',fields:{identifier:identifier_input.val()}})};return!1}))).append($('<input type="hidden" name="identifier" />').val(identifier_input.val())).append($('<div class="Q_buttons"></div>').append($b)).append($('<input type="hidden" name="isHashed" id="Users_login_isHashed" value="0" />'));return login_form}
function setupResendForm(verified){var explanation=verified?$('<p id="Users_login_noPassphrase"></p>').html(Q.text.Users.login.noPassphrase):$('<p id="Users_login_notVerified"></p>').html(Q.text.Users.login.notVerified);var identifier_form=$('<form method="post" />').attr('action',Q.action("Users/resend")).data('form-type','resend').append(explanation).append($('<div class="Q_buttons"></div>').append($('<button id="Users_login_resend" class="Q_button Users_login_start Q_main_button" />').html(Q.text.Users.login.resendButton).attr('name','resend').click(submitClosestForm))).append($('<input type="hidden" name="identifier" />').val(identifier_input.val()));return identifier_form}
function defaultSetupRegisterForm(identifier,json,priv,dialog){var src=json.entry[0].photos&&json.entry[0].photos.length?json.entry[0].photos[0].value:json.entry[0].thumbnailUrl;var src40=src,src50=src,src80=src;var username=json.entry[0].preferredUsername||json.entry[0].displayName;if(priv.registerInfo){if(priv.registerInfo.username){username=priv.registerInfo.username}
if(priv.registerInfo.pic){src40=src50=src=src80=priv.registerInfo.pic}}
var $img=$('<img />').attr('src',src).attr('title',Q.text.Streams.login.picTooltip);var td,table=$('<table />').append($('<tr />').append($('<td class="Users_login_picture" />').append($img)).append(td=$('<td class="Users_login_username_block" />').append($('<label for="Users_login_username" />').html(Q.text.Users.login.prompt)).append($('<input id="Users_login_username" name="username" type="text" class="text" />').attr('maxlength',Q.text.Users.login.maxlengths.username).attr('placeholder',Q.text.Users.login.placeholders.username).val(username).width($('#Users_login_identifier').width()-30))));var register_form=$('<form method="post" class="Users_register_form" />').attr('action',Q.action("Users/register")).data('form-type','register').append(table).append($('<input type="hidden" name="identifier" />').val(identifier)).append($('<input type="hidden" name="icon[40.png]" />').val(src40)).append($('<input type="hidden" name="icon[50.png]" />').val(src50)).append($('<input type="hidden" name="icon[80.png]" />').val(src80)).append($('<div class="Users_login_get_started">&nbsp;</div>').append($('<button type="submit" class="Q_button Users_login_start Q_main_button" />').html(Q.text.Users.login.registerButton))).submit(function(){var $this=$(this);$this.removeData('cancelSubmit');document.activeElement.blur();if(!$('#Users_agree').attr('checked')){$this.data('cancelSubmit',!0);setTimeout(function(){if(confirm(Q.text.Users.login.confirmTerms)){$('#Users_agree').attr('checked','checked');$this.submit()}},300)}});if(priv.activation){register_form.append($('<input type="hidden" name="activation" />').val(priv.activation))}
if(json.termsLabel){td.append($('<div />').attr("id","Users_register_terms").append($('<input type="checkbox" name="agree" id="Users_agree" value="yes">')).append($('<label for="Users_agree" />').html(json.termsLabel)))}
var authResponse;var $form=$('#Users_login_step1_form');if($form.data('used')==='facebook'){var platforms=$form.data('platforms');var appId=platforms.facebook||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){console.warn("Users.defaultSetupRegisterForm: missing Users.apps.facebook."+appId+".appId")}
Users.initFacebook(function(){var k;if((authResponse=FB.getAuthResponse())){authResponse.appId=appId;authResponse.fbAppId=fbAppId;for(k in authResponse){register_form.append($('<input type="hidden" />').attr('name','Q.Users.facebook.authResponse['+k+']').attr('value',authResponse[k]))}}},{appId:appId});register_form.append($('<input type="hidden" name="app[platform]" value="facebook" />'))}
if(json.emailExists||json.mobileExists){var p=$('<p id="Users_login_identifierExists" />').html(json.emailExists?Q.text.Users.login.emailExists:Q.text.Users.login.mobileExists);$('a',p).click(function(){$.post(Q.ajaxExtend(Q.action("Users/resend"),'data'),'identifier='+encodeURIComponent(identifier_input.val()),function(){dialog.close()});return!1});register_form.append(p)}
return register_form}
$('#Users_login_usingPlatforms').hide();if(form.data('used')){$('*',form).attr('disabled','disabled')}
if(!autologin){var step2=$('#Users_login_step2').html(step2_form);var $dc=step2.closest('.Q_dialog_content');if(Q.info&&Q.info.isTouchscreen){step2.show();$dc.scrollTop($dc[0].scrollHeight-$dc[0].clientHeight);if(!Q.info.isAndroid()){step2_form.plugin('Q/placeholders')}
$('input',step2_form).eq(0).plugin('Q/clickfocus').select();_centerIt()}else{step2.slideDown('fast',function(){$dc.scrollTop($dc[0].scrollHeight-$dc[0].clientHeight);_centerIt();step2_form.plugin('Q/placeholders');if(step2_form.data('form-type')==='resend'){$('.Q_main_button',step2_form).focus()}else if(!Q.info.isTouchscreen){$('input',step2_form).eq(0).plugin('Q/clickfocus').select()}})}
Q.activate($('#Users_login_step2').get(0))}
$('#Users_login_step1').animate({"opacity":0.5},'fast');$('#Users_login_step1 .Q_button').attr('disabled','disabled');if(!autologin){step2_form.plugin('Q/validator').submit(function(e){e.preventDefault()}).submit(Q.throttle(onFormSubmit,300));$('input',step2_form).add('select',step2_form).on('input',function(){step2_form.plugin('Q/validator','reset',this)})}
if(priv.linkToken){$('#Users_login_step1').hide()}
function _centerIt(){var $d=$('#Users_login_passphrase_div');var $f=$('#Users_login_passphrase_forgot');$f.css('bottom',($d.outerHeight(!0)-$f.outerHeight(!0))/2+'px')}}
function login_setupDialog(usingPlatforms,scope,dialogContainer,identifierType)
{$('#Users_login_step1_form').data('used',null);if(login_setupDialog.dialog){return}
var step1_form=$('<form id="Users_login_step1_form" method="post" autocomplete="on" />');var step1_div=$('<div id="Users_login_step1" class="Q_big_prompt" />').html(step1_form);var step2_div=$('<div id="Users_login_step2" class="Q_big_prompt" />');var placeholder=Q.text.Users.login.placeholders.identifier;var type=Q.info.isTouchscreen?'email':'text';var parts=identifierType?identifierType.split(','):[];if(parts.length===1){if(parts[0]=='email'){type='email';placeholder=Q.text.Users.login.placeholders.email}else if(parts[0]=='mobile'){type='tel';placeholder=Q.text.Users.login.placeholders.mobile}}
Q.addScript("plugins/Q/js/sha1.js");var identifierInput=$('<input id="Users_login_identifier" autocomplete="email" type="'+type+'" class="text" />').attr('maxlength',Q.text.Users.login.maxlengths.identifier).attr('placeholder',placeholder).attr('autocomplete','username').focus(hideForm2);if(type==='email'){identifierInput.attr('name','email')}else if(type==='mobile'){identifierInput.attr('name','phone')}
var $a=$('<a class="Q_button Users_login_go Q_main_button" />').append($('<span id="Users_login_go_span">'+Q.text.Users.login.goButton+'</span>')).on(Q.Pointer.touchclick,function(){submitClosestForm.apply($a,arguments)}).on(Q.Pointer.click,function(e){e.preventDefault()});var directions=Q.plugins.Users.login.serverOptions.noRegister?Q.text.Users.login.directionsNoRegister:Q.text.Users.login.directions;step1_form.html($('<label for="Users_login_identifier" />').html(directions)).append('<br />').append(identifierInput).append($('<input id="Users_login_identifierType" type="hidden" name="identifierType" />').val(identifierType)).append('&nbsp;').append($a).append($('<div id="Users_login_explanation" />').html(Q.text.Users.login.explanation)).submit(function(event){$('#Users_login_identifier').attr('name','identifier');if(!$(this).is(':visible')){event.preventDefault();return}
$('.Q_button',$(this)).focus();var h=$('#Users_login_identifier').outerHeight()-5;$('#Users_login_identifier').css({'background-image':'url('+Q.info.imgLoading+')','background-repeat':'no-repeat','background-position':'right center','background-size':'auto '+h+'px'}).trigger('Q_refresh');var url=Q.action(Users.login.options.userQueryUri)+'?'+$(this).serialize();Q.request(url,['data'],login_callback,{xhr:Q.info.isTouchscreen?'sync':{}});event.preventDefault();return}).on('keydown change click input',hideForm2);if(Q.info.isTouchscreen){identifierInput.on('keyup',function(){var i,found=0,val=$(this).val();if(val.length===0)return;var number=val.replace(/[^0-9]/g,'');if((number[0]==='1'&&number.length===11)||(number[0]!=='1'&&number.length===10)){$(this).blur();return}
if(val.indexOf('@')>=0){var ext=val.split('.').pop();var exts=["com","net","org","edu","gov","info","mil"];if(exts.indexOf(ext)>=0){$(this).blur();return}}})}
step1_form.plugin('Q/validator');var step1_usingPlatforms_div=$('<div id="Users_login_usingPlatforms" />');var platformCount=0;for(var platform in usingPlatforms){var appId=usingPlatforms[platform];switch(platform){case 'facebook':var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){console.warn("Users.login: missing Users.apps.facebook."+appId+".appId");break}
++platformCount;var facebookLogin=$('<a href="#login_facebook" id="Users_login_with_facebook" />').append($('<img alt="login with facebook" />').attr('src',Q.text.Users.login.facebookSrc||Q.url('plugins/Users/img/facebook-login.png'))).css({'display':'inline-block','vertical-align':'middle'}).click(function(){Users.initFacebook(function(){FB.login(function(response){if(!response.authResponse){return}
step1_form.data('used','facebook');step1_form.data('platforms',usingPlatforms);var p=Q.pipe(['me','picture'],function(params){var me=params.me[0];var picture=params.picture[0].data;if(!me.email){step1_form.data('used',null);alert(Q.text.Users.login.facebookNoEmail);$('#Users_login_identifier').plugin('Q/clickfocus');return!0}
priv.registerInfo={firstName:me.first_name,lastName:me.last_name,gender:me.gender,birthday:me.birthday,timezone:me.timezone,locale:me.locale,verified:me.verified,pic:picture.url,picWidth:picture.width,picHeight:picture.height};$('#Users_login_identifier').val(me.email).closest('form').submit()});FB.api("/me/picture",{"redirect":!1,"height":"200","type":"normal","width":"200"},p.fill('picture'));FB.api('/me?fields=first_name,last_name,gender,birthday,timezone,locale,verified,email',p.fill('me'))},scope?{scope:scope.join(',')}:undefined)},{appId:appId});return!1});step1_usingPlatforms_div.append(Q.text.Users.login.usingOther).append(facebookLogin);Q.addScript('https://connect.facebook.net/en_US/sdk.js');break}}
if(platformCount){step1_div.append(step1_usingPlatforms_div)}
$('input',step1_form).add('select',step1_form).on('input',function(){step1_form.plugin('Q/validator','reset',this)});var dialog=$('<div id="Users_login_dialog" class="Users_login_dialog" />');var titleSlot=$('<div class="Q_title_slot" />');titleSlot.append($('<h2 class="Users_dialog_title Q_dialog_title" />').html(Q.text.Users.login.title));var dialogSlot=$('<div class="Q_dialog_slot Q_dialog_content">');dialogSlot.addClass('Q_scrollToBottom').append(step1_div,step2_div);login_setupDialog.dialog=dialog;dialog.append(titleSlot).append(dialogSlot).prependTo(dialogContainer).plugin('Q/dialog',{alignByParent:!0,fullscreen:!1,beforeLoad:function()
{$('#Users_login_step1').css('opacity',1).nextAll().hide();$('input[type!=hidden]',dialog).val('')},onActivate:function()
{dialog.plugin('Q/placeholders');$('input[type!=hidden]',dialog).eq(0).val('').plugin('Q/clickfocus')},onClose:function()
{$('#Users_login_step1 .Q_button').removeAttr('disabled');$('form',dialog).each(function(){$(this).plugin('Q/validator','reset')});$('#Users_login_step1').nextAll().hide();if(!priv.login_connected&&priv.login_onCancel){priv.login_onCancel()}
$(this).remove();login_setupDialog.dialog=null}});function hideForm2(){if(_submitting){return}
if($('#Users_login_step1').next().is(':visible')){$('#Users_login_step1').animate({"opacity":1},'fast');$('#Users_login_step1 *').removeAttr('disabled')}
priv.registerInfo=null;var $nextAll=$('#Users_login_step1').nextAll();if($nextAll.is(':visible')){$nextAll.slideUp('fast').each(function(){$('form',$(this)).plugin('Q/validator','reset')})}
if($('#Users_login_usingPlatforms').css('display')==='none'){$('#Users_login_usingPlatforms').css({opacity:0}).show().animate({opacity:1},'fast')}}}
function setIdentifier_callback(err,response){var identifier_input=$('#Users_setIdentifier_identifier');var form=$('#Users_setIdentifier_step1_form');identifier_input.css('background-image','none');var msg=Q.firstErrorMessage(err,response);if(msg){Q.handle(priv.setIdentifier_onCancel,this,[err,response]);form.plugin('Q/validator','invalidate',Q.ajaxErrors(response.errors,'identifier'));identifier_input.plugin('Q/clickfocus');return}
form.plugin('Q/validator','reset');Q.handle(priv.setIdentifier_onSuccess);setIdentifier_setupDialog.dialog.data('Q/dialog').close()}
function setIdentifier_setupDialog(identifierType,options){var options=options||{};var placeholder=Q.text.Users.setIdentifier.placeholders.identifier;var type='email';var parts=identifierType?identifierType.split(','):[];if(parts.length===1){if(parts[0]=='email'){type='email';placeholder=Q.text.Users.setIdentifier.placeholders.email}else if(parts[0]=='mobile'){type='tel';placeholder=Q.text.Users.setIdentifier.placeholders.mobile}}
var step1_form=$('<form id="Users_setIdentifier_step1_form" />');var step1_div=$('<div id="Users_setIdentifier_step1" class="Q_big_prompt" />').html(step1_form);step1_form.empty().append($('<input id="Users_setIdentifier_identifier" type="email" name="identifier" class="text" />').attr('maxlength',Q.text.Users.login.maxlengths.identifier).attr('placeholder',placeholder)).append($('<input id="Users_setIdentifier_type" type="hidden" name="identifierType" />').val(identifierType)).append($('<div class="Q_buttons"/>').html($('<button type="submit" class="Q_button Users_setIdentifier_go Q_main_button" />').html(Q.text.Users.setIdentifier.sendMessage))).submit(function(event){var h=$('#Users_setIdentifier_identifier').outerHeight()-5;$('#Users_setIdentifier_identifier').css({'background-image':'url('+Q.info.imgLoading+')','background-repeat':'no-repeat','background-position':'right center','background-size':'auto '+h+'px'});var url=Q.action('Users/identifier')+'?'+$(this).serialize();Q.request(url,'data',setIdentifier_callback,{"method":"post"});event.preventDefault();return});if(options.userId){step1_form.append($('<input />').attr({type:"hidden",name:"userId",value:options.userId}))}
step1_form.plugin('Q/validator');var dialog=$('<div id="Users_setIdentifier_dialog" class="Users_setIdentifier_dialog" />');var titleSlot=$('<div class="Q_title_slot">').append($('<h2 class="Users_dialog_title Q_dialog_title" />').html(options.title||Q.text.Users.setIdentifier.title));var dialogSlot=$('<div class="Q_dialog_slot Q_dialog_content">').append(step1_div);dialog.append(titleSlot).append(dialogSlot).prependTo(options.dialogContainer);dialog.plugin('Q/dialog',{alignByParent:!0,fullscreen:!1,beforeLoad:function()
{$('input[type!=hidden]',dialog).val('')},onActivate:function()
{dialog.plugin('Q/placeholders');$('input[type!=hidden]',dialog).eq(0).val('').plugin('Q/clickfocus')},onClose:function()
{$('form',dialog).each(function(){$(this).plugin('Q/validator','reset')});if(priv.setIdentifier_onCancel){priv.setIdentifier_onCancel()}
$(this).remove();setIdentifier_setupDialog.dialog=null}});setIdentifier_setupDialog.dialog=dialog}
var _submitting=!1;var submitClosestForm=Users.submitClosestForm=function submitClosestForm(){_submitting=!0;$(this).closest('form').submit();setTimeout(function(){_submitting=!1},500);return!1}
Users.vote=function(forType,forId,value){var fields={forType:forType,forId:forId};if(value!==undefined){fields.value=value}
Q.req('Users/vote',['vote'],function(err,result){var msg=Q.firstErrorMessage(err,result&&result.errors);if(msg){return console.warn(msg)}},{method:'POST',fields:fields})};Users.hint=function(key,elementOrPoint,options){if(!elementOrPoint||!Users.loggedInUser||Users.hinted.indexOf(key)>=0){return!1}
Q.Pointer.hint(elementOrPoint,options);Users.hinted.push(key);Users.vote('Users/hinted',key);return!0};Users.facebookDialog=function(options)
{$('.Users_facebookDialog').remove();$('.Users_facebookDialog_shadow').remove();var o=$.extend({'position':null,'shadow':!1,'title':'Needs a title','content':'Needs content','buttons':{}},options);if(o.shadow){var shadow=$('<div class="Users_facebookDialog_shadow" />');$('body').append(shadow)}
var dialog=$('<div class="Users_facebookDialog">'+'<div class="Users_facebookDialog_title">'+o.title+'</div>'+'<div class="Users_facebookDialog_content">'+o.content+'</div>'+'</div>');var buttonsBlock=$('<div class="Users_facebookDialog_buttons" />');Q.each(o.buttons,function(k,b){function _buttonHandler(handler){return function(){if(handler){handler(dialog)}else{alert("Users.facebookDialog has no click handler for this button");dialog.close()}}}
var button=$('<button />').html(b.label||'Needs a label').click(_buttonHandler(b.handler)).appendTo(buttonsBlock);if(b['default']){button.addClass('Q_button Users_facebookDialog_default_button')}});dialog.append(buttonsBlock);$('body').append(dialog);if(o.position){dialog.css({left:o.position.x+'px',top:o.position.y+'px'})}else{dialog.css({left:((Q.Pointer.windowHeight()-dialog.width())/2)+'px',top:((Q.Pointer.windowHeight()-dialog.height())/2)+'px'})}
dialog.show();dialog.close=function(){dialog.remove();if(typeof(shadow)!='undefined'){shadow.remove()}}};Users.getContacts=function(userId,labels,contactUserIds,callback){if(typeof labels==='function'){callback=labels;labels=contactUserIds=undefined}else if(typeof contactUserIds==='function'){callback=contactUserIds;contactUserIds=undefined}
Q.req('Users/contact','contacts',function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){Users.onError.handle.call(this,msg,err,data.contacts);Users.get.onError.handle.call(this,msg,err,data.contacts);return callback&&callback.call(this,msg)}
Q.each(data.slots.contacts,function(i){data.slots.contacts[i]=new Users.Contact(data.slots.contacts[i])});Q.handle(callback,data,[err,data.slots.contacts])},{fields:{userId:userId,labels:labels,contactUserIds:contactUserIds},method:'post'})};Users.getLabels=function(userId,prefix,callback){if(typeof prefix==='function'){callback=prefix;prefix=undefined}
Q.req('Users/label','labels',function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){Users.onError.handle.call(this,msg,err,data.labels);Users.get.onError.handle.call(this,msg,err,data.labels);return callback&&callback.call(this,msg)}
Q.each(data.slots.labels,function(i){data.slots.labels[i]=new Users.Label(data.slots.labels[i])});Q.handle(callback,data,[err,data.slots.labels])},{fields:{userId:userId,labels:prefix},method:'post'})};var Contact=Users.Contact=function Users_Contact(fields){Q.extend(this,fields);this.typename='Q.Users.Contact'};var Cp=Contact.prototype;Contact.get=function(userId,label,contactUserId,callback){var func=Users.batchFunction(Q.baseUrl({userIds:userId,label:label,contactUserId:contactUserId}),'contact',['userIds','labels','contactUserIds']);func.call(this,userId,label,contactUserId,function Users_Contact_get_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(!msg&&!data.contact){msg="Users.Contact.get: no such contact"}
if(msg){Users.onError.handle.call(this,msg,err,data.contact);Users.get.onError.handle.call(this,msg,err,data.contact);return callback&&callback.call(this,msg)}
var contact=new Users.Contact(data.contact);callback.call(contact,err,contact)})};function _Users_manage(action,method,fields,field,Constructor,getter,callback){if(getter){getter.cache.clear()}
Q.req(action,field,function _Users_manage_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){Users.onError.handle.call(this,msg,err,data);Users.get.onError.handle.call(this,msg,err,data);return callback&&callback.call(this,msg)}
var obj=field&&data.slots[field]?new Constructor(data.slots[field]):null;Q.handle(callback,obj,[err,obj])},{method:method,fields:fields})}
Contact.add=function(userId,label,contactUserId,callback){return _Users_manage('Users/contact','post',{userId:userId,label:label,contactUserId:contactUserId},'contact',Contact,Users.getContacts,callback)};Contact.remove=function(userId,label,contactUserId,callback){return _Users_manage('Users/contact','delete',{userId:userId,label:label,contactUserId:contactUserId},null,Contact,Users.getContacts,callback)};var Label=Users.Label=function Users_Label(fields){Q.extend(this,fields);this.typename='Q.Users.Label'};var Lp=Label.prototype;Label.get=function(userId,label,callback){var func=Users.batchFunction(Q.baseUrl({userIds:userId,label:label}),'label',['userIds','labels']);func.call(this,userId,label,function Users_Label_get_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(!msg&&!data.label){msg="Users.Label.get: no such label"}
if(msg){Users.onError.handle.call(this,msg,err,data.label);Users.get.onError.handle.call(this,msg,err,data.label);return callback&&callback.call(this,msg)}
var label=new Users.Label(data.label);callback.call(label,err,label)})};Label.add=function(userId,title,callback){return _Users_manage('Users/label','post',{userId:userId,title:title},'label',Label,Users.getLabels,callback)};Label.remove=function(userId,label,callback){return _Users_manage('Users/label','delete',{userId:userId,label:label},null,Label,Users.getLabels,callback)};Users.Label.prototype.iconUrl=function Users_User_iconUrl(size){return Users.iconUrl(this.icon.interpolate({userId:this.userId.splitId()}),size)};Q.Tool.define({"Users/avatar":"plugins/Users/js/tools/avatar.js","Users/list":"plugins/Users/js/tools/list.js","Users/pile":"plugins/Users/js/tools/pile.js","Users/labels":"plugins/Users/js/tools/labels.js","Users/status":"plugins/Users/js/tools/status.js","Users/friendSelector":"plugins/Users/js/tools/friendSelector.js","Users/getintouch":"plugins/Users/js/tools/getintouch.js","Users/sessions":"plugins/Users/js/tools/sessions.js"});Q.beforeInit.add(function _Users_beforeInit(){Users.get=Q.getter(Users.get,{cache:Q.Cache.document("Users.get",100),throttle:'Users.get'});Users.getContacts=Q.getter(Users.getContacts,{cache:Q.Cache.document("Users.getContacts",100),throttle:'Users.getContacts'});Users.getLabels=Q.getter(Users.getLabels,{cache:Q.Cache.document("Users.getLabels",100),throttle:'Users.getLabels'});Users.lastSeenNonce=Q.cookie('Q_nonce');Q.Users.login.options=Q.extend({onCancel:new Q.Event(),onSuccess:new Q.Event(function Users_login_onSuccess(user,options){if(user){var urls=Q.urls||{};var url=options.successUrl||urls[Q.info.app+'/home']||Q.url('');Q.handle(url)}},'Users'),onResult:new Q.Event(),onRequireComplete:new Q.Event(),accountStatusUrl:null,tryQuietly:!1,using:'native',scope:['email','public_profile','user_friends'],linkToken:null,dialogContainer:'body',setupRegisterForm:null,identifierType:'email,mobile',activation:'activation'},Q.Users.login.options,Q.Users.login.serverOptions);Q.Users.logout.options=Q.extend({url:Q.action('Users/logout'),using:'native',onSuccess:new Q.Event(function(options){var urls=Q.urls||{};Q.handle(options.welcomeUrl||urls[Q.info.app+'/welcome']||Q.url(''))},'Users')},Q.Users.logout.options,Q.Users.logout.serverOptions);Q.Users.setIdentifier.options=Q.extend({onCancel:null,onSuccess:null,identifierType:'email,mobile',dialogContainer:'body'},Q.Users.setIdentifier.options,Q.Users.setIdentifier.serverOptions);Q.Users.prompt.options=Q.extend({dialogContainer:'body'},Q.Users.prompt.options,Q.Users.prompt.serverOptions)},'Users');Q.onInit.add(function(){if(Q.Users.loggedInUser&&Q.typeOf(Q.Users.loggedInUser)!=='Q.Users.User'){Q.Users.loggedInUser=new Users.User(Q.Users.loggedInUser);Q.nonce=Q.cookie('Q_nonce')}
document.documentElement.addClass(Users.loggedInUser?' Users_loggedIn':' Users_loggedOut');var appId=Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(fbAppId){Users.initFacebook()}},'Users');Q.Page.onActivate('').add(function _Users_Q_Page_onActivate_handler(){$.fn.plugin.load('Q/dialog');$.fn.plugin.load('Q/placeholders');$('#notices_set_email, #notices_set_mobile').on(Q.Pointer.fastclick,function(){Q.plugins.Users.setIdentifier();return!1});if(!location.hash.queryField('Q.Users.oAuth')){return}
var fieldNames=['response_type','token_type','access_token','expires_in','scope','state','Q.deviceId','Q.Users.oAuth'];var fields=location.hash.queryField(fieldNames);var storedDeviceId=localStorage.getItem("Q\tUsers.Device.deviceId");fields.deviceId=storedDeviceId||fields.deviceId;Q.req('Users/oAuth',function(){},{method:'post',fields:fields})},'Users');Q.beforeActivate.add(function(elem){Q.each(Users.User.preloaded,function(i,fields){_constructUser(fields)});Users.preloaded=null},'Users');Q.request.options.onProcessed.set(function(err,response){Q.nonce=Q.cookie('Q_nonce');if(Users.lastSeenNonce!==Q.nonce&&!Users.login.occurring&&!Users.authenticate.occurring&&!Users.logout.occurring){Q.nonce=Q.cookie('Q_nonce');Q.req("Users/login",'data',function(err,res){Users.lastSeenNonce=Q.nonce=Q.cookie('Q_nonce');var msg=Q.firstErrorMessage(err,res&&res.errors);if(msg){return Users.onError.handle(msg,err)}
var user=res.slots.data.user;if(!user&&Users.loggedInUser){Users.loggedInUser=null;Users.roles={};Users.onLogout.handle()}else if(user&&user.id!==Users.loggedInUserId()){Users.loggedInUser=new Users.User(user);Users.roles=res.slots.data.roles||{};Users.onLogin.handle(user)}})}
Users.lastSeenNonce=Q.nonce;if(!response||!response.errors){return}
var i,l=response.errors.length,lost=!1;for(i=0;i<l;++i){switch(response.errors[i].classname){case 'Users_Exception_NotLoggedIn':case 'Q_Exception_NonceExpired':lost=!0;break;default:break}}
if(lost){Q.Users.onLoginLost.handle();Q.Users.loggedInUser=null;Q.Users.roles={}}},'Users');Users.onInitFacebook=new Q.Event();var ddc=document.documentElement;Users.onLogin=new Q.Event(function(){ddc.className=ddc.className.replace(' Users_loggedOut','')+' Users_loggedIn'},'Users');Users.onLogout=new Q.Event(function(){ddc.className=ddc.className.replace(' Users_loggedIn','')+' Users_loggedOut'});Users.onLoginLost=new Q.Event(function(){console.warn("Call to server was made which normally requires user login.")});Users.onConnected=new Q.Event();Users.onConnectionLost=new Q.Event();Users.Device={senderId:null,onNotification:new Q.Event()};Q.onReady.add(function(){if(!Q.info.isCordova||!window.PushNotification){return}
var push=PushNotification.init({android:{senderID:Q.Users.Device.senderId},browser:{pushServiceURL:'http://push.api.phonegap.com/v1/push'},ios:{alert:!0,badge:!0,sound:!0},windows:{}});push.on('registration',function(data){var deviceId=data.registrationId;localStorage.setItem("Q\tUsers.Device.deviceId",deviceId);if(Q.Users.loggedInUser){_registerDevice()}});push.on('notification',function(data){Users.Device.onNotification.handle(data)});push.on('error',function(e){console.log("ERROR",e)});Users.login.options.onSuccess.set(function(){_registerDevice()},'Users.PushNotification');Users.logout.options.onSuccess.set(function(){PushNotification.setApplicationBadgeNumber(0)},'Users.PushNotifications');function _registerDevice(deviceId){var storedDeviceId=localStorage.getItem("Q\tUsers.Device.deviceId");deviceId=storedDeviceId||deviceId;if(!deviceId){return}
Q.req('Users/device',function(err,response){if(!err){Q.handle(Users.onDevice,[response.data])}},{method:'post',fields:{deviceId:deviceId}})}});Users.Socket={connect:function _Users_Socket_connect(nodeUrl,callback){Q.Socket.connect('Users',nodeUrl,function(socket){Q.loadNonce(function(){socket.socket.emit('Users/session',Q.sessionId(),Q.clientId())})})},get:function _Users_Socket_get(url){return Q.Socket.get('Users',url)},onEvent:function(name){return Q.Socket.onEvent('Users',null,name)}};Q.Dialogs.push.options.onActivate.set(function(dialog){var $dialog=$(dialog);Users.hint("Users/dialogCloseHint",$dialog.find('.Q_close')[0],{show:{delay:5000},dontStopBeforeShown:!0})},'Users.dialogCloseHint')})(Q,jQuery);"use strict";(function(Q,$){var Users=Q.Users;var Streams=Q.Streams=Q.plugins.Streams={cache:{where:null}};var dc=Q.extend.dontCopy;dc["Q.Streams.Stream"]=!0;dc["Q.Streams.Message"]=!0;dc["Q.Streams.Participant"]=!0;dc["Q.Streams.Avatar"]=!0;Q.text.Streams={access:{},basic:{prompt:null,title:"Basic Information"},login:{prompt:"Let friends recognize you:",picTooltip:"You can change this picture later"},complete:{prompt:"Let friends recognize you:"},chat:{noMessages:""}};Streams.READ_LEVEL={'none':0,'see':10,'content':20,'relations':25,'participants':30,'messages':40,'max':40};Streams.WRITE_LEVEL={'none':0,'join':10,'vote':13,'postPending':18,'post':20,'relate':23,'relations':25,'suggest':28,'edit':30,'closePending':35,'close':40,'max':40};Streams.ADMIN_LEVEL={'none':0,'tell':10,'invite':20,'manage':30,'own':40,'max':40};Streams.defined={};Streams.define=function(type,ctor,methods){if(typeof type==='object'){for(var t in type){Q.Tool.define(t,type[t])}
return};type=Q.normalize(type);if(typeof ctor==='string'){if(typeof Streams.defined[type]!=='function'){return Streams.defined[type]=ctor}
return ctor}
if(typeof ctor!=='function'){throw new Q.Error("Q.Streams.define requires ctor to be a string or a function")}
function CustomStreamConstructor(){CustomStreamConstructor.constructors.apply(this,arguments);ctor.apply(this,arguments)}
Q.mixin(CustomStreamConstructor,Streams.Stream);Q.extend(CustomStreamConstructor.prototype,methods);return Streams.defined[type]=CustomStreamConstructor};Streams.iconUrl=function(icon,size){if(!icon){console.warn("Streams.iconUrl: icon is empty");return ''}
if(!size||size===!0){size='40'}
size=(String(size).indexOf('.')>=0)?size:size+'.png';var src=(icon+'/'+size).interpolate({"baseUrl":Q.info.baseUrl});return src.isUrl()?src:Q.url('plugins/Streams/img/icons/'+src)};var _socket=null;var _messageHandlers={};var _seenHandlers={};var _avatarHandlers={};var _constructHandlers={};var _refreshHandlers={};var _beforeSetHandlers={};var _beforeSetAttributeHandlers={};var _streamMessageHandlers={};var _streamFieldChangedHandlers={};var _streamAttributeHandlers={};var _streamClosedHandlers={};var _streamRelatedFromHandlers={};var _streamRelatedToHandlers={};var _streamUnrelatedFromHandlers={};var _streamUnrelatedToHandlers={};var _streamUpdatedRelateFromHandlers={};var _streamUpdatedRelateToHandlers={};var _streamConstructHandlers={};var _streamRefreshHandlers={};var _retain=undefined;var _retainedByKey={};var _retainedByStream={};var _retainedStreams={};var _retainedNodes={};Streams.key=function(publisherId,streamName){return publisherId+"\t"+streamName};Streams.onError=new Q.Event(function(err,data){var code=Q.getObject([0,'errors',0,'code'],data)||Q.getObject([1,'errors',0,'code'],data);if(!code&&!err){return}
var errors=data&&data.errors&&(data[0]&&data[0].errors)&&(data[1]&&data[1].errors);console.warn(err,data)},'Streams.onError');Streams.onMessage=Q.Event.factory(_messageHandlers,["",""]);Streams.onMessageUnseen=new Q.Event();Streams.onConstruct=Q.Event.factory(_constructHandlers,[""]);Streams.onRefresh=Q.Event.factory(_refreshHandlers,[""]);Streams.onAvatar=Q.Event.factory(_avatarHandlers,[""]);Streams.onInvitedDialog=new Q.Event();Streams.onInvitedUserAction=new Q.Event();Streams.onInviteComplete=new Q.Event();function _connectSockets(refresh){if(!Users.loggedInUser){return!1}
Streams.retainWith('Streams').get(Users.loggedInUser.id,'Streams/participating',function(){Q.each(_retainedByStream,function _connectRetainedNodes(ps){var stream=_retainedStreams[ps];if(stream&&stream.participant){var parts=ps.split("\t");Users.Socket.connect(Q.nodeUrl({publisherId:parts[0],streamName:parts[1]}))}})});if(refresh){Streams.refresh()}}
function _disconnectSockets(){Q.Socket.disconnectAll()}
Streams.actionUrl=function(publisherId,streamName,what){if(!what){what='stream'}
switch(what){case 'stream':case 'message':case 'relation':return Q.action("Streams/"+what,{'publisherId':publisherId,'name':streamName,'Q.clientId':Q.clientId()});default:return null}};Q.Tool.define({"Users/avatar":"plugins/Streams/js/tools/avatar.js","Streams/chat":"plugins/Streams/js/tools/chat.js","Streams/comments":"plugins/Streams/js/tools/comments.js","Streams/photoSelector":"plugins/Streams/js/tools/photoSelector.js","Streams/userChooser":"plugins/Streams/js/tools/userChooser.js","Streams/participants":"plugins/Streams/js/tools/participants.js","Streams/basic":"plugins/Streams/js/tools/basic.js","Streams/access":"plugins/Streams/js/tools/access.js","Streams/subscription":"plugins/Streams/js/tools/subscription.js","Streams/interests":"plugins/Streams/js/tools/interests.js","Streams/lookup":"plugins/Streams/js/tools/lookup.js","Streams/relate":"plugins/Streams/js/tools/relate.js","Streams/related":"plugins/Streams/js/tools/related.js","Streams/inplace":"plugins/Streams/js/tools/inplace.js","Streams/html":"plugins/Streams/js/tools/html.js","Streams/preview":"plugins/Streams/js/tools/preview.js","Streams/image/preview":"plugins/Streams/js/tools/image/preview.js","Streams/file/preview":"plugins/Streams/js/tools/file/preview.js","Streams/category/preview":"plugins/Streams/js/tools/category/preview.js","Streams/category":"plugins/Streams/js/tools/category.js","Streams/form":"plugins/Streams/js/tools/form.js","Streams/activity":"plugins/Streams/js/tools/activity.js","Streams/default/preview":"plugins/Streams/js/tools/default/preview.js","Streams/player":function(){}});Streams.get=function _Streams_get(publisherId,streamName,callback,extra){var args=arguments;var f;var url=Q.action('Streams/stream?')+Q.queryString({"publisherId":publisherId,"name":streamName});var slotNames=['stream'];if(!publisherId){throw new Q.Error("Streams.get: publisherId is empty")}
if(!streamName){throw new Q.Error("Streams.get: streamName is empty")}
if(extra){if(extra.participants){url+='&'+$.param({"participants":extra.participants});slotNames.push('participants')}
if(extra.messages){url+='&'+$.param({messages:extra.messages});slotNames.push('messages')}
if(f=extra.fields){for(var i=0,l=f.length;i<l;++i){var cached=Streams.get.cache.get([publisherId,streamName]);if(cached&&cached.subject.fields[f[i]]==null){Streams.get.forget(publisherId,streamName,null,extra);break}}}}
var func=Streams.batchFunction(Q.baseUrl({publisherId:publisherId,streamName:streamName}));func.call(this,'stream',slotNames,publisherId,streamName,function Streams_get_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(!msg&&(!data||!data.stream)){msg="Streams.get: data.stream is missing"}
if(msg){var forget=!1;if(err&&err[0]&&err[0].classname==="Q_Exception_MissingRow"){if(!extra||!extra.cacheIfMissing){forget=!0}}else{forget=!0}
if(forget&&Streams.get.forget){Streams.get.forget.apply(this,args);setTimeout(function(){Streams.get.forget.apply(this,args)},0)}
Streams.onError.handle.call(this,err,data);Streams.get.onError.handle.call(this,err,data);return callback&&callback.call(this,err,data)}
if(Q.isEmpty(data.stream)){var msg="Stream "+publisherId+" "+streamName+" is not available";var err=msg;Streams.onError.handle(err,[err,data,null]);return callback&&callback.call(null,err,null,extra)}
Streams.construct(data.stream,{messages:data.messages,participants:data.participants},function Streams_get_construct_handler(err,stream,extra){var msg;if(msg=Q.firstErrorMessage(err)){Streams.onError.handle(msg,[err,data,stream])}
var ret=callback&&callback.call(stream,err,stream,extra);if(ret===!1){return!1}
if(msg)return;var f=stream.fields;var handler=Q.getObject([f.type],_refreshHandlers);Q.handle(handler,stream,[]);handler=Q.getObject([f.publisherId,f.name],_streamRefreshHandlers);Q.handle(handler,stream,[]);Streams.get.onStream.handle.call(stream);return ret},!0)},extra);_retain=undefined};Streams.get.onError=new Q.Event();Streams.get.onStream=new Q.Event();Streams.batchFunction=function Streams_batchFunction(baseUrl,action){action=action||'batch';return Q.batcher.factory(Streams.batchFunction.functions,baseUrl,"/action.php/Streams/"+action,"batch","batch",_Streams_batchFunction_options[action])};Streams.batchFunction.functions={};var _Streams_batchFunction_options={avatar:{preprocess:function(args){var userIds=[],i;for(i=0;i<args.length;++i){userIds.push(args[i][0])}
return{userIds:userIds}},max:100},batch:{max:100}};Streams.create=function(fields,callback,related,options){var slotNames=['stream'];var options=options||{};fields=Q.copy(fields);if(fields.icon){slotNames.push('icon')}
if(fields.attributes&&typeof fields.attributes==='object'){fields.attributes=JSON.stringify(fields.attributes)}
if(related){if(!related.publisherId||!related.streamName){throw new Q.Error("Streams.create related needs publisherId and streamName")}
fields['Q.Streams.related.publisherId']=related.publisherId||related.publisherId;fields['Q.Streams.related.streamName']=related.streamName||related.streamName||related.name;fields['Q.Streams.related.type']=related.type;slotNames.push('messageTo')}
var baseUrl=Q.baseUrl({publisherId:fields.publisherId,streamName:""});fields["Q.clientId"]=Q.clientId();if(options.form){fields.file={path:'uploads/Streams'}}
var _r=_retain;Q.req('Streams/stream',slotNames,function Stream_create_response_handler(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Streams.create.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
if(related){Streams.related.cache.removeEach([related.publisherId,related.streamName])}
Streams.construct(data.slots.stream,{},function Stream_create_construct_handler(err,stream){var msg=Q.firstErrorMessage(err);if(msg){return callback&&callback.call(stream,msg,stream,data.slots.icon)}
if(_r){stream.retain(_r)}
var extra={};extra.icon=data.slots.icon;if(related&&data.slots.messageTo){var m=extra.messageTo=Streams.Message.construct(data.slots.messageTo,!0);extra.related={publisherId:related.publisherId,streamName:related.streamName,type:related.type,weight:m.getInstruction('weight')}}
callback&&callback.call(stream,null,stream,extra,data.slots);_refreshUnlessSocket(Users.loggedInUserId(),'Streams/participating');if(related){_refreshUnlessSocket(related.publisherId,related.streamName)}
return},!0)},{method:'post',fields:fields,baseUrl:baseUrl,form:options.form,resultFunction:options.resultFunction});_retain=undefined};Streams.create.onError=new Q.Event();Streams.construct=function _Streams_construct(fields,extra,callback,updateCache){if(typeof extra==='function'){callback=extra;extra=null}
if(Q.typeOf(fields)==='Q.Streams.Stream'){fields=Q.extend({},fields.fields,{access:fields.access,participant:fields.participant,totals:fields.totals,isRequired:fields.isRequired})}
if(Q.isEmpty(fields)){Q.handle(callback,this,["Streams.Stream constructor: fields are missing"]);return!1}
var type=Q.normalize(fields.type);var streamFunc=Streams.defined[type];if(!streamFunc){streamFunc=Streams.defined[type]=function StreamConstructor(fields){streamFunc.constructors.apply(this,arguments);if(!fields)return;for(var k in fields){if((k in this.fields)||k==='access'||k==='isRequired')continue;this.fields[k]=Q.copy(fields[k])}}}
if(typeof streamFunc==='function'){return _doConstruct()}else if(typeof streamFunc==='string'){Q.addScript(streamFunc,function(){streamFunc=Streams.defined[streamName];if(typeof streamFunc!=='function'){throw new Error("Streams.construct: streamFunc cannot be "+typeof(streamFunc))}
return _doConstruct()});return!0}else if(typeof streamFunc!=='undefined'){throw new Error("Streams.construct: streamFunc cannot be "+typeof(streamFunc))}
function _doConstruct(){if(!streamFunc.streamConstructor){streamFunc.streamConstructor=function Streams_Stream(fields){streamFunc.streamConstructor.constructors.apply(this,arguments);var f=this.fields;if(updateCache){if(f.publisherId&&f.name){Streams.get.cache.removeEach([f.publisherId,f.name]).set([f.publisherId,f.name],0,this,[null,this])}}
Q.handle(_constructHandlers[f.type],this,[]);Q.handle(_constructHandlers[''],this,[]);if(f.publisherId&&f.name){Q.handle(Q.getObject([f.publisherId,f.name],_streamConstructHandlers),this,[]);Q.handle(Q.getObject([f.publisherId,''],_streamConstructHandlers),this,[]);Q.handle(Q.getObject(['',f.name],_streamConstructHandlers),this,[]);Q.handle(Q.getObject(['',''],_streamConstructHandlers),this,[])}};Q.mixin(streamFunc,Streams.Stream);Q.mixin(streamFunc.streamConstructor,streamFunc)}
var stream=new streamFunc.streamConstructor(fields);var messages={},participants={};updateTotalsCache(fields.publisherId,fields.name,stream.totals);if(extra&&extra.messages){Q.each(extra.messages,function(ordinal,message){if(Q.typeOf(message)!=='Q.Streams.Message'){message=Message.construct(message,!0)}
messages[ordinal]=message})}
if(extra&&extra.participants){Q.each(extra.participants,function(userId,participant){if(Q.typeOf(participant)!=='Q.Streams.Participant'){participant=new Participant(participant)}
participants[userId]=participant;Participant.get.cache.set([fields.publisherId,fields.name,participant.userId],0,participant,[null,participant])})}
Q.handle(callback,stream,[null,stream,{messages:messages,participants:participants}]);return stream}}
function _toolInDialog(toolName,toolParams,callback,classContainer){Q.Dialogs.push({url:Q.action(toolName,toolParams),removeOnClose:!0,onActivate:function(){callback&&callback.apply(this,arguments)},apply:!0}).addClass(classContainer||'')}
Streams.Dialogs={subscription:function(publisherId,streamName,callback){_toolInDialog('Streams/subscription',{publisherId:publisherId,streamName:streamName},callback,'Streams_subscription_tool_dialog_container')},access:function(publisherId,streamName,callback){_toolInDialog('Streams/access',{publisherId:publisherId,streamName:streamName},callback,'Streams_access_tool_dialog_container')}};Streams.refresh=function(callback,options){if(!Q.isOnline()){Q.handle(callback,this,[!1]);return!1}
var now=Date.now();if(now-Streams.refresh.lastTime<Streams.refresh.options.minSeconds*1000){return!1}
Streams.refresh.lastTime=now;var p=new Q.Pipe(Object.keys(_retainedByStream),callback);Streams.refresh.beforeRequest.handle(callback,Streams,options);Q.each(_retainedByStream,function(ps){var parts=ps.split("\t");Stream.refresh(parts[0],parts[1],p.fill(ps),options)});_retain=undefined;return!0};Streams.refresh.options={duringEvents:['focus','pageshow'],minSeconds:3};Streams.refresh.lastTime=0;Streams.refresh.beforeRequest=new Q.Event();Streams.retainWith=function(key){_retain=Q.calculateKey(key,_retainedByKey);return Streams};Streams.release=function(key){key=Q.calculateKey(key);if(_retainedByKey[key]){for(var ps in _retainedByKey){if(!_retainedByStream[ps]){continue}
delete _retainedByStream[ps][key];if(Q.isEmpty(_retainedByStream[ps])){delete(_retainedByStream[ps]);delete(_retainedStreams[ps])}
var parts=ps.split("\t");var nodeUrl=Q.nodeUrl({publisherId:parts[0],streamName:parts[1]});var hasNode=!Q.isEmpty(_retainedNodes[nodeUrl]);delete _retainedNodes[nodeUrl][ps];if(hasNode&&Q.isEmpty(_retainedNodes[nodeUrl])){delete(_retainedNodes[nodeUrl]);var socket=Users.Socket.get(nodeUrl);socket&&socket.disconnect()}}}
delete _retainedByKey[key]};Streams.invite=function(publisherId,streamName,options,callback){if(!Users.loggedInUser){Q.handle(callback,null,["Streams.invite: not logged in"]);return!1}
var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});var o=Q.extend({uri:'Streams/invite'},Streams.invite.options,options);o.publisherId=publisherId,o.streamName=streamName;o.displayName=o.displayName||Users.loggedInUser.displayName;function _request(){return Q.req(o.uri,['data'],function(err,response){var msg=Q.firstErrorMessage(err,response&&response.errors);if(msg){alert(msg);var args=[err,response];return Streams.onError.handle.call(this,msg,args)}
Participant.get.cache.removeEach([publisherId,streamName]);Streams.get.cache.removeEach([publisherId,streamName]);var rsd=response.slots.data;Q.handle(o&&o.callback,null,[err,rsd]);Q.handle(callback,null,[err,rsd]);var emailAddresses=[];var mobileNumbers=[];var fb_uids=[];Q.each(rsd.userIds,function(i,userId){if(rsd.alreadyParticipating.indexOf(userId)>=0){return}
var status=rsd.statuses[i];var shouldFollowup=(o.followup===!0)||(o.followup!==!1&&status==='future');if(!shouldFollowup){return}
var identifier=rsd.identifiers[i];var identifierType=rsd.identifierTypes[i];switch(identifierType){case 'userId':break;case 'email':emailAddresses.push(identifier);break;case 'mobile':mobileNumbers.push(identifier);break;case 'facebook':if(shouldFollowup===!0){fb_uids.push(identifier[i])}
break;case 'label':case 'newFutureUsers':default:break}});if(emailAddresses.length){Q.Template.render({subject:'Streams/followup/email/subject',body:'Streams/followup/email/body',alert:'Streams/followup/email/alert'},Q.info,function(params){var url=Q.Links.email(params.subject[1],params.body[1],emailAddresses);if(params.alert[1]){alert(params.alert[1])}
window.location=url})}
if(mobileNumbers.length){Q.Template.render({text:'Streams/followup/mobile',alert:'Streams/followup/mobile/alert'},Q.info,function(params){var url=Q.Links.sms(params.text[1],mobileNumbers);if(params.alert[1]){alert(params.alert[1])}
window.location=url})}
if(fb_uids.length){}},{method:'post',fields:o,baseUrl:baseUrl})}
if(o.identifier||o.token||o.uids||o.userIds||o.label){return _request()}
Q.prompt('Enter a mobile # or email address',function(value){if(!value)return;o.identifier=value;_request()},{title:"Invite"});return null};Streams.invite.options={followup:"future"};Streams.related=function _Streams_related(publisherId,streamName,relationType,isCategory,options,callback){if(!publisherId||!streamName){throw new Q.Error("Streams.related is expecting publisherId and streamName to be non-empty")}
if(typeof publisherId!=='string'||(relationType&&typeof relationType!=='string')){throw new Q.Error("Streams.related is expecting publisherId, relationType as strings")}
if(typeof isCategory!=='boolean'){callback=options;options=isCategory;isCategory=undefined}
if(Q.typeOf(options)==='function'){callback=options;options={}}
options=Q.extend({withParticipant:!0},options);var near=isCategory?'to':'from',far=isCategory?'from':'to',farPublisherId=far+'PublisherId',farStreamName=far+'StreamName',slotNames=['relations','relatedStreams'],fields={"publisherId":publisherId,"streamName":streamName};if(options.messages){slotNames.push('messages')}
if(options.participants){slotNames.push('participants')}
if(options.withParticipant){fields.withParticipant=!0}
if(relationType){fields.type=relationType}
Q.extend(fields,options);fields.omitRedundantInfo=!0;if(isCategory){fields.isCategory=isCategory}
if(Q.isArrayLike(fields.fields)){fields.fields=fields.join(',')}
var cached=Streams.get.cache.get([publisherId,streamName]);if(!cached||options.stream){if(typeof streamName==='string'&&streamName[streamName.length-1]!=='/'){slotNames.push('stream')}else{slotNames.push('streams')}}
var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/related',slotNames,function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Streams.related.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
if(cached&&cached.subject){_processResults(null,cached.subject)}else{var extra={};if(options.messages){extra.messages=data.slots.messages}
if(options.participants){extra.participants=data.slots.participants}
if(!data.slots.stream){msg="Streams/related missing stream "+streamName+' published by '+publisherId;callback&&callback.call(this,msg)}else{Streams.construct(data.slots.stream,extra,_processResults,!0)}}
function _processResults(err,stream){var msg=Q.firstErrorMessage(err);if(msg){var args=[err,stream];return callback&&callback.call(this,msg,args)}
var p=new Q.Pipe(),keys=[],keys2={},streams={};Q.each(data.slots.relatedStreams,function(k,fields){if(!Q.isPlainObject(fields))return;var key=Streams.key(fields.publisherId,fields.name);keys.push(key);keys2[key]=!0;Streams.construct(fields,{},function(){streams[key]=this;p.fill(key)()},!0)});Q.each(data.slots.relations,function(j,relation){relation[near]=stream;var key=Streams.key(relation[farPublisherId],relation[farStreamName]);if(!keys2[key]&&relation[farPublisherId]!=publisherId){keys.push(key);Streams.get(relation[farPublisherId],relation[farStreamName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){p.fill(key)(msg);return}
relation[far]=this;streams[key]=this;p.fill(key)();return})}else{relation[far]=streams[key]}});if(keys.length){p.add(keys,_callback);p.run()}else{_callback()}
function _callback(params){for(var k in params){if(params[k]){if(params[k][0]===undefined){delete params[k]}else{params[k]=params[k][0]}}}
callback&&callback.call({relatedStreams:streams,relations:data.slots.relations,stream:stream,errors:params},null)}}},{fields:fields,baseUrl:baseUrl});_retain=undefined;var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName})
var socket=Users.Socket.get(nodeUrl);if(!socket){return!1}};Streams.related.onError=new Q.Event();var Stream=Streams.Stream=function(fields){if(this.constructed){return}
this.constructed=!0;this.fields=Q.copy(fields,['publisherId','name','type','title','content','attributes','icon','messageCount','invitedCount','participatingCount','leftCount','insertedTime','updatedTime','readLevel','writeLevel','adminLevel','inheritAccess','closedTime','access','totals','isRequired','participant']);this.typename='Q.Streams.Stream';prepareStream(this,fields)};Stream.get=Streams.get;Stream.create=Streams.create;Stream.construct=Streams.construct;Stream.define=Streams.define;Stream.retain=function _Stream_retain(publisherId,streamName,key,callback){if(Q.isArrayLike(streamName)){var p=Q.pipe();var waitFor=[];Q.each(streamName,function(i,v){Stream.retain(publisherId,v,key,p.fill(i));waitFor.push(i)});p.add(waitFor,function(params,subjects){Q.handle(callback,Stream,[params,subjects])}).run();return Streams}
var ps=Streams.key(publisherId,streamName);Streams.get(publisherId,streamName,function(err){if(err){_retainedStreams[ps]=null}else{this.retain(key)}
Q.handle(callback,this,[err,this])});return Streams};Stream.release=function _Stream_release(publisherId,streamName){var ps=Streams.key(publisherId,streamName);if(_retainedByStream[ps]){for(var key in _retainedByStream[ps]){if(_retainedByKey[key]){delete _retainedByKey[key][ps]}
if(Q.isEmpty(_retainedByKey[key])){delete _retainedByKey[key]}
var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName});var hasNode=!Q.isEmpty(_retainedNodes[nodeUrl]);delete _retainedNodes[nodeUrl][ps];if(hasNode&&Q.isEmpty(_retainedNodes[nodeUrl])){delete(_retainedNodes[nodeUrl]);var socket=Users.Socket.get(nodeUrl);socket&&socket.disconnect()}}}
delete _retainedByStream[ps];delete _retainedStreams[ps]};Stream.refresh=function _Stream_refresh(publisherId,streamName,callback,options){var notRetained=!_retainedByStream[Streams.key(publisherId,streamName)];if(!Q.isOnline()||(notRetained&&!(options&&options.evenIfNotRetained))){callback&&callback.call(this,!1);Streams.get.cache.removeEach([publisherId,streamName]);return!1}
var o=options||{};if(o.messages){var result=Message.wait(publisherId,streamName,-1,function(ordinals){Q.Streams.get(publisherId,streamName,function(err){callback&&callback.apply(this,[err,ordinals])})},options);if(result==null||result instanceof Q.Pipe){callback&&callback.call(this,null)}
return result}
var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName});Streams.get.force(publisherId,streamName,function(err,stream){if(!err){var ps=Streams.key(publisherId,streamName);if(_retainedStreams[ps]){var changed=(o.changed)||{};Stream.update(_retainedStreams[ps],this.fields,changed||{});_retainedStreams[ps]=this}}
if(callback){var params=[err,stream];if(o.extra){params.concat(extra)}
callback&&callback.apply(this,params)}});_retain=undefined;return!0};Stream.refresh.ms=75;var _debouncedRefresh=Q.debounce(Stream.refresh,Stream.refresh.ms);var Sp=Stream.prototype;Sp.retainWith=Streams.retainWith;Sp.iconUrl=function _Stream_prototype_iconUrl(size){return Streams.iconUrl(this.fields.icon,size)};Sp.fileUrl=function(){var url=this.getAttribute('Q.file.url')||this.getAttribute('file.url');return url.interpolate({"baseUrl":Q.info.baseUrl})};Sp.getAll=function _Stream_prototype_getAll(usePending){return Q.copy(usePending?this.pendingFields:this.fields)};Sp.get=function _Stream_prototype_get(fieldName,usePending){return(fieldName in this.pendingFields)?this.pendingFields[fieldName]:this.fields[fieldName]};Sp.set=function _Stream_prototype_set(fieldName,value){var t=this.fields.type;Q.handle(Q.getObject([t,fieldName],_beforeSetHandlers),this,[value]);Q.handle(Q.getObject([t,''],_beforeSetHandlers),this,[value]);if(this.pendingFields===this.fields){this.pendingFields=Q.copy(this.fields)}
if(typeof fieldName==='string'){this.pendingFields[fieldName]=value}else{for(var k in fieldName){this.pendingFields[k]=fieldName[k]}}};Sp.getAllAttributes=function _Stream_prototype_getAllAttributes(usePending){return usePending?this.pendingAttributes:this.attributes};Sp.getAttribute=function _Stream_prototype_getAttribute(attributeName,usePending){return(attributeName in this.pendingAttributes)?this.pendingAttributes[attributeName]:this.attributes[attributeName]};Sp.setAttribute=function _Stream_prototype_setAttribute(attributeName,value){var t=this.fields.type;Q.handle(Q.getObject([t,attributeName],_beforeSetAttributeHandlers),this,[value]);Q.handle(Q.getObject([t,''],_beforeSetAttributeHandlers),this,[value]);if(this.pendingAttributes===this.attributes){this.pendingAttributes=Q.copy(this.attributes)}
if(typeof attributeName==='string'){this.pendingAttributes[attributeName]=value}else{for(var k in attributeName){this.pendingAttributes[k]=attributeName[k]}}
this.pendingFields.attributes=JSON.stringify(this.pendingAttributes)};Sp.clearAttribute=function _Stream_prototype_clearAttribute(attributeName){if(this.pendingAttributes===this.attributes){this.pendingAttributes=Q.copy(this.attributes)}
if(typeof attributeName==='string'){delete this.pendingAttributes[attributeName]}else{for(var i=0;i<attributeName.length;++i){delete this.pendingAttributes[attributeName[i]]}}
this.pendingFields.attributes=JSON.stringify(this.pendingAttributes)};Sp.getAllPermissions=function _Stream_prototype_getAllPermissions(usePending){try{var permissions=usePending&&this.pendingFields.permissions?this.pendingFields.permissions:this.fields.permissions;return permissions?JSON.parse(permissions):[]}catch(e){return[]}};Sp.hasPermission=function _Stream_prototype_hasPermission(permission,usePending){var permissions=this.getAllPermissions(usePending);return(permissions.indexOf(permission)>=0)};Sp.addPermission=function(permission){var pf=this.pendingFields;if(!pf.permissions||pf.permissions===this.fields.permissions){pf.permissions=Q.copy(this.fields.permissions)||[]}
var permissions=this.getAllPermissions(!0);if(permissions.indexOf(permission)<0){permissions.push(permission)}
pf.permissions=JSON.stringify(permissions)};Sp.removePermission=function(permission){var pf=this.pendingFields;if(!pf.permissions||pf.permissions===this.fields.permissions){pf.permissions=Q.copy(this.fields.permissions)||[]}
var permissions=this.getAllPermissions(!0);var index=permissions.indexOf(permission);if(index>=0){permissions.splice(index,1)}
pf.permissions=JSON.stringify(permissions)};Sp.save=function _Stream_prototype_save(options){var stream=this;var slotName="stream";var f=stream.fields;var pf=stream.pendingFields;pf.publisherId=f.publisherId;pf.name=f.name;pf["Q.clientId"]=Q.clientId();var baseUrl=Q.baseUrl({publisherId:pf.publisherId,streamName:pf.name});Q.req('Streams/stream',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];return Streams.onError.handle.call(this,msg,args)}
var s=data.slots.stream||null;if(options&&options.onResult){if(!1===Q.handle(options.onResult,stream,[err,data])){return}}
var o=Q.extend({evenIfNotRetained:!0},options);_refreshUnlessSocket(s.publisherId,s.name,o)},{method:'put',fields:pf,baseUrl:baseUrl})};Sp.close=function _Stream_prototype_remove(callback){return Stream.close(this.fields.publisherId,this.fields.name,callback)};Sp.reopen=function _Stream_remove(){this.pendingFields.closedTime=!1;this.save()};Sp.retain=function _Stream_prototype_retain(key){var publisherId=this.fields.publisherId;var streamName=this.fields.name;var ps=Streams.key(publisherId,streamName);key=Q.calculateKey(key);_retainedStreams[ps]=this;var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName});var stream=_retainedStreams[ps];if(stream&&stream.participant){Users.Socket.connect(nodeUrl,function(){Q.setObject([nodeUrl,ps],!0,_retainedNodes)})}
Q.setObject([ps,key],!0,_retainedByStream);Q.setObject([key,ps],!0,_retainedByKey);return this};Sp.release=function _Stream_prototype_release(){Stream.release(this.fields.publisherId,this.fields.name);return this};Sp.getMessage=function _Stream_prototype_getMessage(ordinal,callback){return Message.get(this.fields.publisherId,this.fields.name,ordinal,callback)};Sp.getParticipant=function _Stream_prototype_getParticipant(userId,callback){return Participant.get(this.fields.publisherId,this.fields.name,userId,callback)};Stream.onMessage=Q.Event.factory(_streamMessageHandlers,["","",""]);Stream.onFieldChanged=Q.Event.factory(_streamFieldChangedHandlers,["","",""]);Stream.beforeSet=Q.Event.factory(_beforeSetHandlers,["",""]);Stream.beforeSetAttribute=Q.Event.factory(_beforeSetAttributeHandlers,["",""]);Stream.onAttribute=Q.Event.factory(_streamAttributeHandlers,["","",""]);Stream.onUpdated=Q.Event.factory(_streamAttributeHandlers,["","",""]);Stream.onClosed=Q.Event.factory(_streamClosedHandlers,["",""]);Stream.onRelatedTo=Q.Event.factory(_streamRelatedToHandlers,["",""]);Stream.onRelatedFrom=Q.Event.factory(_streamRelatedFromHandlers,["",""]);Stream.onUnrelatedTo=Q.Event.factory(_streamUnrelatedToHandlers,["",""]);Stream.onUnrelatedFrom=Q.Event.factory(_streamUnrelatedFromHandlers,["",""]);Stream.onUpdatedRelateTo=Q.Event.factory(_streamUpdatedRelateToHandlers,["",""]);Stream.onUpdatedRelateFrom=Q.Event.factory(_streamUpdatedRelateFromHandlers,["",""]);Stream.onConstruct=Q.Event.factory(_streamConstructHandlers,["",""]);Stream.onRefresh=Q.Event.factory(_streamRefreshHandlers,["",""]);Sp.onMessage=function _Stream_prototype_onMessage(messageType){return Stream.onMessage(this.fields.publisherId,this.fields.name,messageType)};Sp.onAttribute=function _Stream_prototype_onAttribute(attribute){return Stream.onAttribute(this.fields.publisherId,this.fields.name,attribute)};Sp.onUpdated=Sp.onAttribute;Sp.onFieldChanged=function _Stream_prototype_onFieldChanged(field){return Stream.onFieldChanged(this.fields.publisherId,this.fields.name,field)};Sp.onClosed=function _Stream_prototype_onClosed(){return Stream.onClosed(this.fields.publisherId,this.fields.name,field)};Sp.beforeSet=function _Stream_prototype_onSet(){return Stream.beforeSet(this.fields.publisherId,this.fields.name)};Sp.beforeSetAttribute=function _Stream_prototype_onSetAttribute(){return Stream.beforeSetAttribute(this.fields.publisherId,this.fields.name)};Sp.onRelatedFrom=function _Stream_prototype_onRelatedFrom(){return Stream.onRelatedFrom(this.fields.publisherId,this.fields.name)};Sp.onRelatedTo=function _Stream_prototype_onRelatedTo(){return Stream.onRelatedTo(this.fields.publisherId,this.fields.name)};Sp.onUnrelatedFrom=function _Stream_prototype_onUnrelatedFrom(){return Stream.onUnrelatedFrom(this.fields.publisherId,this.fields.name)};Sp.onUnrelatedTo=function _Stream_prototype_onUnrelatedTo(){return Stream.onUnrelatedTo(this.fields.publisherId,this.fields.name)};Sp.onUpdatedRelateFrom=function _Stream_prototype_onUpdatedRelateFrom(){return Stream.onUpdatedRelateFrom(this.fields.publisherId,this.fields.name)};Sp.onUpdatedRelateTo=function _Stream_prototype_onUpdatedRelateTo(){return Stream.onUpdatedRelateTo(this.fields.publisherId,this.fields.name)};Sp.post=function _Stream_prototype_post(data,callback){var message=Q.extend({publisherId:this.fields.publisherId,streamName:this.fields.name},data);return Message.post(message,callback)};Sp.join=function _Stream_prototype_join(callback){return Stream.join(this.fields.publisherId,this.fields.name,callback)};Sp.leave=function _Stream_prototype_leave(callback){return Stream.leave(this.fields.publisherId,this.fields.name,callback)};Sp.subscribe=function _Stream_prototype_subscribe(callback){return Stream.subscribe(this.fields.publisherId,this.fields.name,callback)};Sp.unsubscribe=function _Stream_prototype_unsubscribe(callback){return Stream.unsubscribe(this.fields.publisherId,this.fields.name,callback)};Sp.observe=function _Stream_prototype_observe(callback){return Stream.observe(this.fields.publisherId,this.fields.name,callback)};Sp.neglect=function _Stream_prototype_neglect(callback){return Stream.neglect(this.fields.publisherId,this.fields.name,callback)};Sp.testReadLevel=function _Stream_prototype_testReadLevel(level){if(typeof level==='string'){level=Streams.READ_LEVEL[level]}
if(level===undefined){throw new Q.Error("Streams.Sp.testReadLevel: level is undefined")}
return this.access.readLevel>=level};Sp.testWriteLevel=function _Stream_prototype_testWriteLevel(level){if(typeof level==='string'){level=Streams.WRITE_LEVEL[level]}
if(level===undefined){throw new Q.Error("Streams.Sp.testWriteLevel: level is undefined")}
return this.access.writeLevel>=level};Sp.testAdminLevel=function _Stream_prototype_testAdminLevel(level){if(typeof level==='string'){level=Streams.ADMIN_LEVEL[level]}
if(level===undefined){throw new Q.Error("Streams.Sp.testAdminLevel: level is undefined")}
return this.access.adminLevel>=level};Sp.accessDialog=function(options){return Streams.accessDialog(this.fields.publisherId,this.fields.name,options)};Sp.actionUrl=function _Stream_prototype_actionUrl(what){return Streams.actionUrl(this.fields.publisherId,this.fields.name,what)};Sp.invite=function(options,callback){Streams.invite(this.fields.publisherId,this.fields.name,options,callback)};Sp.refresh=function _Stream_prototype_refresh(callback,options){return Stream.refresh(this.fields.publisherId,this.fields.name,callback,options)};Sp.relatedFrom=function _Stream_prototype_relatedFrom(relationType,options,callback){return Streams.related(this.fields.publisherId,this.fields.name,relationType,!1,options,callback)};Sp.relatedTo=function _Stream_prototype_relatedTo(relationType,options,callback){return Streams.related(this.fields.publisherId,this.fields.name,relationType,!0,options,callback)};Sp.relateTo=function _Stream_prototype_relateTo(type,toPublisherId,toStreamName,callback){return Streams.relate(toPublisherId,toStreamName,type,this.fields.publisherId,this.fields.name,callback)};Sp.relate=Sp.relateFrom=function _Stream_prototype_relate(type,fromPublisherId,fromStreamName,callback){return Streams.relate(this.fields.publisherId,this.fields.name,type,fromPublisherId,fromStreamName,callback)};Sp.unrelateTo=function _Stream_prototype_unrelateTo(toPublisherId,toStreamName,relationType,callback){return Streams.unrelate(this.fields.publisherId,this.fields.name,relationType,toPublisherId,toStreamName,callback)};Sp.unrelate=Sp.unrelateFrom=function _Stream_prototype_unrelateFrom(fromPublisherId,fromStreamName,relationType,callback){return Streams.unrelate(fromPublisherId,fromStreamName,relationType,this.fields.publisherId,this.fields.name,callback)};Stream.join=function _Stream_join(publisherId,streamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.Stream.join: Not logged in.")}
var slotName="participant";var fields={"publisherId":publisherId,"name":streamName};var baseUrl=Q.baseUrl({"publisherId":publisherId,"streamName":streamName,"Q.clientId":Q.clientId()});Q.req('Streams/join',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Stream.join.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var participant=new Participant(data.slots.participant);Participant.get.cache.set([participant.publisherId,participant.name,participant.userId],0,participant,[err,participant]);callback&&callback.call(participant,err,participant||null);_refreshUnlessSocket(publisherId,streamName)},{method:'post',fields:fields,baseUrl:baseUrl})};Stream.join.onError=new Q.Event();Stream.leave=function _Stream_leave(publisherId,streamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.Stream.leave: Not logged in.")}
var slotName="participant";var fields={"publisherId":publisherId,"name":streamName,"Q.clientId":Q.clientId()};var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/leave',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Stream.leave.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var participant=new Participant(data.slots.participant);Participant.get.cache.set([participant.publisherId,participant.name,participant.userId],0,participant,[err,participant]);callback&&callback.call(this,err,participant||null);_refreshUnlessSocket(publisherId,streamName)},{method:'post',fields:fields,baseUrl:baseUrl})};Stream.leave.onError=new Q.Event();Stream.subscribe=function _Stream_subscribe(publisherId,streamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.Stream.subscribe: Not logged in.")}
var slotName="participant";var fields={"publisherId":publisherId,"name":streamName};var baseUrl=Q.baseUrl({"publisherId":publisherId,"streamName":streamName,"Q.clientId":Q.clientId()});Q.req('Streams/subscribe',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Stream.subscribe.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var participant=new Participant(data.slots.participant);Participant.get.cache.set([participant.publisherId,participant.name,participant.userId],0,participant,[err,participant]);callback&&callback.call(participant,err,participant||null);_refreshUnlessSocket(publisherId,streamName)},{method:'post',fields:fields,baseUrl:baseUrl})};Stream.subscribe.onError=new Q.Event();Stream.unsubscribe=function _Stream_unsubscribe(publisherId,streamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.Stream.unsubscribe: Not logged in.")}
var slotName="participant";var fields={"publisherId":publisherId,"name":streamName,"Q.clientId":Q.clientId()};var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/unsubscribe',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Stream.unsubscribe.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var participant=new Participant(data.slots.participant);Participant.get.cache.set([participant.publisherId,participant.name,participant.userId],0,participant,[err,participant]);callback&&callback.call(this,err,participant||null);_refreshUnlessSocket(publisherId,streamName)},{method:'post',fields:fields,baseUrl:baseUrl})};Stream.unsubscribe.onError=new Q.Event();Stream.observe=function _Stream_observe(publisherId,streamName,callback){Streams.socketRequest('Streams/observe',publisherId,streamName,callback)};Stream.neglect=function _Stream_neglect(publisherId,streamName,callback){Streams.socketRequest('Streams/neglect',publisherId,streamName,callback)};Stream.close=function _Stream_remove(publisherId,streamName,callback){var slotName="result,stream";var fields={"publisherId":publisherId,"name":streamName};var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/stream',[slotName],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Stream.close.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var stream=data.slots.stream;if(stream){_refreshUnlessSocket(stream.publisherId,stream.name);_refreshUnlessSocket(Users.loggedInUserId(),'Streams/participating')}
callback&&callback.call(this,err,data.slots.result||null)},{method:'delete',fields:fields,baseUrl:baseUrl})};Stream.close.onError=new Q.Event();Streams.socketRequest=function(event,publisherId,streamName){if(!Q.sessionId()){throw new Error("Stream.observe: a valid session id is required")}
var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName});var socket=Users.Socket.get(nodeUrl);if(!socket){return null}
var args=Array.prototype.slice.call(arguments,0);args.splice(1,0,Q.sessionId(),Q.clientId());socket.socket.emit.apply(socket.socket,args);return socket};Streams.relate=function _Streams_relate(publisherId,streamName,relationType,fromPublisherId,fromStreamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.relate: Not logged in.")}
var slotName="result";var fields={"toPublisherId":publisherId,"toStreamName":streamName,"type":relationType,"fromPublisherId":fromPublisherId,"fromStreamName":fromStreamName,"Q.clientId":Q.clientId()};var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/related',[slotName],function(err,data){callback&&callback.call(this,err,Q.getObject('slots.result',data)||null);_refreshUnlessSocket(publisherId,streamName);_refreshUnlessSocket(fromPublisherId,fromStreamName)},{method:'post',fields:fields,baseUrl:baseUrl});_retain=undefined};Streams.unrelate=function _Stream_prototype_unrelate(publisherId,streamName,relationType,fromPublisherId,fromStreamName,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.unrelate: Not logged in.")}
var slotName="result";var fields={"toPublisherId":publisherId,"toStreamName":streamName,"type":relationType,"fromPublisherId":fromPublisherId,"fromStreamName":fromStreamName,"Q.clientId":Q.clientId()};var baseUrl=Q.baseUrl({publisherId:publisherId,streamName:streamName});Q.req('Streams/related',[slotName],function(err,data){callback&&callback.call(this,err,Q.getObject('slots.result',data)||null)},{method:'delete',fields:fields,baseUrl:baseUrl});_retain=undefined};Streams.updateRelation=function(toPublisherId,toStreamName,relationType,fromPublisherId,fromStreamName,weight,adjustWeights,callback){if(!Q.plugins.Users.loggedInUser){throw new Error("Streams.relate: Not logged in.")}
var slotName="result";var fields={"toPublisherId":toPublisherId,"toStreamName":toStreamName,"type":relationType,"fromPublisherId":fromPublisherId,"fromStreamName":fromStreamName,"weight":weight,"adjustWeights":adjustWeights,"Q.clientId":Q.clientId()};var baseUrl=Q.baseUrl({publisherId:toPublisherId,streamName:toStreamName});Q.req('Streams/related',[slotName],function(err,data){var message=Q.getObject('slots.result.message',data);callback&&callback.call(this,err,Q.getObject('slots.result',data)||null)},{method:'put',fields:fields,baseUrl:baseUrl});_retain=undefined};var Message=Streams.Message=function Streams_Message(fields){Q.extend(this,fields);this.typename='Q.Streams.Message'};Message.construct=function Streams_Message_construct(fields,updateCache){if(Q.isEmpty(fields)){return!1}
var type=Q.normalize(fields.type);var messageFunc=Message.defined[type];if(!messageFunc){messageFunc=Message.defined[type]=function MessageConstructor(fields){messageFunc.constructors.apply(this,arguments);if(!fields)return;for(var k in fields){this[k]=Q.copy(fields[k])}}}
if(!messageFunc.messageConstructor){messageFunc.messageConstructor=function Streams_Message(fields){messageFunc.messageConstructor.constructors.apply(this,arguments);if(updateCache){Message.get.cache.set([this.publisherId,this.streamName,parseInt(this.ordinal)],0,this,[null,this])}};Q.mixin(messageFunc,Streams.Message);Q.mixin(messageFunc.messageConstructor,messageFunc)}
var msg=new messageFunc.messageConstructor(fields);_updateMessageCache(msg);return msg};Message.latest={};Message.defined={};Message.define=function(type,ctor,methods){if(typeof type==='object'){for(var t in type){Q.Tool.define(t,type[t])}
return};type=Q.normalize(type);if(typeof ctor!=='function'){throw new Q.Error("Q.Streams.Message.define requires ctor to be a function")}
Q.mixin(CustomMessageConstructor,Message);Q.extend(CustomMessageConstructor.prototype,methods);return Message.defined[type]=CustomMessageConstructor};var Mp=Message.prototype;Mp.getAllInstructions=function _Message_prototype_getAllInstructions(){try{return JSON.parse(this.instructions)}catch(e){return{}}};Mp.getInstruction=function _Message_prototype_getInstruction(instructionName){var instr=this.getAllInstructions();return instr[instructionName]};Mp.seen=function _Message_seen(total){if(total==null){total=!0}
return Total.seen(this.publisherId,this.streamName,this.messageType,total)};Message.get=function _Message_get(publisherId,streamName,ordinal,callback){var slotName,criteria={};if(Q.typeOf(ordinal)==='object'){slotName=ordinal.withTotals?['messages','totals']:['messages'];if(ordinal.min){criteria.min=parseInt(ordinal.min)}
criteria.max=parseInt(ordinal.max);criteria.limit=parseInt(ordinal.limit);if(ordinal.withTotals){criteria.withTotals=ordinal.withTotals}
if('type' in ordinal)criteria.type=ordinal.type;if('ascending' in ordinal)criteria.ascending=ordinal.ascending}else{slotName=['message'];criteria=parseInt(ordinal)}
var func=Streams.batchFunction(Q.baseUrl({publisherId:publisherId,streamName:streamName}));func.call(this,'message',slotName,publisherId,streamName,criteria,function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Message.get.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var messages={};if('messages' in data){messages=data.messages;if(data.totals){updateTotalsCache(publisherId,streamName,data.totals)}}else if('message' in data){messages[ordinal]=data.message}
Q.each(messages,function(ordinal,message){if(Q.typeOf(message)!=='Q.Streams.Message'){message=Message.construct(message,!0)}
messages[ordinal]=message});if(Q.isPlainObject(ordinal)){callback&&callback.call(this,err,messages||null)}else{var message=Q.first(messages);callback&&callback.call(message,err,message||null)}});return!0};Message.get.onError=new Q.Event();Message.post=function _Message_post(msg,callback){var baseUrl=Q.baseUrl({publisherId:msg.publisherId,streamName:msg.streamName});msg["Q.clientId"]=Q.clientId();Q.req('Streams/message',['message'],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Message.post.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var message=(data.slots&&data.slots.message)?Message.construct(data.slots.message,!1):null;callback&&callback.call(Message,err,message)},{method:'post',fields:msg,baseUrl:baseUrl})};Message.post.onError=new Q.Event();Message.latestOrdinal=function _Message_latestOrdinal(publisherId,streamName,checkMessageCache){var latest=0;if(checkMessageCache){Message.get.cache.each([publisherId,streamName],function(k,v){if(!v.params[0]&&v.subject.ordinal>0){latest=Math.max(latest,v.subject.ordinal)}})}
if(!latest){Streams.get.cache.each([publisherId,streamName],function(k,v){if(!v.params[0]&&v.subject.fields.messageCount>0){latest=v.subject.fields.messageCount;return!1}})}
return parseInt(latest)};Message.wait=function _Message_wait(publisherId,streamName,ordinal,callback,options){var alreadyCalled=!1,handlerKey;var latest=Message.latestOrdinal(publisherId,streamName);if(!latest&&(!options||!options.evenIfNotRetained)){return null}
if(ordinal>=0&&ordinal<=latest){Q.handle(callback,this,[[]]);return!1}
var o=Q.extend({},Message.wait.options,options);var waiting={};var nodeUrl=Q.nodeUrl({publisherId:publisherId,streamName:streamName});var socket=Users.Socket.get(nodeUrl);if(!socket||ordinal-o.max>latest){return _tryLoading()}
if(ordinal<0){var participant;if(o.unlessSocket){Streams.get.cache.each([publisherId,streamName],function(key,info){var p=info.subject.participant;if(p&&p.state==='participating'){participant=p;return!1}})}
if(!participant){return _tryLoading()}}
var t=setTimeout(_tryLoading,o.timeout);var ordinals=[];var p=new Q.Pipe();Q.each(latest+1,ordinal,1,function(ord){ordinals.push(ord);var event=Stream.onMessage(publisherId,streamName,ord);handlerKey=event.add(function(){p.fill(ord)();event.remove(handlerKey);handlerKey=null});waiting[ord]=[event,handlerKey]});p.add(ordinals,1,function(){if(!alreadyCalled){Q.handle(callback,this,[!0,ordinals])}
clearTimeout(t);alreadyCalled=!0;return!0}).run();return p;function _tryLoading(){if(ordinal<0){Message.get.forget(publisherId,streamName,{min:latest+1,max:ordinal})}
return Message.get(publisherId,streamName,{min:latest+1,max:ordinal},function(err,messages){if(err){return Q.handle(callback,this,[null,err])}
ordinal=parseInt(ordinal);Q.each(messages,function(ordinal,message){if(Message.latest[publisherId+"\t"+streamName]>=ordinal){return}
Users.Socket.onEvent('Streams/post').handle(message,messages)},{ascending:!0,numeric:!0});if(ordinal<0||Message.get.cache.get([publisherId,streamName,ordinal])){Q.each(waiting,function(i,w){w[0].remove(w[1])});if(!alreadyCalled){Q.handle(callback,this,[Object.keys(messages)])}
alreadyCalled=!0}})}};Message.wait.options={max:5,timeout:1000};var _messageShouldRefreshStream={};Message.shouldRefreshStream=function(type,should){_messageShouldRefreshStream[type]=should};var Total=Streams.Total={get:function _Total_get(publisherId,streamName,messageType,callback){var func=Streams.batchFunction(Q.baseUrl({publisherId:publisherId,streamName:streamName}));func.call(this,'total','totals',publisherId,streamName,messageType,function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Total.get.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var totals=Q.isArrayLike(messageType)?Q.copy(data.totals):data.totals[messageType];callback&&callback.call(Total,err,totals||null)})},latest:function(publisherId,streamName,messageType){var item=Total.get.cache.get([publisherId,streamName,messageType]);var value=item&&item.params[1];if(value==null){return null}
return Q.isInteger(value)?value:(value[messageType]||null)},unseen:function _Total_unseen(publisherId,streamName,messageType){var latest=Total.latest(publisherId,streamName,messageType);var seen=Total.seen(publisherId,streamName,messageType);return latest&&(latest-seen)},seen:function _Total_seen(publisherId,streamName,messageType,total,callback){var tsc=Total.seen.cache;if(total===!0){var cached=Total.get.cache.get([publisherId,streamName,messageType]);if(!cached){return!1}
total=cached.params[1]}
if(total!==undefined){Q.setObject([publisherId,streamName,messageType],total,_seen);tsc.set([publisherId,streamName,messageType],0,total);Q.handle(callback,Total,[null,total]);_seenHandlers[publisherId]&&_seenHandlers[publisherId][streamName]&&_seenHandlers[publisherId][streamName][messageType]&&Q.handle(_seenHandlers[publisherId][streamName][messageType],Total,[t]);return total}
var t=Q.getObject([publisherId,streamName,messageType],_seen);if(t===undefined){var c=tsc.get([publisherId,streamName,messageType]);if(!c){return 0}
t=c.subject;Q.setObject([publisherId,streamName,messageType],t,_seen)}
return t},setUpElement:function _Total_setUpElement(element,publisherId,streamName,messageType,key,options){var p=publisherId;var n=streamName;var m=messageType;Q.Streams.Total.get(p,n,m,_unseen);Q.Streams.Stream.onMessage(p,n,m).add(_unseen);Q.Streams.Total.onSeen(p,n,m).set(_unseen);function _unseen(){var c=Q.Streams.Total.unseen(p,n,m);element.innerHTML=c;if(options&&options.unseenClass){element.setClass(options.unseenClass,c)}}},onSeen:Q.Event.factory(_seenHandlers,["","",""])};var _seen={};Total.get.onError=new Q.Event();Total.seen.cache=Q.Cache.local("Streams.Total.seen",1000);var Participant=Streams.Participant=function Streams_Participant(fields){Q.extend(this,fields);this.typename='Q.Streams.Participant'};Participant.get=function _Participant_get(publisherId,streamName,userId,callback){var slotName,criteria={"publisherId":publisherId,"name":streamName};if(Q.typeOf(userId)==='object'){slotName='participants';criteria.limit=userId.limit;criteria.offset=userId.offset;if('state' in userId)criteria.state=userId.state;if('userId' in userId)criteria.userId=userId.userId}else{slotName='participant';criteria.userId=userId}
var func=Streams.batchFunction(Q.baseUrl({publisherId:publisherId,streamName:streamName}));func.call(this,'participant',slotName,publisherId,streamName,criteria,function(err,data){var participants={};var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Participant.get.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
if('participants' in data){participants=data.participants}else if('participant' in data){participants[userId]=data.participant}
Q.each(participants,function(userId,p){var participant=participants[userId]=p&&new Participant(p);Participant.get.cache.set([publisherId,streamName,userId],0,participant,[err,participant])});if(Q.isPlainObject(userId)){callback&&callback.call(this,err,participants||null)}else{var participant=Q.first(participants);callback&&callback.call(participant,err,participant||null)}})};Participant.get.onError=new Q.Event();var Pp=Participant.prototype;Pp.getAllExtras=function _Participant_prototype_getAllExtras(){try{return JSON.parse(this.extra)}catch(e){return{}}};Pp.getExtra=function _Participant_prototype_get(extraName){var attr=this.getAllExtras();return attr[extraName]};var Avatar=Streams.Avatar=function Streams_Avatar(fields){Q.extend(this,fields);this.typename='Q.Streams.Avatar'};Avatar.get=function _Avatar_get(userId,callback){var func=Streams.batchFunction(Q.baseUrl({userId:userId}),'avatar');func.call(this,userId,function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Avatar.get.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var avatar=data.avatar?new Avatar(data.avatar):null;callback&&callback.call(avatar,null,avatar);Q.handle(Q.getObject([userId],_avatarHandlers),avatar,[null,avatar])})};Avatar.get.onError=new Q.Event();Avatar.byPrefix=function _Avatar_byPrefix(prefix,callback,options){var userId=Q.plugins.Users.loggedInUser?Users.loggedInUser.id:"";var fields=Q.take(options,['limit','offset','public']);Q.extend(fields,{prefix:prefix});Q.req('Streams/avatar',['avatars'],function(err,data){var msg=Q.firstErrorMessage(err,data);if(msg){var args=[err,data];Streams.onError.handle.call(this,msg,args);Avatar.byPrefix.onError.handle.call(this,msg,args);return callback&&callback.call(this,msg,args)}
var avatars={};Q.each(data.slots.avatars,function(userId,avatar){avatars[userId]=avatar=new Avatar(avatar);Avatar.get.cache.set([userId],0,avatar,[null,avatar])});callback&&callback.call(this,null,avatars)},{fields:fields})};Avatar.byPrefix.onError=new Q.Event();var Ap=Avatar.prototype;Ap.displayName=function _Avatar_prototype_displayName(options,fallback){var fn=this.firstName;var ln=this.lastName;var u=this.username;var fn2,ln2,u2,f2;fallback=fallback||'Someone';if(options&&(options.escape||options.html)){fn=fn.encodeHTML();ln=ln.encodeHTML();u=u.encodeHTML();fallback=fallback.encodeHTML()}
if(options&&options.html){fn2='<span class="Streams_firstName">'+fn+'</span>';ln2='<span class="Streams_lastName">'+ln+'</span>';u2='<span class="Streams_username">'+u+'</span>';f2='<span class="Streams_username">'+fallback+'</span>'}else{fn2=fn;ln2=ln;u2=u;f2=fallback}
if(options&&options.show){var show=options.show.split(' ').map(function(x){return x.trim()});var parts=[];for(var i=0,l=show.length;i<l;++i){var s=show[i];switch(s){case 'f':parts.push(fn2);break;case 'l':parts.push(ln2);break;case 'u':parts.push(u2);break;case 'fu':parts.push(fn2?fn2:u2);break;case 'lu':parts.push(ln2?ln2:u2);break;case 'flu':default:parts.push(fn2||ln2?[fn2,ln2].join(' '):u2);break}}
return parts.join(' ').trim()||f2}
if(options&&options.short){return fn?fn2:(u?u2:f2)}else if(fn&&ln){return fn2+' '+ln2}else if(fn&&!ln){return u?fn2+' '+u2:fn2}else if(!fn&&ln){return u?u2+' '+ln2:ln2}else{return u?u2:f2}};Ap.iconUrl=function _Avatar_prototype_iconUrl(size){return Users.iconUrl(this.icon.interpolate({userId:this.publisherId.splitId()}),size)};var Interests=Streams.Interests={add:function(title,callback,options){if(!Users.loggedInUser){return!1}
var fields={title:title};if(options){if(options.subscribe){fields.subscribe=1}
if(options.publisherId){fields.publisherId=options.publisherId}}
Q.req('Streams/interest',['publisherId','streamName'],function(err,response){Q.handle(callback,this,arguments);var s=response&&response.slots;if(s){_refreshUnlessSocket(s.publisherId,s.streamName)}},Q.extend({method:'post',fields:fields},options))},remove:function(title,callback){if(!Users.loggedInUser){return!1}
var fields={title:title};Q.req('Streams/interest',['publisherId','streamName'],function(err,response){Q.handle(callback,this,arguments);var s=response&&response.slots;if(s){_refreshUnlessSocket(s.publisherId,s.streamName)}},{method:'delete',fields:fields})},forUser:function(userId,communityId,callback){var fields={};if(userId){fields.userId=userId}
if(communityId){fields.communityId=communityId}
Q.req('Streams/interest','interests',function(err,response){var msg;var r=response&&response.errors;if(msg=Q.firstErrorMessage(err,r)){return callback&&callback(msg)}
var results={};var relatedTo=response.slots.interests;for(var w in relatedTo){var info=relatedTo[w];var title=info[2];var normalized=Q.normalize(title);results[normalized]=title}
callback&&callback.call(this,null,results)},{fields:fields})},forMe:function(communityId,callback){if(!Q.isEmpty(Interests.my)){return callback&&callback(null,Interests.my)}
var userId=Users.loggedInUserId();Interests.forUser(userId,communityId,function(err,results){if(err){return callback(err)}
Interests.my=results;callback(null,results)})},all:{},my:null};Streams.displayType=function _Streams_displayType(type){return type.split('/').slice(1).join('/')};Streams.setupRegisterForm=function _Streams_setupRegisterForm(identifier,json,priv,overlay){var src=json.entry[0].thumbnailUrl;var src40=src,src50=src,src80=src;var firstName='',lastName='';if(priv.registerInfo){if(priv.registerInfo.firstName){firstName=priv.registerInfo.firstName}
if(priv.registerInfo.lastName){lastName=priv.registerInfo.lastName}
if(priv.registerInfo.pic){src40=src50=src=src80=priv.registerInfo.pic}}
var $img=$('<img />').attr('src',src).attr('title',Q.text.Streams.login.picTooltip);var $td=$('<td class="Streams_login_fullname_block" />');if(Q.text.Streams.login.prompt){$td.append($('<label for="Streams_login_fullname" />').html(Q.text.Streams.login.prompt),'<br>')}
$td.append($('<input id="Streams_login_fullname" name="fullName" type="text" class="text" />').attr('maxlength',Q.text.Users.login.maxlengths.fullName).attr('placeholder',Q.text.Users.login.placeholders.fullName).val(firstName+(lastName?' ':'')+lastName))
var table=$('<table />').append($('<tr />').append($('<td class="Streams_login_picture" />').append($img)).append($td));var register_form=$('<form method="post" class="Users_register_form" />').attr('action',Q.action("Streams/register")).data('form-type','register').append($('<div class="Streams_login_appear" />'));var $b=$('<button />',{"type":"submit","class":"Q_button Q_main_button Streams_login_start "}).html(Q.text.Users.login.registerButton).on(Q.Pointer.touchclick,function(e){Users.submitClosestForm.apply(this,arguments)}).on(Q.Pointer.click,function(e){e.preventDefault()});register_form.append(table).append($('<input type="hidden" name="identifier" />').val(identifier)).append($('<input type="hidden" name="icon" />')).append($('<input type="hidden" name="Q.method" />').val('post')).append($('<div class="Streams_login_get_started">&nbsp;</div>').append($b)).submit(Q.throttle(function(e){var $this=$(this);$this.removeData('cancelSubmit');document.activeElement.blur();if(!$('#Users_agree').attr('checked')){$this.data('cancelSubmit',!0);setTimeout(function(){if(confirm(Q.text.Users.login.confirmTerms)){$('#Users_agree').attr('checked','checked');$this.submit()}},300)}},300)).on('keydown',function(e){if((e.keyCode||e.which)===13){$(this).submit();e.preventDefault()}});if(priv.activation){register_form.append($('<input type="hidden" name="activation" />').val(priv.activation))}
if(json.termsLabel){$td.append($('<div />').attr("id","Users_register_terms").append($('<input type="checkbox" name="agree" id="Users_agree" value="yes">')).append($('<label for="Users_agree" />').html(json.termsLabel)))}
var authResponse;if(Users.apps.facebook&&Users.apps.facebook[Q.info.app]){Users.initFacebook(function(){if((authResponse=FB.getAuthResponse())){for(var k in authResponse){register_form.append($('<input type="hidden" />').attr('name','Q.Users.facebook.authResponse['+k+']').attr('value',authResponse[k]))}}})}
var $form=$('#Streams_login_step1_form');if($form.data('used')==='facebook'){var platforms=$form.data('platforms');var appId=platforms.facebook||Q.info.app;var fbAppId=Q.getObject(['facebook',appId,'appId'],Users.apps);if(!fbAppId){console.warn("Users.defaultSetupRegisterForm: missing Users.apps.facebook."+appId+".appId")}
Users.initFacebook(function(){var k;if((authResponse=FB.getAuthResponse())){authResponse.appId=appId;authResponse.fbAppId=fbAppId;for(k in authResponse){register_form.append($('<input type="hidden" />').attr('name','Q.Users.facebook.authResponse['+k+']').attr('value',authResponse[k]))}}},{appId:appId});register_form.append($('<input type="hidden" name="app[platform]" value="facebook" />'))}
if(json.emailExists||json.mobileExists){var p=$('<p id="Streams_login_identifierExists" />').html(json.emailExists?Q.text.Users.login.emailExists:Q.text.Users.login.mobileExists);$('a',p).click(function(){$.post(Q.ajaxExtend(Q.action("Users/resend"),'data'),'identifier='+encodeURIComponent(identifier),function(){overlay.close()});return!1});register_form.append(p)}
return register_form};function updateAvatarCache(stream){var avatarStreamNames={'Streams/user/firstName':!0,'Streams/user/lastName':!0,'Streams/user/username':!0,'Streams/user/icon':!0};var sf=stream.fields;var cache,item;if(avatarStreamNames[sf.name]){var field=sf.name.split('/').pop();var userId=sf.publisherId;cache=Avatar.get.cache;if((item=cache.get([userId]))&&item.subject){item.subject[field]=sf.content;cache.set([userId],0,item.subject,[null,item.subject])}
if(field==='username'||field==='icon'){cache=Users.get.cache;if(item=cache.get([userId])){var user=item.subject;avatar[field]=sf.content;cache.set([userId],0,item.subject,[null,item.subject])}}}}
function updateTotalsCache(publisherId,streamName,totals){if(!totals){return}
for(var type in totals){Total.get.cache.each([publisherId,streamName,type],function(k,v){var args=JSON.parse(k);var result=v.params[1];if(Q.isInteger(result)){v.params[1]=totals[type]}else if(Q.isPlainObject[result]&&(type in result)){result[type]=totals[type]}});Total.get.cache.set([publisherId,streamName,type],0,Total,[null,totals[type]])}}
function updateStreamCache(stream){Streams.get.cache.each([stream.fields.publisherId,stream.fields.name],function(k){var params=Streams.get.cache.get(k).params;this.set(k,0,stream,[null,stream].concat(params.slice(2)))})}
Stream.update=function _Streams_Stream_update(stream,fields,onlyChangedFields){if(!stream||!fields){return!1}
var publisherId=stream.fields.publisherId;var streamName=stream.fields.name;var updated={},cleared=[],k;for(k in fields){if(onlyChangedFields&&fields[k]===stream.fields[k]&&!Q.has(onlyChangedFields,k)){continue}
Q.handle(Q.getObject([publisherId,streamName,k],_streamFieldChangedHandlers),stream,[fields,k,onlyChangedFields]);Q.handle(Q.getObject([publisherId,'',k],_streamFieldChangedHandlers),stream,[fields,k,onlyChangedFields]);Q.handle(Q.getObject(['',streamName,k],_streamFieldChangedHandlers),stream,[fields,k,onlyChangedFields]);updated[k]=fields[k]}
if(!onlyChangedFields||!Q.isEmpty(updated)){Q.handle(Q.getObject([publisherId,streamName,''],_streamFieldChangedHandlers),stream,[fields,updated,onlyChangedFields]);Q.handle(Q.getObject([publisherId,'',''],_streamFieldChangedHandlers),stream,[fields,updated,onlyChangedFields]);Q.handle(Q.getObject(['',streamName,''],_streamFieldChangedHandlers),stream,[fields,updated,onlyChangedFields])}
if(('attributes' in fields)&&(!onlyChangedFields||fields.attributes!=stream.fields.attributes)){var attributes=JSON.parse(fields.attributes||"{}");var publisherId=stream.fields.publisherId;var streamName=stream.fields.name,obj;updated={},cleared=[];var streamAttributes=stream.getAllAttributes();for(k in streamAttributes){if(k in attributes){continue}
obj={};obj[k]=undefined;Q.handle(Q.getObject([publisherId,streamName,k],_streamAttributeHandlers),stream,[fields,obj,[k],onlyChangedFields]);updated[k]=undefined;cleared.push(k)}
for(k in attributes){if(JSON.stringify(attributes[k])==JSON.stringify(stream.getAttribute(k))){continue}
obj={};obj[k]=attributes[k];Q.handle(Q.getObject([publisherId,streamName,k],_streamAttributeHandlers),stream,[attributes,k,onlyChangedFields]);updated[k]=attributes[k]}
Q.handle(Q.getObject([publisherId,streamName,''],_streamAttributeHandlers),stream,[attributes,updated,cleared,onlyChangedFields]);Q.handle(Q.getObject([publisherId,'',''],_streamAttributeHandlers),stream,[attributes,updated,cleared,onlyChangedFields])}
Q.extend(stream.fields,fields);prepareStream(stream);updateTotalsCache(publisherId,streamName,stream.totals);updateStreamCache(stream);updateAvatarCache(stream)}
function prepareStream(stream){if(stream.fields.messageCount){stream.fields.messageCount=parseInt(stream.fields.messageCount)}
if(stream.fields.access){stream.access=Q.copy(stream.fields.access);delete stream.fields.access}
if(stream.fields.participant){stream.participant=Q.copy(stream.fields.participant);delete stream.fields.participant}
if(stream.fields.totals){stream.totals=stream.fields.totals;delete stream.fields.totals}
if(stream.fields.isRequired){stream.isRequired=stream.fields.isRequired;delete stream.fields.isRequired}
try{stream.pendingAttributes=stream.attributes=stream.fields.attributes?JSON.parse(stream.fields.attributes):{}}catch(e){stream.pendingAttributes=stream.attributes={}}
stream.pendingFields={}}
function _onCalledHandler(args,shared){shared.retainUnderKey=_retain;_retain=undefined}
function _onResultHandler(subject,params,args,shared,original){var key=shared.retainUnderKey;if(key==undefined||params[0]||!subject){return}
if(Q.typeOf(subject)==='Q.Streams.Stream'){subject.retain(key)}else{if(subject.stream){subject.stream.retain(key)}
Q.each(subject.streams,'retain',[key]);Q.each(subject.relatedStreams,'retain',[key])}}
Q.Tool.onMissingConstructor.set(function(constructors,normalized){var str="_preview";if(normalized.substr(normalized.length-str.length)===str){constructors[normalized]="plugins/Streams/js/tools/default/preview.js"}},'Streams');Q.beforeInit.add(function _Streams_beforeInit(){var where=Streams.cache.where||'document';Stream.get=Streams.get=Q.getter(Streams.get,{cache:Q.Cache[where]("Streams.get",100),throttle:'Streams.get',prepare:function(subject,params,callback){if(Q.typeOf(subject)==='Q.Streams.Stream'){return callback(subject,params)}
if(params[0]){return callback(this,params)}
Streams.construct(subject,{},function(){params[1]=this;callback(this,params)})}});Streams.related=Q.getter(Streams.related,{cache:Q.Cache[where]("Streams.related",100),throttle:'Streams.related',prepare:function(subject,params,callback){if(params[0]){return callback(subject,params)}
var keys=Object.keys(subject.relatedStreams).concat(['stream']);var pipe=Q.pipe(keys,function(){callback(subject,params)});Streams.construct(subject.stream,{},function(){subject.stream=this;pipe.fill('stream')()});Q.each(subject.relatedStreams,function(i){Streams.construct(this,function(){subject.relatedStreams[i]=this;pipe.fill(i)()})})}});Message.get=Q.getter(Message.get,{cache:Q.Cache[where]("Streams.Message.get",1000),throttle:'Streams.Message.get',prepare:function(subject,params,callback,args){if(params[0]){return callback(this,params)}
if(Q.isPlainObject(args[2])){var p1=params[1];Q.each(p1,function(ordinal,message){message=Message.construct(message,!0);p1[ordinal]=message})}else{params[1]=Message.construct(message,!0)}
callback(params[1],params)}});Total.get=Q.getter(Total.get,{cache:Q.Cache[where]("Streams.Total.get",1000),throttle:'Streams.Total.get'});Participant.get=Q.getter(Participant.get,{cache:Q.Cache[where]("Streams.Participant.get",1000),throttle:'Streams.Participant.get',prepare:function(subject,params,callback,args){if(params[0]){return callback(this,params)}
if(Q.isPlainObject(args[2])){var p1=params[1];Q.each(p1,function(userId,participant){participant=new Participant(participant);p1[userId]=participant})}else{params[1]=new Participant(subject)}
callback(params[1],params)}});Avatar.get=Q.getter(Avatar.get,{cache:Q.Cache[where]("Streams.Avatar.get",1000),throttle:'Streams.Avatar.get',prepare:function(subject,params,callback){if(params[0]){return callback(this,params)}
params[1]=subject&&new Avatar(subject);callback(params[1],params)}});Avatar.byPrefix=Q.getter(Avatar.byPrefix,{cache:Q.Cache[where]("Streams.Avatar.byPrefix",100),throttle:'Streams.Avatar.byPrefix'});Q.each([Streams.get,Streams.related],function(){this.onCalled.set(_onCalledHandler,'Streams');this.onResult.set(_onResultHandler,'Streams')})},'Streams');Q.onInit.add(function _Streams_onInit(){var Users=Q.plugins.Users;Users.login.options.setupRegisterForm=Streams.setupRegisterForm;Q.text.Users.login.placeholders.fullName='Enter your full name';Q.text.Users.login.maxlengths.fullName=50;Users.onLogin.set(function(user){if(user){Interests.my={};_clearCaches()};_connectSockets.apply(this,arguments)},"Streams");Users.onLogout.set(function(){Interests.my={};_clearCaches();Streams.invite.dialog=null;Q.Socket.destroyAll()},"Streams");if(Users.loggedInUser){_connectSockets(!0)}
if(Q.info.isCordova){Q.addEventListener(document,['resign','pause'],_disconnectSockets);Q.addEventListener(document,'resume',function(){_connectSockets(!0)})}
function _updateDisplayName(fields,k){Avatar.get.force(Users.loggedInUser.id,function(){var liu=Q.Users.loggedInUser;liu.username=this.username;liu.displayName=this.displayName();liu.icon=this.icon})}
if(Users.loggedInUser){var key='Streams.updateDisplayName';Q.Streams.Stream.onFieldChanged(Users.loggedInUser.id,"Streams/user/firstName","content").or(Q.Streams.Stream.onFieldChanged(Users.loggedInUser.id,"Streams/user/lastName","content"),key,key).or(Q.Streams.Stream.onFieldChanged(Users.loggedInUser.id,"Streams/user/username","content"),key,key).debounce(50,!1,key).set(_updateDisplayName,'Streams')}
Q.onOnline.set(function(){_connectSockets(!0)},'Streams');var _showedComplete=!1;Q.Page.onLoad('').add(function _Streams_onPageLoad(){var params=Q.getObject("Q.plugins.Streams.invite.dialog");if(!params||_showedComplete){return}
_showedComplete=!0;var templateName=params.templateName||'Streams/invite/complete';params.prompt=(params.prompt!==undefined)?params.prompt:Q.text.Streams.login.prompt;Streams.construct(params.stream,function(){params.stream=this;params.communityId=Q.Users.communityId;params.communityName=Q.Users.communityName;Q.Template.render(templateName,params,function(err,html){var dialog=$(html);var interval;Q.Dialogs.push({dialog:dialog,className:'Streams_completeInvited_dialog',mask:!0,noClose:!0,closeOnEsc:!1,beforeClose:function(){if(interval){clearInterval(interval)}},onActivate:{'Streams.completeInvited':function _Streams_completeInvited(){Streams.onInvitedDialog.handle.call(Streams,[dialog]);var l=Q.text.Users.login;dialog.find('#Streams_login_fullname').attr('maxlength',l.maxlengths.fullName).attr('placeholder',l.placeholders.fullName).plugin('Q/placeholders');if(!Q.info.isTouchscreen){var $input=$('input',dialog).eq(0);$input.plugin('Q/clickfocus');interval=setInterval(function(){if($input.val()||$input[0]===document.activeElement){return clearInterval(interval)}
$input.plugin('Q/clickfocus')},100)}
var $complete_form=dialog.find('form').plugin('Q/validator').submit(function(e){e.preventDefault();var baseUrl=Q.baseUrl({publisherId:Q.plugins.Users.loggedInUser.id,streamName:"Streams/user/firstName"});var url='Streams/basic?'+$(this).serialize();Q.req(url,['data'],function _Streams_basic(err,data){var msg=Q.firstErrorMessage(err,data);if(data&&data.errors){$complete_form.plugin('validator','invalidate',Q.ajaxErrors(data.errors,['fullName']));$('input',$complete_form).eq(0).plugin('Q/clickfocus');return}else if(msg){return alert(msg)}
$complete_form.plugin('Q/validator','reset');dialog.data('Q/dialog').close();var params={evenIfNotRetained:!0,unlessSocket:!0};var p=new Q.Pipe(['first','last'],function(params){Q.handle(Streams.onInviteComplete,data,[params.first[0],params.last[0]])});Stream.refresh(Users.loggedInUser.id,'Streams/user/firstName',p.fill('first'),params);Stream.refresh(Users.loggedInUser.id,'Streams/user/lastName',p.fill('last'),params)},{method:"post",quietly:!0,baseUrl:baseUrl})}).on('submit keydown',Q.debounce(function(e){if(e.type==='keydown'&&(e.keyCode||e.which)!==13){return}
var val=dialog.find('#Streams_login_fullname').val();Streams.onInvitedUserAction.handle.call([val,dialog])},0));$('button',$complete_form).on('touchstart',function(){$(this).submit()})}}})})},!0)},"Streams");Users.Socket.onEvent('Streams/debug').set(function _Streams_debug_handler(msg){console.log('DEBUG:',msg)},'Streams');Users.Socket.onEvent('Streams/remove').set(function _Streams_remove_handler(stream){Streams.get.cache.each([msg.publisherId,msg.streamName],function(k,v){this.remove(k);updateAvatarCache(v.subject)})},'Streams');Users.Socket.onEvent('Streams/join').set(function _Streams_join_handler(p){console.log('Users.Socket.onEvent("Streams/join")',p);Participant.get.cache.set([p.publisherId,p.streamName,p.userId],0,p,[null,p])},'Streams');Users.Socket.onEvent('Streams/leave').set(function(p){console.log('Users.Socket.onEvent("Streams/leave")',p);Participant.get.cache.set([p.publisherId,p.streamName,p.userId],0,p,[null,p])});Users.Socket.onEvent('Streams/post').set(function _Streams_post_handler(msg,messages){if(!msg){throw new Q.Error("Q.Users.Socket.onEvent('Streams/post') msg is empty")}
var latest=Message.latestOrdinal(msg.publisherId,msg.streamName,!1);if(parseInt(msg.ordinal)<=latest){return}
var ret=Message.wait(msg.publisherId,msg.streamName,msg.ordinal-1,_message);if(typeof ret==='boolean'){_message()}
function _message(){var ptn=msg.publisherId+"\t"+msg.streamName;if(Message.latest[ptn]>=parseInt(msg.ordinal)){return}
console.log('Users.Socket.onEvent("Streams/post")',msg);var message=(Q.typeOf(msg)==='Q.Streams.Message')?msg:Message.construct(msg,!0);Message.latest[ptn]=parseInt(msg.ordinal);var cached=Streams.get.cache.get([msg.publisherId,msg.streamName]);Streams.get(msg.publisherId,msg.streamName,function(err){if(err){console.warn(Q.firstErrorMessage(err));console.log(err);return}
var stream=this;var usingCached=Q.getter.usingCached;stream.fields.messageCount=msg.ordinal;_updateTotalsCache(msg);_updateMessageCache(msg);var latest=Total.latest(msg.publisherId,msg.streamName,msg.type);var params=[stream,message,messages,latest];var unseen=Total.unseen(msg.publisherId,msg.streamName,msg.type);if(unseen){setTimeout(function(){params.push(unseen);Q.handle(Streams.onMessageUnseen,Streams,params)},0)}
var streamType=stream.fields.type;var instructions=msg.instructions&&JSON.parse(msg.instructions);var node;var updatedParticipants=!0;switch(msg.type){case 'Streams/join':_updateParticipantCache(msg,'participating',message.getInstruction('prevState'),usingCached);break;case 'Streams/leave':_updateParticipantCache(msg,'left',message.getInstruction('prevState'),usingCached);break;case 'Streams/changed':Stream.update(stream,instructions.changes,null);break;case 'Streams/progress':Stream.update(stream,instructions,null);break;case 'Streams/relatedFrom':_updateRelatedCache(msg,instructions);_relationHandlers(_streamRelatedFromHandlers,msg,stream,instructions);break;case 'Streams/relatedTo':_updateRelatedCache(msg,instructions);_relationHandlers(_streamRelatedToHandlers,msg,stream,instructions);break;case 'Streams/unrelatedFrom':_updateRelatedCache(msg,instructions);_relationHandlers(_streamUnrelatedFromHandlers,msg,stream,instructions);break;case 'Streams/unrelatedTo':_updateRelatedCache(msg,instructions);_relationHandlers(_streamUnrelatedToHandlers,msg,stream,instructions);break;case 'Streams/updatedRelateFrom':_updateRelatedCache(msg,instructions);_relationHandlers(_streamUpdatedRelateFromHandlers,msg,stream,instructions);break;case 'Streams/updatedRelateTo':_updateRelatedCache(msg,instructions);_relationHandlers(_streamUpdatedRelateToHandlers,msg,stream,instructions);break;case 'Streams/closed':Stream.update(stream,instructions,null);var sf=stream.fields;var Qh=Q.handle;var Qgo=Q.getObject;Qh(Qgo([sf.publisherId,sf.name],_streamClosedHandlers),stream,[instructions]);Qh(Qgo([sf.publisherId,''],_streamClosedHandlers),stream,[instructions]);Qh(Qgo(['',sf.name],_streamClosedHandlers),stream,[instructions]);Qh(Qgo(['',''],_streamClosedHandlers),stream,[instructions]);break;default:break}
_messageHandlers[streamType]&&_messageHandlers[streamType][msg.type]&&Q.handle(_messageHandlers[streamType][msg.type],Streams,params);_messageHandlers['']&&_messageHandlers[''][msg.type]&&Q.handle(_messageHandlers[''][msg.type],Streams,params);_messageHandlers[streamType]&&_messageHandlers[streamType]['']&&Q.handle(_messageHandlers[streamType][''],Streams,params);_messageHandlers['']&&_messageHandlers['']['']&&Q.handle(_messageHandlers[''][''],Streams,params);Q.each([msg.publisherId,''],function(ordinal,publisherId){Q.each([msg.streamName,''],function(ordinal,streamName){Q.handle(Q.getObject([publisherId,streamName,ordinal],_streamMessageHandlers),Streams,params);Q.handle(Q.getObject([publisherId,streamName,msg.type],_streamMessageHandlers),Streams,params);Q.handle(Q.getObject([publisherId,streamName,''],_streamMessageHandlers),Streams,params)})});if(usingCached&&_messageShouldRefreshStream[msg.type]){_debouncedRefresh(stream.fields.publisherId,stream.fields.name,null,{evenIfNotRetained:!0})}
function _relationHandlers(handlers,msg,stream,fields){Q.each([msg.publisherId,''],function(ordinal,publisherId){Q.each([msg.streamName,''],function(ordinal,streamName){if(handlers[publisherId]&&handlers[publisherId][streamName]){Q.handle(handlers[publisherId][streamName],stream,[msg,fields])}})})}})}},'Streams');Q.beforeActivate.add(_preloadedStreams,'Streams');Q.loadUrl.options.onResponse.add(_preloadedStreams,'Streams');Q.addEventListener(window,Streams.refresh.options.duringEvents,Streams.refresh);_scheduleUpdate()},'Streams');Q.Tool.beforeRemove("").set(function(tool){Streams.release(this)},'Streams');Q.Page.beforeUnload("").set(function(){Streams.release(!0)},'Stream');function _preloadedStreams(elem){Q.each(Stream.preloaded,function(i,fields){Streams.construct(fields,{},null)});Stream.preloaded=null}
function _updateMessageCache(msg){Streams.get.cache.each([msg.publisherId,msg.streamName],function(k,v){var stream=(v&&!v.params[0])?v.subject:null;if(!stream){return}
var args=JSON.parse(k),extra=args[2];if(extra&&extra.messages){this.remove(k)}});Message.get.cache.each([msg.publisherId,msg.streamName],function(k,v){var args=JSON.parse(k),ordinal=args[2];if(ordinal&&ordinal.max&&ordinal.max<0){this.remove(k)}})}
function _updateTotalsCache(msg){Streams.get.cache.each([msg.publisherId,msg.streamName],function(k,v){var stream=(v&&!v.params[0])?v.subject:null;if(!stream){return}
if(stream.totals&&stream.totals[msg.type]){++stream.totals[msg.type]}});Total.get.cache.each([msg.publisherId,msg.streamName,msg.type],function(k,v){var args=JSON.parse(k);var result=v.params[1];if(Q.isInteger(result)){++v.params[1]}else if(Q.isPlainObject[result]&&(type in result)){++result[type]}})}
function _updateParticipantCache(msg,newState,prevState,usingCached){Participant.get.cache.removeEach([msg.publisherId,msg.streamName]);if(!usingCached){return}
var sawStreams=[];Streams.get.cache.each([msg.publisherId,msg.streamName],function(k,v){var stream=(v&&!v.params[0])?v.subject:null;if(!stream){return}
var args=JSON.parse(k);var extra=args[2];if(extra&&extra.participants){this.remove(k)}
if(sawStreams.indexOf(stream)>=0){return}
sawStreams.push(stream);if(prevState){--stream.fields[prevState+'Count']}
++stream.fields[newState+'Count']})}
function _updateRelatedCache(msg,instructions){Streams.related.cache.removeEach([msg.publisherId,msg.streamName]);if(instructions.toPublisherId){Streams.related.cache.removeEach([instructions.toPublisherId,instructions.toStreamName]);Streams.Stream.refresh(instructions.toPublisherId,instructions.toStreamName,null,{messages:!0,unlessSocket:!0})}else if(instructions.fromPublisherId){Streams.related.cache.removeEach([instructions.fromPublisherId,instructions.fromStreamName]);Streams.Stream.refresh(instructions.fromPublisherId,instructions.fromStreamName,null,{messages:!0,unlessSocket:!0})}}
function _clearCaches(){Streams.get.cache.clear();Streams.related.cache.clear();Message.get.cache.clear();Participant.get.cache.clear();Avatar.get.cache.clear();Total.seen.cache.clear();_retainedByKey={};_retainedByStream={};_retainedStreams={};_retainedNodes={}}
function _scheduleUpdate(){var ms=1000;if(_scheduleUpdate.timeout){clearTimeout(_scheduleUpdate.timeout)}
_scheduleUpdate.timeout=setTimeout(function(){var now=Date.now();if(_scheduleUpdate.lastTime!==undefined&&now-_scheduleUpdate.lastTime-ms>_scheduleUpdate.delay){if(!Streams.refresh.options.preventAutomatic){Streams.refresh()}}
_scheduleUpdate.lastTime=now;setTimeout(_scheduleUpdate,ms)},ms)}
function _refreshUnlessSocket(publisherId,streamName,options){return Stream.refresh(publisherId,streamName,null,Q.extend({messages:!0,unlessSocket:!0},options))}
Q.Template.set('Streams/followup/mobile/alert',"The invite was sent from our number, which your friends don't yet recognize. Follow up with a quick text to let them know the invitation came from you, asking them to click the link.");Q.Template.set('Streams/followup/mobile',"Hey, I just sent you an invite with {{app}}. Please check your sms and click the link!");Q.Template.set('Streams/followup/email/alert',"");Q.Template.set('Streams/followup/email/subject',"Did you get an invite?");Q.Template.set('Streams/followup/email/body',"Hey, I just sent you an invite with {{app}}. Please check your email and click the link in there!");_scheduleUpdate.delay=5000})(Q,jQuery);if(!window.Q){document.getElementsByTagName('body')[0].innerHTML="<h1>Please run Overlay/scripts/Q/install.php --all</h1>";throw "Q is not defined"}
var Overlay=(function(Q,$){var Overlay={userContextual:function(item){var action=$(item).attr('data-action');if(Overlay.actions[action]){Q.handle(Overlay.actions[action],Overlay,[item])}},actions:{logout:Q.Users.logout,setIdentifier:Q.Users.setIdentifier},onPhotoSelect:function($element,photo,images){Overlay.selectedPhoto=photo;Overlay.switchToSection($('.section')[1]);var src=images[0].source;$('#background').attr('src',src);var $preview=$('#preview');$preview.height($preview.width()/images[0].width*images[0].height)},switchToSection:function(element){$('.section').addClass('Overlay_compressed').removeClass('Overlay_expandable');$(element).removeClass('Overlay_compressed').prevAll('.section').addClass('Overlay_expandable')},postImage:function(opts){var callObj=$.extend({},{url:'https://graph.facebook.com/me/photos',type:'POST',cache:!1,success:function(response){console.log(response)},error:function(){console.error(arguments)},processData:!1,xhr:function(){var xhr=$.ajaxSettings.xhr();xhr.send=function(string){var bytes=Overlay.conversions.stringToBinaryArray(string);XMLHttpRequest.prototype.send.call(this,new Uint8Array(bytes).buffer)};return xhr}},opts.call);var boundary='Awesome field separator '+Math.random();callObj.url+='?access_token='+opts.fb.accessToken;callObj.data=Overlay.composeMultipartData(opts.fb,boundary);callObj.contentType='multipart/form-data; boundary='+boundary;$.ajax(callObj)},composeMultipartData:function(fields,boundary){var data='';$.each(fields,function(key,value){data+='--'+boundary+'\r\n';if(value.dataString){data+='Content-Disposition: form-data; name=\''+key+'\'; '+'filename=\''+value.name+'\'\r\n';data+='Content-Type: '+value.type+'\r\n\r\n';data+=value.dataString+'\r\n'}else{data+='Content-Disposition: form-data; name=\''+key+'\';'+'\r\n\r\n';data+=value+'\r\n'}});data+='--'+boundary+'--';return data},conversions:{stringToBinaryArray:function(string){return Array.prototype.map.call(string,function(c){return c.charCodeAt(0)&0xff})},base64ToString:function(b64String){return atob(b64String)}}};Q.page("Overlay/welcome",function(){Q.Users.login({tryQuietly:!0,onSuccess:{Overlay:function(){window.location=Q.url('home')}}})},'Overlay');Q.page("Overlay/home",function(){Q.Tool.byId('Streams_photoSelector').state.onPhotosLoaded.set(function(){this.$('img').tool('Q/clickable').activate()});var $countries=$('#countries');var $options=$countries.find('option');$options.eq(Math.floor(Math.random()*$options.length)).attr('selected',!0);$countries.on('change',function(){$('#foreground').attr('src',$(this).val())}).trigger('change');$('body').on(Q.Pointer.fastclick,'.section.Overlay_expandable',!0,function(){Overlay.switchToSection(this)});$('#opacity').on('change',function(){$('#foreground').css('opacity',$(this).val())});$('button').tool('Q/clickable').activate();$('#upload').on(Q.Pointer.click,function(){var $button=$(this);$button.addClass('Q_uploading');var canvas=$('<canvas width="525" height="525" />').appendTo('body').hide()[0];var ctx=canvas.getContext('2d');var $bg=$('#background');var $fg=$('#foreground');ctx.drawImage($bg[0],0,0,$bg[0].naturalWidth,$bg[0].naturalHeight,0,0,525,525);ctx.globalAlpha=parseFloat($('#opacity').val());ctx.drawImage($fg[0],0,0,$fg[0].naturalWidth,$fg[0].naturalHeight,0,0,525,525);ctx.globalAlpha=1;var data=canvas.toDataURL('image/jpeg').replace(/^data:image\/(png|jpe?g);base64,/,'');var image=Overlay.conversions.base64ToString(data);_postMessage("I made this with http://customizemypic.com");function _postMessage(message){Overlay.postImage({fb:{message:message,accessToken:FB.getAccessToken(),file:{name:'customizemypic.jpg',type:'image/jpeg',dataString:image}},call:{url:'https://graph.facebook.com/me/photos',success:function(response){var photoId=response.id;location.href="https://www.facebook.com/photo.php?fbid="+photoId+"&makeprofile=1";$button.removeClass('Q_uploading')},error:function(){console.warn(arguments)}}})}})},'Overlay');Q.page('',function(){$('h1').tool('Q/textfill',{refreshOnLayout:!0}).activate(function(slogan){$(slogan).animate({opacity:1},300)});$('.Q_clickable').tool('Q/clickable').activate();$('.Overlay_login').on(Q.Pointer.click,function(){Q.Users.login({onSuccess:{Overlay:function(){location=Q.url('home')}}});return!1});Q.addScript("plugins/Q/js/QTools.js",function(){var avatar=$('#dashboard .Users_avatar_tool');if(avatar.length){Q.Contextual.add(avatar,$('#dashboard_user_contextual'))}});$('#notices li').on(Q.Pointer.fastclick,!0,function(){var $this=$(this),key;$this.css('min-height',0).slideUp(300,function(){$(this).remove();if(!$('#notices li').length){$('#notices_slot').empty()}
Q.layout()});if(key=encodeURIComponent($this.attr('data-key'))){Q.req('Q/notice','data',null,{method:'delete',fields:{key:key}})}}).css('cursor','pointer');var $iframe=$('.Q_mobile .videoArea iframe');var width=$iframe.parent().innerWidth();$iframe.css({width:width,height:width*337/600})},'Overlay');Q.Tool.jQuery("Fisheye","js/fn/fisheye.js");Q.Tool.define("Overlay/cool","js/tools/cool.js");Q.handle.options.loadUsingAjax=!0;Q.Pointer.preventRubberBand({direction:'vertical'});Q.Pointer.startBlurringOnTouch();Q.Users.initFacebook.options.version='v2.5';Q.onInit.set(function(){Q.Users.login.options=Q.extend(Q.Users.login.options,{using:'facebook',scope:['email','public_profile','user_photos','publish_actions']});if(Q.info.isMobile){Q.Tool.define.options("Q/columns",{back:{src:"plugins/Q/img/x.png"},scrollbarsAutoHide:!1});Q.Tool.jQuery.options("Q/clickable",{press:{size:1.5},release:{size:3},onPress:{Groups:function(event,triggers){this.parents().nextAll('.Groups_badge').removeClass('Groups_show')}}})}else{Q.Tool.jQuery.options("Q/clickable",{press:{size:0.92},release:{size:1.5,opacity:0.5},shadow:{opacity:0.25,dip:0.5},onPress:{Groups:function(event,triggers){this.parents().nextAll('.Groups_badge').removeClass('Groups_show')}}});Q.Tool.define.options("Q/columns",{scrollbarsAutoHide:!1})}},'Overlay');return Overlay})(Q,jQuery)